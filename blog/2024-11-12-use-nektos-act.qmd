---
title: "nektos/act ã‚’ä½¿ã£ã¦ã¿ãŸ"
author: uma-chan
date: 2024-11-12 23:54:57 +0900
date-modified: last-modified
image: "/assets/common/icon_hhkb3_large.jpg"
description: |
  GitHub Actions ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã§ãã‚‹ä¾¿åˆ©ãª OSS nektos/act ã‚’ä½¿ã£ã¦ã¿ã¾ã—ãŸ
categories:
  - "blog"
  - "tech"
---

GitHub Actions ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã§ãã‚‹ä¾¿åˆ©ãª OSS <https://github.com/nektos/act> ã‚’ä½¿ã£ã¦ã¿ã¾ã—ãŸã€‚

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒé›£ã—ã‹ã£ãŸã®ã§è‹¦æˆ¦ã—ãŸéƒ¨åˆ†ã‚‚ãƒ¡ãƒ¢ã‚’æ®‹ã—ã¦ãŠãã¾ã™ã€‚

## 1. ç­†è€…ã®ç’°å¢ƒã«ã¤ã„ã¦

- OS: WSL2 Ubuntu 24.04
- Shell: zsh

## 2. ãƒã‚¤ãƒŠãƒªã©ã“ï¼Ÿï¼Ÿ

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é † <https://nektosact.com/installation/index.html> ã«å¾“ã£ã¦

```{.sh}
curl --proto '=https' --tlsv1.2 -sSf https://raw.githubusercontent.com/nektos/act/master/install.sh | sudo bash
```

ã‚’å®Ÿè¡Œã—ãŸã¯ã„ã„ã‚‚ã®ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆãŒåˆ†ã‹ã‚‰ãš `which act` ã§æ¢ã—ã¦ã‚‚è¦‹ã¤ã‹ã‚‰ãšã€‚

(2024-11-19 è¿½è¨˜: ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« bin/act ãŒç”Ÿæˆã•ã‚Œã¦ã„ã¾ã—ãŸã€‚è‡ªåˆ†ã«ã¨ã£ã¦ã¯å¬‰ã—ããªã„æŒ™å‹•ã€‚)

ç¶šã„ã¦ GitHub CLI extension ã¨ã—ã¦ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ãŒç°¡å˜ãã†ã«è¦‹ãˆã¾ã—ãŸã€‚

```{.sh}
gh extension install https://github.com/nektos/gh-act
```

ãŸã ã€ GitHub CLI extension ã£ã¦ãªã«ï¼Ÿãã‚‚ãã‚‚ãã®ä»•æ§˜ã‚’çŸ¥ã‚‹å¿…è¦æ€§ã‚’æ„Ÿã˜ãªã‹ã£ãŸãŸã‚ã‚¹ãƒ«ãƒ¼ã€‚

ä»•æ–¹ãŒãªã„ã®ã§ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã“ã¨ã«ã€‚

```{.sh}
git clone https://github.com/nektos/act.git
cd act/
make build

# å› ã¿ã«ç§ã®ç’°å¢ƒã§ã¯ä»¥ä¸‹ã‚³ãƒãƒ³ãƒ‰ã§ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦ã¾ã™ã€‚
# ghq get -p nekotos/act
```

ãƒ“ãƒ«ãƒ‰å¾Œ `./dist/local/act` ãªã‚‹ãƒã‚¤ãƒŠãƒªãŒç”Ÿæˆã•ã‚ŒãŸãŸã‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ã€‚

é¢å€’ãªã®ã§ PATH ã¯é€šã—ã¦ã¾ã›ã‚“ãŒã‚ˆã„å­ã¯é€šã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

## 3. å‹•ä½œç¢ºèª

`https://github.com/i9wa4/gha-sandbox` ã®ã†ã¡ `.github/workflows/4.6.actionlint.yml` ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚

```{.sh}
$ ~/src/github.com/nektos/act/dist/local/act workflow_dispatch -W '.github/workflows/4.6.actionlint.yml'
INFO[0000] Using docker host 'unix:///var/run/docker.sock', and daemon socket 'unix:///var/run/docker.sock'
[4.6. Linting GitHub Actions/lint] ğŸš€  Start image=catthehacker/ubuntu:act-latest
[4.6. Linting GitHub Actions/lint]   ğŸ³  docker pull image=catthehacker/ubuntu:act-latest platform= username= forcePull=true
[4.6. Linting GitHub Actions/lint]   ğŸ³  docker create image=catthehacker/ubuntu:act-latest platform= entrypoint=["tail" "-f" "/dev/null"] cmd=[] network="host"
[4.6. Linting GitHub Actions/lint]   ğŸ³  docker run image=catthehacker/ubuntu:act-latest platform= entrypoint=["tail" "-f" "/dev/null"] cmd=[] network="host"
[4.6. Linting GitHub Actions/lint]   ğŸ³  docker exec cmd=[node --no-warnings -e console.log(process.execPath)] user= workdir=
[4.6. Linting GitHub Actions/lint] â­ Run Main actions/checkout@v4
[4.6. Linting GitHub Actions/lint]   ğŸ³  docker cp src=/home/i9wa4/src/github.com/i9wa4/gha-sandbox/. dst=/home/i9wa4/src/github.com/i9wa4/gha-sandbox
[4.6. Linting GitHub Actions/lint]   âœ…  Success - Main actions/checkout@v4
[4.6. Linting GitHub Actions/lint] â­ Run Main docker run --rm -v "$(pwd):$(pwd)" -w "$(pwd)" rhysd/actionlint:latest
[4.6. Linting GitHub Actions/lint]   ğŸ³  docker exec cmd=[bash --noprofile --norc -e -o pipefail /var/run/act/workflow/1.sh] user= workdir=
| Unable to find image 'rhysd/actionlint:latest' locally
| latest: Pulling from rhysd/actionlint
43c4264eed91: Pull complete
9ff7a0d1399a: Pull complete
efbbf3bc777d: Pull complete
290bb4d6a286: Pull complete
Digest: sha256:82244e1db1c60d82c7792180a48dd0bcb838370bb589d53ff132503fc9485868
| Status: Downloaded newer image for rhysd/actionlint:latest
[4.6. Linting GitHub Actions/lint]   âœ…  Success - Main docker run --rm -v "$(pwd):$(pwd)" -w "$(pwd)" rhysd/actionlint:latest
[4.6. Linting GitHub Actions/lint] Cleaning up container for job lint
[4.6. Linting GitHub Actions/lint] ğŸ  Job succeeded

INFO    ï¸ ğŸ“£ A newer version of 'act' is available - consider ugrading to 0.2.69.
```

ã†ã¾ãå‹•ã„ã¦ãã‚Œã¾ã—ãŸã€‚

## 4. [2024-12-05 è¿½è¨˜] Mac ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸå ´åˆ

ä»¥ä¸‹ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã‚Šã¾ã—ãŸã€‚

[WSL2ã§Docker buildã‚’ã™ã‚‹ã¨æ­¢ã¾ã‚‹å•é¡Œ("docker-credential-desktop.exe": executable file not found in $PATH, out: ``) #Docker - Qiita](https://qiita.com/rasuk/items/a36b29b8c79d02fc551a)
