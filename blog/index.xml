<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>uma-chan&#39;s page</title>
<link>https://i9wa4.github.io/blog/</link>
<atom:link href="https://i9wa4.github.io/blog/index.xml" rel="self" type="application/rss+xml"/>
<description>All of my thoughts.</description>
<image>
<url>https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg</url>
<title>uma-chan&#39;s page</title>
<link>https://i9wa4.github.io/blog/</link>
</image>
<generator>quarto-1.8.27</generator>
<lastBuildDate>Wed, 07 Jan 2026 16:24:41 GMT</lastBuildDate>
<item>
  <title>AIコーディングエージェント時代になぜ私は dotfiles を育てるのか</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2026-01-08-why-dotfiles-still-matters-to-me.html</link>
  <description><![CDATA[ 





<section id="claude-code-の進化が示すもの" class="level2">
<h2 class="anchored" data-anchor-id="claude-code-の進化が示すもの">1. Claude Code の進化が示すもの</h2>
<p>Claude Code 開発者の Boris による最近の変更をまとめたポストが話題になっていました。</p>
<blockquote class="twitter-tweet blockquote">
<p lang="ja" dir="ltr">
Claude Codeの開発者Borisが、冬休み期間中に作成したであろう変更をまとめてみた:<br> <br>【機能拡張】<br>・/teleport コマンド、CLI セッションを web/mobile に引き継ぎ<br>・tmux 風にバックグラウンドでエージェント継続実行<br>・Subagentsの frontmatter で hooksを追加可能… <a href="https://t.co/ivKZvzimb3">pic.twitter.com/ivKZvzimb3</a>
</p>
— Oikon (<span class="citation" data-cites="oikon48">@oikon48</span>) <a href="https://twitter.com/oikon48/status/2008125761128144965?ref_src=twsrc%5Etfw">January 5, 2026</a>
</blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>ポスト全文：</p>
<blockquote class="blockquote">
<p><strong>【機能拡張】</strong></p>
<ul>
<li>/teleport コマンド、CLI セッションを web/mobile に引き継ぎ</li>
<li>tmux 風にバックグラウンドでエージェント継続実行</li>
<li>Subagentsの frontmatter で hooksを追加可能</li>
<li>CLAUDE_CODE_FILE_READ_MAX_OUTPUT_TOKENS 、ファイル読み込みの最大出力トークンをカスタマイズ</li>
<li>長時間 CLI セッション完了時にモバイルへ通知</li>
<li>/skill-name でSkillsをスラッシュコマンドとして呼び出し</li>
<li>Subagents の frontmatter で MCPを指定可能</li>
<li>カスタムコマンドレベルでのHooks定義</li>
<li>現在のセッション名の表示</li>
<li>Escキー操作での割り込みの文字色の変更</li>
<li>Subagentsの並列実行およびバックグラウンド実行の無効化設定</li>
</ul>
<p><strong>【バグ修正】</strong></p>
<ul>
<li>–resume –fork-session でのセッションをフォークし過去メッセージに巻き戻し</li>
<li>General Subagentsが親のモデルを継承するよう修正</li>
<li>ターミナルのちらつきを 85% 低減</li>
<li>Web版でPlanモードから復帰できない問題を修正</li>
<li>LSP (Language Server Protocol) 実装のバグ修正</li>
<li>ウィンドウサイズ変更について描画改善</li>
<li>Thinking時の ctrl+O の内容の改善</li>
<li>パイプを使ってclaudeを起動する際のバグを修正</li>
<li>画像サイズが大きい時の自動圧縮</li>
<li>バックグラウンド Subagentsのコンテキストが親に漏れるバグを修正</li>
</ul>
<p>多すぎる😂 分かる範囲なので抜け漏れもあるかもしれない。上記の多くは次回のリリースに入るとのこと。</p>
<p>I’m worried if you got enough rest during your vacation lol, <span class="citation" data-cites="bcherny">@bcherny</span></p>
</blockquote>
<p>これを見てまず思ったのは、</p>
<p><strong>「ターミナルじゃないとできない」とは、いずれ言えなくなる</strong> ということです。</p>
</section>
<section id="機能比較は意味がなくなる" class="level2">
<h2 class="anchored" data-anchor-id="機能比較は意味がなくなる">2. 機能比較は意味がなくなる</h2>
<section id="現時点での比較" class="level3">
<h3 class="anchored" data-anchor-id="現時点での比較">2.1. 現時点での比較</h3>
<p>今 2026/1/7 時点では、ターミナル + Claude Code は並列実行の面で多少の優位性があります (tmux で無制限かつ同一ディレクトリで異なるタスクを実行可能)。</p>
<p>しかし Boris の開発内容を見るに、この差もなくなっていくことになります。</p>
</section>
<section id="収斂する未来" class="level3">
<h3 class="anchored" data-anchor-id="収斂する未来">2.2. 収斂する未来</h3>
<p>Claude Code の VS Code拡張もターミナル版と同じ設定ファイルを使用します。 最近みなさん熱心に育成中と思しき以下の設定群ですね。</p>
<pre class="text"><code>.claude/
├── CLAUDE.md
├── rules/
├── skills/
├── agents/
└── commands/</code></pre>
<p>つまり、 <strong>Claude Code 固有の機能はインターフェースに依存しない</strong> というわけです。</p>
<p>そんな世界に向かっていく中でターミナルを選ぶ理由とは一体何なのか。</p>
</section>
</section>
<section id="残るもの環境構築力" class="level2">
<h2 class="anchored" data-anchor-id="残るもの環境構築力">3. 残るもの：環境構築力</h2>
<section id="ターミナル環境の価値" class="level3">
<h3 class="anchored" data-anchor-id="ターミナル環境の価値">3.1. ターミナル環境の価値</h3>
<p>ターミナル環境の本当の価値は星取り表で比較できるような機能ではないと思います。</p>
<p><strong>ターミナル環境の本当の価値とは、開発環境すべてをテキストファイルで定義し、Git で管理できること</strong> です。</p>
</section>
<section id="unix-哲学との親和性" class="level3">
<h3 class="anchored">3.2. Unix 哲学との親和性</h3>
<p>Claude Code 公式ドキュメントでも謳われています。</p>
<blockquote class="blockquote">
<h2 id="why-developers-love-claude-code" class="anchored" data-anchor-id="unix-哲学との親和性">Why developers love Claude Code</h2>
<ul>
<li><p><strong>Works in your terminal:</strong> Not another chat window. Not another IDE. Claude Code meets you where you already work, with the tools you already love.</p></li>
<li><p><strong>Unix philosophy:</strong> Claude Code is composable and scriptable.</p></li>
</ul>
<p>— <a href="https://code.claude.com/docs/en/overview">Claude Code Overview</a></p>
</blockquote>
<p>ターミナル環境では、AIエージェントをシェルスクリプトや他の CLI ツールと組み合わせて、自分だけの開発環境を構築できます。</p>
</section>
<section id="周辺ツールを自由に付け替えられる" class="level3">
<h3 class="anchored" data-anchor-id="周辺ツールを自由に付け替えられる">3.3. 周辺ツールを自由に付け替えられる</h3>
<p>ターミナル環境では、すべてのツールが交換可能です。</p>
<table class="caption-top table">
<colgroup>
<col style="width: 32%">
<col style="width: 28%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th>レイヤー</th>
<th>選択肢</th>
<th>交換可能性</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ターミナルエミュレータ</td>
<td>Ghostty, WezTerm, iTerm2, Kitty</td>
<td>自由に変更可能</td>
</tr>
<tr class="even">
<td>ターミナルマルチプレクサ</td>
<td>tmux, zellij, screen</td>
<td>自由に変更可能</td>
</tr>
<tr class="odd">
<td>シェル</td>
<td>zsh, bash, fish</td>
<td>自由に変更可能</td>
</tr>
<tr class="even">
<td>テキストエディタ</td>
<td>Neovim, Vim, Emacs, Helix</td>
<td>自由に変更可能</td>
</tr>
<tr class="odd">
<td>AIコーディングエージェント</td>
<td>Claude Code, Codex CLI, Gemini CLI</td>
<td>自由に変更可能</td>
</tr>
</tbody>
</table>
<p>ターミナル環境では各レイヤーを独立して進化させられます。</p>
<p>実際私は最近ターミナルを Alacritty, Ghostty, WezTerm と頻繁に乗り換えていますが開発体験は全く変わっていません。</p>
<p>また私の環境では tmux, Vim, Zsh の統合利用を加味したキーバインドをそれぞれのツールに設定していて手に実に馴染みます。</p>
</section>
</section>
<section id="dotfiles-のすすめ" class="level2">
<h2 class="anchored" data-anchor-id="dotfiles-のすすめ">4. dotfiles のすすめ</h2>
<section id="dotfiles-とは" class="level3">
<h3 class="anchored" data-anchor-id="dotfiles-とは">4.1. dotfiles とは</h3>
<p>dotfiles とはホームディレクトリにある設定ファイル群を Git で管理する文化です。</p>
<p>たとえば以下のような構成になります。</p>
<pre class="text"><code>dotfiles/
├── .config/
│   ├── claude/      # AIコーディングエージェント設定
│   ├── tmux/        # ターミナルマルチプレクサ設定
│   ├── wezterm/     # ターミナル設定
│   └── nvim/        # テキストエディタ設定
├── .zshrc            # シェル設定
└── bin/              # 自作スクリプト</code></pre>
</section>
<section id="なぜ-dotfiles-を育てるのか" class="level3">
<h3 class="anchored" data-anchor-id="なぜ-dotfiles-を育てるのか">4.2. なぜ dotfiles を育てるのか</h3>
<section id="環境の再現性" class="level4">
<h4 class="anchored" data-anchor-id="環境の再現性">4.2.1. 環境の再現性</h4>
<p>新しいマシンでも <code>git clone</code> と数コマンドで同じ環境が再現できます。</p>
<p>いつでも再現できるという安心感があるので、快適さを追求して自身の資産にしていくモチベーションが湧きます。</p>
</section>
<section id="進化の軌跡" class="level4">
<h4 class="anchored" data-anchor-id="進化の軌跡">4.2.2. 進化の軌跡</h4>
<p>設定の変更がすべて Git に残ります。</p>
<p>なぜその設定にしたか後から追えますし、過去の状態に戻すことも簡単です。</p>
</section>
<section id="知識の蓄積" class="level4">
<h4 class="anchored" data-anchor-id="知識の蓄積">4.2.3. 知識の蓄積</h4>
<p>dotfiles は「自分がどう働きたいか」の具体化です。</p>
<p>年月をかけて育てた設定は、他では得られない資産になります。</p>
</section>
<section id="共有と学習" class="level4">
<h4 class="anchored" data-anchor-id="共有と学習">4.2.4. 共有と学習</h4>
<p>他人の dotfiles を見て学び、自分の dotfiles を公開して切磋琢磨できます。</p>
<p>dotfiles はテキストファイルなので、AIに読み込ませて「この設定は何をしているのか」「自分の環境に取り入れるにはどうすればいいか」を質問できます。他人の複雑な設定を理解するハードルがかなり下がりました。</p>
<p>以下は2025年で象徴的だなと思った投稿です。</p>
<p>dotfiles を愛する者の間では割と常識になっていた設定についての会話です。 設定なんてものは dotfiles を使っている人以外にはなかなか広まらないんです。 情報格差、感じますよね。</p>
<blockquote class="twitter-tweet blockquote">
<p lang="ja" dir="ltr">
ryoppippiからclaude codeの設定を学ぶといいので、みんなryoppippiのdotfilesも見ような<a href="https://t.co/RduDuxgLml">https://t.co/RduDuxgLml</a> <a href="https://t.co/NJMD3hNyFP">https://t.co/NJMD3hNyFP</a>
</p>
— yasunori🫖<span class="citation" data-cites="loglass">@loglass</span>🐳 (<span class="citation" data-cites="YKirin0418">@YKirin0418</span>) <a href="https://twitter.com/YKirin0418/status/1977585870787301738?ref_src=twsrc%5Etfw">October 13, 2025</a>
</blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</section>
</section>
<section id="claude-code-設定-周辺環境-最強オレオレ開発環境" class="level3">
<h3 class="anchored" data-anchor-id="claude-code-設定-周辺環境-最強オレオレ開発環境">4.3. Claude Code 設定 + 周辺環境 = 最強オレオレ開発環境</h3>
<p>Claude Code 設定だけなら、IDEでも使えます。しかし……</p>
<pre class="text"><code>dotfiles/
├── .config/
│   ├── claude/         # &lt;- IDEでも使える
│   │   ├── CLAUDE.md
│   │   ├── rules/
│   │   ├── agents/
│   │   └── commands/
│   │
│   ├── tmux/           # &lt;- ターミナル固有
│   │   └── tmux.conf
│   │
│   └── wezterm/        # &lt;- ターミナル固有
│       └── wezterm.lua
│
├── .zshrc               # &lt;- ターミナル固有
│
└── bin/                 # &lt;- ターミナル固有</code></pre>
<p>Claude Code 設定は「点」、dotfiles 全体は「面」ですね。</p>
<p>周辺ツールとの連携によってAIは開発フロー全体に溶け込みます。</p>
</section>
</section>
<section id="dotfiles-の始め方" class="level2">
<h2 class="anchored" data-anchor-id="dotfiles-の始め方">5. dotfiles の始め方</h2>
<p>dotfiles の始め方については、以下の記事が親しみがあってわかりやすいと思いました。</p>
<ul>
<li><a href="https://qiita.com/yutkat/items/c6c7584d9795799ee164">ようこそdotfilesの世界へ - Qiita</a></li>
<li><a href="https://zenn.dev/timetree/articles/904126d3570345">ゆるりとはじめる dotfiles 入門 - Zenn</a></li>
</ul>
<p>dotfiles は一日で完成しません。使いながら情報感度を上げつつ徐々に育てていくものです。</p>
<p>まずは Claude Code の設定など小さいところから始めて、徐々に充実させていくのがおすすめです。</p>
</section>
<section id="まとめ" class="level2">
<h2 class="anchored" data-anchor-id="まとめ">6. まとめ</h2>
<section id="機能は収斂する" class="level3">
<h3 class="anchored" data-anchor-id="機能は収斂する">6.1. 機能は収斂する</h3>
<p>Claude Code の <code>/teleport</code> やバックグラウンド実行が示すように、ターミナルと IDE の機能差はなくなっていきます。</p>
</section>
<section id="残るのは環境構築力" class="level3">
<h3 class="anchored" data-anchor-id="残るのは環境構築力">6.2. 残るのは「環境構築力」</h3>
<p>ターミナル環境の価値はプログラマブル、コンポーザブル、交換可能、ポータブルであることです。 すべてをテキストファイルで定義し、Git で管理できているる環境は Claude Code の機能の収斂後も輝きを失いません。</p>
</section>
<section id="dotfiles-を育てよう" class="level3">
<h3 class="anchored" data-anchor-id="dotfiles-を育てよう">6.3. dotfiles を育てよう</h3>
<p>Claude Code 設定は IDE でも使えます。しかし……</p>
<ul>
<li>スクリプトでワークフロー自動化</li>
<li>自作ツールや最新ツールとの連携</li>
<li>複数ツール間で統一した操作感</li>
</ul>
<p>これらは自分で構築した環境でしか実現できません。</p>
</section>
<section id="そして何より" class="level3">
<h3 class="anchored" data-anchor-id="そして何より">6.4. そして何より</h3>
<p><strong>dotfiles は楽しいのでオススメ！ぜひやろう！生き様を反映させていこう！</strong></p>
<p>これが言いたかっただけです。</p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2026-01-08-why-dotfiles-still-matters-to-me.html&amp;text=AI%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E6%99%82%E4%BB%A3%E3%81%AB%E3%81%AA%E3%81%9C%E7%A7%81%E3%81%AF%20dotfiles%20%E3%82%92%E8%82%B2%E3%81%A6%E3%82%8B%E3%81%AE%E3%81%8B%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=AI%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E6%99%82%E4%BB%A3%E3%81%AB%E3%81%AA%E3%81%9C%E7%A7%81%E3%81%AF%20dotfiles%20%E3%82%92%E8%82%B2%E3%81%A6%E3%82%8B%E3%81%AE%E3%81%8B%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2026-01-08-why-dotfiles-still-matters-to-me.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2026-01-08-why-dotfiles-still-matters-to-me.html&amp;title=AI%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E6%99%82%E4%BB%A3%E3%81%AB%E3%81%AA%E3%81%9C%E7%A7%81%E3%81%AF%20dotfiles%20%E3%82%92%E8%82%B2%E3%81%A6%E3%82%8B%E3%81%AE%E3%81%8B%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>
</section>

 ]]></description>
  <category>blog</category>
  <category>tech-ai</category>
  <guid>https://i9wa4.github.io/blog/2026-01-08-why-dotfiles-still-matters-to-me.html</guid>
  <pubDate>Wed, 07 Jan 2026 16:24:41 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>mise + pre-commit 設定の供養</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2026-01-06-mise-pre-commit.html</link>
  <description><![CDATA[ 





<section id="はじめに" class="level2">
<h2 class="anchored" data-anchor-id="はじめに">1. はじめに</h2>
<p>dotfiles リポジトリで mise と pre-commit を活用して CI を構築していましたが、Nix へ移行完了したため不要になりました。削除前に知見を残しておきます。</p>
</section>
<section id="mise.toml" class="level2">
<h2 class="anchored" data-anchor-id="mise.toml">2. mise.toml</h2>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>mise.toml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" data-filename="mise.toml" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb1-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[tools]</span></span>
<span id="cb1-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Tools for CI</span></span>
<span id="cb1-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"aqua:JohnnyMorganz/StyLua"</span>    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2.3.1"</span></span>
<span id="cb1-4"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"aqua:gitleaks/gitleaks"</span>       <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"8.30.0"</span></span>
<span id="cb1-5"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"aqua:rhysd/actionlint"</span>        <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1.7.9"</span></span>
<span id="cb1-6"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"aqua:suzuki-shunsuke/ghalint"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1.5.4"</span></span>
<span id="cb1-7"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"aqua:suzuki-shunsuke/ghatm"</span>   <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1.0.0"</span></span>
<span id="cb1-8"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"aqua:suzuki-shunsuke/pinact"</span>  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"3.7.3"</span></span>
<span id="cb1-9"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"aqua:zizmorcore/zizmor"</span>       <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1.19.0"</span></span>
<span id="cb1-10"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">pre-commit</span>                     <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"4.5.1"</span></span>
<span id="cb1-11"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">shellcheck</span>                     <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0.11.0"</span></span>
<span id="cb1-12"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">shfmt</span>                          <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"3.12.0"</span></span>
<span id="cb1-13"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">uv</span>                             <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0.9.18"</span></span>
<span id="cb1-14"></span>
<span id="cb1-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Custom packages (nix/packages/*.nix)</span></span>
<span id="cb1-16"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"aqua:rvben/rumdl"</span>             <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0.0.206"</span></span>
<span id="cb1-17"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"aqua:rhysd/vim-startuptime"</span>   <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"1.3.2"</span></span></code></pre></div></div>
</div>
<section id="ツール解説" class="level3">
<h3 class="anchored" data-anchor-id="ツール解説">2.1. ツール解説</h3>
<section id="cilinter-系" class="level4">
<h4 class="anchored" data-anchor-id="cilinter-系">2.1.1. CI/Linter 系</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>ツール</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>StyLua</td>
<td>Lua フォーマッター (Neovim 設定用)</td>
</tr>
<tr class="even">
<td>gitleaks</td>
<td>シークレット検出</td>
</tr>
<tr class="odd">
<td>actionlint</td>
<td>GitHub Actions Workflow の Linter</td>
</tr>
<tr class="even">
<td>ghalint</td>
<td>GitHub Actions のセキュリティ Linter</td>
</tr>
<tr class="odd">
<td>ghatm</td>
<td>GitHub Actions のテンプレート管理</td>
</tr>
<tr class="even">
<td>pinact</td>
<td>GitHub Actions のバージョン固定</td>
</tr>
<tr class="odd">
<td>zizmor</td>
<td>GitHub Actions のセキュリティスキャナー</td>
</tr>
<tr class="even">
<td>pre-commit</td>
<td>Git hooks マネージャー</td>
</tr>
<tr class="odd">
<td>shellcheck</td>
<td>シェルスクリプト Linter</td>
</tr>
<tr class="even">
<td>shfmt</td>
<td>シェルスクリプトフォーマッター</td>
</tr>
<tr class="odd">
<td>uv</td>
<td>Python パッケージマネージャー</td>
</tr>
</tbody>
</table>
</section>
<section id="開発ツール系" class="level4">
<h4 class="anchored" data-anchor-id="開発ツール系">2.1.2. 開発ツール系</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>ツール</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>rumdl</td>
<td>Markdown Linter/Formatter</td>
</tr>
<tr class="even">
<td>vim-startuptime</td>
<td>Vim の起動時間計測</td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
<section id="pre-commit-mise.yaml-github-actions-workflow" class="level2">
<h2 class="anchored" data-anchor-id="pre-commit-mise.yaml-github-actions-workflow">3. pre-commit-mise.yaml (GitHub Actions Workflow)</h2>
<p>GitHub Actions で mise と pre-commit を組み合わせて CI を実行するワークフローです。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.github/workflows/pre-commit-mise.yaml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" data-filename=".github/workflows/pre-commit-mise.yaml" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> pre-commit (mise)</span></span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">run-name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.event_name }} on ${{ github.ref_name }} by @${{ github.actor }}</span></span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">workflow_dispatch</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main</span></span>
<span id="cb2-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull_request</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main</span></span>
<span id="cb2-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">types</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> opened</span></span>
<span id="cb2-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> synchronize</span></span>
<span id="cb2-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> reopened</span></span>
<span id="cb2-16"></span>
<span id="cb2-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">permissions</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">{}</span></span>
<span id="cb2-18"></span>
<span id="cb2-19"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">defaults</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">shell</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> bash</span></span>
<span id="cb2-22"></span>
<span id="cb2-23"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">concurrency</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-24"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.workflow }}-${{ github.ref }}</span></span>
<span id="cb2-25"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cancel-in-progress</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb2-26"></span>
<span id="cb2-27"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-28"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pre-commit</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-29"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runs-on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ubuntu-latest</span></span>
<span id="cb2-30"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">timeout-minutes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb2-31"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">permissions</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-32"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">contents</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> read</span></span>
<span id="cb2-33"></span>
<span id="cb2-34"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">steps</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-35"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Checkout</span></span>
<span id="cb2-36"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> # v6.0.1</span></span>
<span id="cb2-37"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-38"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">persist-credentials</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span></span>
<span id="cb2-39"></span>
<span id="cb2-40"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Install mise</span></span>
<span id="cb2-41"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> jdx/mise-action@146a28175021df8ca24f8ee1828cc2a60f980bd5</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> # v3.5.1</span></span>
<span id="cb2-42"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-43"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cache</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb2-44"></span>
<span id="cb2-45"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Cache</span></span>
<span id="cb2-46"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/cache@9255dc7a253b0ccc959486e2bca901246202afeb</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> # v5.0.1</span></span>
<span id="cb2-47"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-48"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">          path</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb2-49">            ~/.cache/pre-commit</span>
<span id="cb2-50">            ~/.cache/uv</span>
<span id="cb2-51">            .venv</span>
<span id="cb2-52"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">          key</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb2-53">            cache-${{ runner.os }}-${{ runner.arch }}-${{ hashFiles('.pre-commit-config.yaml', 'uv.lock') }}</span>
<span id="cb2-54"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">          restore-keys</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb2-55">            cache-${{ runner.os }}-${{ runner.arch }}-</span>
<span id="cb2-56"></span>
<span id="cb2-57"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Run pre-commit</span></span>
<span id="cb2-58"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">        run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb2-59">          pre-commit run --all-files --verbose</span></code></pre></div></div>
</div>
</section>
<section id="まとめ" class="level2">
<h2 class="anchored" data-anchor-id="まとめ">4. まとめ</h2>
<p>mise + pre-commit の組み合わせは開発環境と CI 環境を同一にしつつ CI 実行時間を最短にできるので有用です。 趣味で dotfiles を Nix に移行しただけで mise は悪くないですよ！</p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2026-01-06-mise-pre-commit.html&amp;text=mise%20%2B%20pre-commit%20%E8%A8%AD%E5%AE%9A%E3%81%AE%E4%BE%9B%E9%A4%8A%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=mise%20%2B%20pre-commit%20%E8%A8%AD%E5%AE%9A%E3%81%AE%E4%BE%9B%E9%A4%8A%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2026-01-06-mise-pre-commit.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2026-01-06-mise-pre-commit.html&amp;title=mise%20%2B%20pre-commit%20%E8%A8%AD%E5%AE%9A%E3%81%AE%E4%BE%9B%E9%A4%8A%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>tech-others</category>
  <guid>https://i9wa4.github.io/blog/2026-01-06-mise-pre-commit.html</guid>
  <pubDate>Mon, 05 Jan 2026 19:36:32 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>2025年の総括：AI駆動人生</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-12-31-year-in-review.html</link>
  <description><![CDATA[ 





<section id="はじめに" class="level2">
<h2 class="anchored" data-anchor-id="はじめに">1. はじめに</h2>
<p>2025年が終わろうとしています。</p>
<p><a href="../blog/2025-04-02-looking-back-on-2024.html">2024年度を振り返る</a></p>
<p>これ、去年の振り返りです。 めちゃめちゃ内容が薄くて笑っちゃうくらい今年は濃い1年でした。</p>
<p>ある程度年齢も重ねているのですが、これまで伸び悩んでいた分を一気に取り戻すような1年になったと感じています。</p>
<p>大晦日に2025年を総括します。</p>
</section>
<section id="年の数字" class="level2">
<h2 class="anchored" data-anchor-id="年の数字">2. 2025年の数字</h2>
<section id="github活動" class="level3">
<h3 class="anchored" data-anchor-id="github活動">2.1. GitHub活動</h3>
<p>ほぼ個人リポジトリでの活動です (private contributions は除外)。</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">項目</th>
<th style="text-align: right;">数値</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">総Contributions</td>
<td style="text-align: right;">4,902</td>
</tr>
<tr class="even">
<td style="text-align: left;">コミット</td>
<td style="text-align: right;">2,975</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Issue</td>
<td style="text-align: right;">135</td>
</tr>
<tr class="even">
<td style="text-align: left;">PR</td>
<td style="text-align: right;">142</td>
</tr>
</tbody>
</table>
<p>dotfilesへのコミットが1,307回 (yabai)。</p>
<p>外部OSSへのコントリビューションとして vim/vim (Vim本体) へのPRがマージされて Vim Contributor になれました。</p>
<p>記事はこちら <a href="../blog/2025-07-14-my-first-vim-contribution.html">Vimへの初コントリビューションの経緯と学び</a></p>
</section>
<section id="アウトプット" class="level3">
<h3 class="anchored" data-anchor-id="アウトプット">2.2. アウトプット</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">種類</th>
<th style="text-align: right;">本数</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ブログ記事</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="even">
<td style="text-align: left;">スライド</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Zenn記事</td>
<td style="text-align: right;">21</td>
</tr>
<tr class="even">
<td style="text-align: left;">寄稿</td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>
<p>合計71本の記事を書きました。週1本以上のペースです。</p>
</section>
<section id="登壇" class="level3">
<h3 class="anchored" data-anchor-id="登壇">2.3. 登壇</h3>
<p>4回の外部登壇を行いました。</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">日付</th>
<th style="text-align: left;">登壇先</th>
<th style="text-align: left;">資料</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2025/12/23</td>
<td style="text-align: left;"><a href="https://aeon.connpass.com/event/375097/">モダンデータ基盤の最前線：現場から学ぶ実践と挑戦 - connpass</a></td>
<td style="text-align: left;"><a href="https://speakerdeck.com/genda/aeon-tech-hub-22-mawatari">M&amp;Aで拡大し続けるGENDAのデータ活用を促すためのDatabricks権限管理 / AEON TECH HUB #22 - Speaker Deck</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">2025/12/12</td>
<td style="text-align: left;"><a href="https://events.databricks.com/daiwt-tokyo-after-party/registration-closed">Databricks Data + AI World Tour Tokyo After Party</a></td>
<td style="text-align: left;"><a href="https://speakerdeck.com/genda/data-ai-world-tour-tokyo-after-party-mawatari">Databricks向けJupyter Kernelでデータサイエンティストの開発環境をAI-Readyにする / Data+AI World Tour Tokyo After Party - Speaker Deck</a></td>
</tr>
<tr class="odd">
<td style="text-align: left;">2025/11/07</td>
<td style="text-align: left;"><a href="https://tamesaredatahokkaido.connpass.com/event/369741/">試されDATA SAPPORO #1 - connpass</a></td>
<td style="text-align: left;"><a href="../slides/2025-11-07-tamesare-data-sapporo-uma-chan.html">GENDA の機械学習環境を AWS から Databricks に移行してみた</a></td>
</tr>
<tr class="even">
<td style="text-align: left;">2025/05/22</td>
<td style="text-align: left;">AIネイティブ開発 Tips 1000本ノック (ミダスキャピタル投資先企業勉強会)</td>
<td style="text-align: left;"><a href="../slides/2025-05-22-midas-cursor-tips.html">Cursorのおすすめ設定 &amp; Cursorにデータ分析を任せる方法</a></td>
</tr>
</tbody>
</table>
<p>これまでの人生では登壇したことがなかったのですが今年シレッと4回も登壇してます。</p>
<p>初登壇、イベント主催、Databricks 公式イベント、オンラインで大勢の前で話すなど様々な経験ができました。</p>
</section>
</section>
<section id="年の主な成果" class="level2">
<h2 class="anchored" data-anchor-id="年の主な成果">3. 2025年の主な成果</h2>
<section id="ai駆動開発環境の構築" class="level3">
<h3 class="anchored" data-anchor-id="ai駆動開発環境の構築">3.1. AI駆動開発環境の構築</h3>
<p>Claude Code と Codex CLIを中心に据えた Vim + tmux + Alacritty + Zsh + AI CLI という開発環境の利便性向上に注力してきました。</p>
</section>
<section id="vimプラグイン開発" class="level3">
<h3 class="anchored" data-anchor-id="vimプラグイン開発">3.2. Vimプラグイン開発</h3>
<p>2本のVimプラグインを開発・更新しました。</p>
<ul>
<li><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli">vim-tmux-send-to-ai-cli</a>
<ul>
<li>Vimからtmux経由でAI CLIにプロンプトを送信するプラグイン</li>
</ul></li>
<li><a href="https://github.com/i9wa4/ddc-source-slash-commands">ddc-source-slash-commands</a>
<ul>
<li>カスタムスラッシュコマンド補完用の ddc.vim ソースプラグイン</li>
</ul></li>
</ul>
<p>6月にはVim本体へ初めてコントリビューションできたのでまだ当面喜んでいようと思います。</p>
</section>
<section id="oss-開発" class="level3">
<h3 class="anchored" data-anchor-id="oss-開発">3.3. OSS 開発</h3>
<ul>
<li><a href="https://github.com/i9wa4/jupyter-databricks-kernel">jupyter-databricks-kernel</a>
<ul>
<li>Databricks をバックエンドにした Jupyter Kernel (自信作)</li>
</ul></li>
<li><a href="https://github.com/i9wa4/databricks-marimo-executor">databricks-marimo-executor</a>
<ul>
<li>Databricks をバックエンドにした Marimo Executor (飽きてまだ実装できてない)</li>
</ul></li>
<li><a href="https://github.com/i9wa4/mcp-databricks-server">mcp-databricks-server</a>
<ul>
<li>Databricks でクエリを実行するための MCP Server (ちょっと自信作)</li>
</ul></li>
</ul>
<p>jupyter-databricks-kernel は12月の登壇でも紹介していて、データサイエンティストの開発環境をAI-Readyにするための取り組みとして発表しました。</p>
<p>Databricks さんが API 開発してくれたら Serverless Compute 対応もしたいですぅ！ (技術力は足りないかもだけどモチベだけは高いから私にやらせてくれとめっちゃ思ってる)</p>
<p>Command Execution API に興味があるの世界で自分だけなのではと思いながらこのプロジェクトを進めましたが、割と反響があって嬉しいです。</p>
</section>
<section id="databricks開発環境のai-ready化" class="level3">
<h3 class="anchored" data-anchor-id="databricks開発環境のai-ready化">3.4. Databricks開発環境のAI-Ready化</h3>
<p>データサイエンティストの開発環境という未開拓の改善の余地のある分野を見つけていて色々試行錯誤してきました。 2025年はDatabricks開発環境のAI-Ready化に注力しました。 Claude CodeやCursorなどのAIコーディングアシスタントをDatabricks開発で活用するための環境整備です。</p>
<p><a href="https://zenn.dev/genda_jp/articles/2025-12-19-databricks-notebook-ai-ready">Databricks Notebook 開発環境を AI-Ready にする</a></p>
<p>もしくは</p>
<iframe class="speakerdeck-iframe" frameborder="0" src="https://speakerdeck.com/player/58be33da57d84a5eb9914aa8a8c903ec" title="Databricks向けJupyter Kernelでデータサイエンティストの開発環境をAI-Readyにする / Data+AI World Tour Tokyo After Party" allowfullscreen="true" style="border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 100%; height: auto; aspect-ratio: 560 / 315;" data-ratio="1.7777777777777777">
</iframe>
<p>を読んでください！</p>
</section>
<section id="データエンジニアリング実務" class="level3">
<h3 class="anchored" data-anchor-id="データエンジニアリング実務">3.5. データエンジニアリング実務</h3>
<p>仕事ではdbt、Databricks、BigQuery、Terraformを使ったデータ基盤開発に取り組みました。</p>
<p>ここは大きな成果というよりも継続的な取り組みですね。</p>
<p>権限整理についてはチームで取り組んだ内容を登壇資料にまとめています。</p>
<iframe class="speakerdeck-iframe" frameborder="0" src="https://speakerdeck.com/player/477b4da9eb5e4fdeb8164a3ccaae9a75" title="M&amp;Aで拡大し続けるGENDAのデータ活用を促すためのDatabricks権限管理 / AEON TECH HUB #22" allowfullscreen="true" style="border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 100%; height: auto; aspect-ratio: 560 / 315;" data-ratio="1.7777777777777777">
</iframe>
<p>6月からはPIVOT株式会社での業務委託も開始しました。BigQuery x dbt Coreのデータマート構築を担当し、リファラ分析モデルの新規構築やincrementalモデル設計によるパフォーマンス最適化は記事にまとめています (次節参照)。</p>
</section>
<section id="寄稿" class="level3">
<h3 class="anchored" data-anchor-id="寄稿">3.6. 寄稿</h3>
<p>所属企業のブログに3本の記事を寄稿しました。</p>
<ul>
<li><a href="https://zenn.dev/pivotmedia/articles/pivot-incremental-friendly-dbt-model">データ分析を促進する dbt incremental モデル設計 ― 全期間追跡の低コスト化</a> (PIVOT)</li>
<li><a href="https://zenn.dev/genda_jp/articles/724a597e8f18ff">GENDAのデータサイエンティスト開発体験向上の取り組み紹介―AWS ECSからDatabricksへの移行</a> (GENDA)</li>
<li><a href="https://note.com/genda_jp/n/n94def6811d47">成長を支えるハブとなりたい。データドリブンな組織を加速させるデータ基盤とMLOps</a> (GENDA note)</li>
</ul>
</section>
</section>
<section id="recap" class="level2">
<h2 class="anchored" data-anchor-id="recap">4. Recap</h2>
<blockquote class="twitter-tweet blockquote">
<p lang="ht" dir="ltr">
Zenn 2025 Recap <a href="https://t.co/JPaMQaoUEc">pic.twitter.com/JPaMQaoUEc</a>
</p>
— uma-chan🌲 (<span class="citation" data-cites="i9wa4_">@i9wa4_</span>) <a href="https://twitter.com/i9wa4_/status/2006361739995287761?ref_src=twsrc%5Etfw">December 31, 2025</a>
</blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<blockquote class="twitter-tweet blockquote">
<p lang="ja" dir="ltr">
12月に1000コミットしてたらしい<br>public なものだけなので仕事は別カウントだよー<a href="https://t.co/fGxl14pSs5">https://t.co/fGxl14pSs5</a> <a href="https://t.co/As8jEiPvC7">pic.twitter.com/As8jEiPvC7</a>
</p>
— uma-chan🌲 (<span class="citation" data-cites="i9wa4_">@i9wa4_</span>) <a href="https://twitter.com/i9wa4_/status/2006369271031681135?ref_src=twsrc%5Etfw">December 31, 2025</a>
</blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<blockquote class="twitter-tweet blockquote">
<p lang="ja" dir="ltr">
LAPRASがまとめた、私の今年のアウトプットや成果がこちら！<a href="https://twitter.com/hashtag/LAPRAS_Recap2025?src=hash&amp;ref_src=twsrc%5Etfw">#LAPRAS_Recap2025</a> <a href="https://twitter.com/hashtag/2025%E5%B9%B4%E3%81%AE%E3%81%B5%E3%82%8A%E3%81%8B%E3%81%88%E3%82%8A?src=hash&amp;ref_src=twsrc%5Etfw">#2025年のふりかえり</a><a href="https://t.co/TdJrOpfvvp">https://t.co/TdJrOpfvvp</a> <a href="https://t.co/QJ60UyjiXf">pic.twitter.com/QJ60UyjiXf</a>
</p>
— uma-chan🌲 (<span class="citation" data-cites="i9wa4_">@i9wa4_</span>) <a href="https://twitter.com/i9wa4_/status/2006361171377684797?ref_src=twsrc%5Etfw">December 31, 2025</a>
</blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</section>
<section id="月別の主な出来事" class="level2">
<h2 class="anchored" data-anchor-id="月別の主な出来事">5. 月別の主な出来事</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">月</th>
<th style="text-align: left;">主な出来事</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1月</td>
<td style="text-align: left;">Zenn記事執筆、コミュニティイベント参加開始</td>
</tr>
<tr class="even">
<td style="text-align: left;">2月</td>
<td style="text-align: left;">SQL Tips記事、Vimプラグインアイデア</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3月</td>
<td style="text-align: left;">Terraformモノリポ作成、インフラコード試行錯誤開始</td>
</tr>
<tr class="even">
<td style="text-align: left;">4月</td>
<td style="text-align: left;">AIコーディングエージェント試用開始 (Aider, Devin)、MCP入門</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5月</td>
<td style="text-align: left;">uvに完全移行、Terraform + MCP Lambda実装に集中</td>
</tr>
<tr class="even">
<td style="text-align: left;">6月</td>
<td style="text-align: left;">Vim本体へ初コントリビューション、PIVOT業務委託開始</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7月</td>
<td style="text-align: left;">Claude Code本格導入、ターミナル最適化記事</td>
</tr>
<tr class="even">
<td style="text-align: left;">8月</td>
<td style="text-align: left;">Devcontainer x Databricks Connect 記事</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9月</td>
<td style="text-align: left;">Codex CLI導入、BigQuery dbt incremental記事</td>
</tr>
<tr class="even">
<td style="text-align: left;">10月</td>
<td style="text-align: left;">dotfiles月間コミット数263で過去最高 (yabai)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">11月</td>
<td style="text-align: left;">試されDATA SAPPORO登壇、Vimプラグイン開発加速</td>
</tr>
<tr class="even">
<td style="text-align: left;">12月</td>
<td style="text-align: left;">2回の登壇、jupyter-databricks-kernel公開、総括</td>
</tr>
</tbody>
</table>
</section>
<section id="振り返り" class="level2">
<h2 class="anchored" data-anchor-id="振り返り">6. 振り返り</h2>
<section id="うまくいったこと" class="level3">
<h3 class="anchored" data-anchor-id="うまくいったこと">6.1. うまくいったこと</h3>
<p>AIコーディングエージェントの台頭にうまく乗っていけました。今年の踏ん張りが絶対に来年以降に活きると思います。</p>
<p>アウトプットの習慣も定着しました。記事執筆と登壇が増えましたね！</p>
</section>
<section id="課題として残ったこと" class="level3">
<h3 class="anchored" data-anchor-id="課題として残ったこと">6.2. 課題として残ったこと</h3>
<p>Terraformモノレポを個人用に作ってみたものの使う機会が少なかったです。使わないのにメンテナンスコストがかかり続けるというデメリットを感じました。</p>
</section>
<section id="年に向けて" class="level3">
<h3 class="anchored" data-anchor-id="年に向けて">6.3. 2026年に向けて</h3>
<p><strong>AIが動きやすくなるための環境整備を続けていきます！</strong> これは自分の趣味嗜好とも合うし、ついでに世の中の役にも立てるのでWin-Winです。</p>
<p>あとはターミナル、tmux、Vim、CI/CD、IaCへのこだわりが強いのでこの辺りで何か成果を出したい気持ちでいます。 純粋100%データエンジニアだとこの辺りを楽しむ余地が少ないので、MLOpsも引き続き楽しみたいですねぇ。</p>
<p>外部発信も頑張っていきたいです。</p>
</section>
</section>
<section id="おわりに" class="level2">
<h2 class="anchored" data-anchor-id="おわりに">7. おわりに</h2>
<p>2025年はAI駆動開発に本格参戦し、ツールを使う側からツールを作る側にもなれた1年でした。</p>
<p>これはAIの波に乗って、今まではやれなかったようなことを実現できたからこそだと思います。</p>
<p>あと月並みな話ですが、たくさんの出会いがあって人生変わったなと実感してます (会ってくださった皆様ありがとうございました！また飲みましょう！)。</p>
<p>2024年始まった頃なんて自分は本当にしょぼい何もできないエンジニアだったなと思います。今は自信をもって話せる分野ができたり、居場所が確保できていたりと年齢は重ねてますがまだまだ伸びしろを感じられていて嬉しいです。</p>
<p>所属先それぞれでバリューを発揮できるように頑張りますので、引き続きよろしくお願いいたします。</p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-12-31-year-in-review.html&amp;text=2025%E5%B9%B4%E3%81%AE%E7%B7%8F%E6%8B%AC%EF%BC%9AAI%E9%A7%86%E5%8B%95%E4%BA%BA%E7%94%9F%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=2025%E5%B9%B4%E3%81%AE%E7%B7%8F%E6%8B%AC%EF%BC%9AAI%E9%A7%86%E5%8B%95%E4%BA%BA%E7%94%9F%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-12-31-year-in-review.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-12-31-year-in-review.html&amp;title=2025%E5%B9%B4%E3%81%AE%E7%B7%8F%E6%8B%AC%EF%BC%9AAI%E9%A7%86%E5%8B%95%E4%BA%BA%E7%94%9F%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>diary</category>
  <guid>https://i9wa4.github.io/blog/2025-12-31-year-in-review.html</guid>
  <pubDate>Wed, 31 Dec 2025 14:20:09 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>mise + uv で JupyterLab 環境をセットアップする</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-12-28-setup-jupyterlab-with-mise-uv.html</link>
  <description><![CDATA[ 





<section id="はじめに" class="level2">
<h2 class="anchored" data-anchor-id="はじめに">1. はじめに</h2>
<p>最近 mise と uv が好きで、色んな切り口でこの話をしたいです。</p>
<p>なので JupyterLab 環境セットアップ手順も書きます。</p>
</section>
<section id="環境構築手順" class="level2">
<h2 class="anchored" data-anchor-id="環境構築手順">2. 環境構築手順</h2>
<section id="事前準備" class="level3">
<h3 class="anchored" data-anchor-id="事前準備">2.1. 事前準備</h3>
<p>mise をインストールしておきます。</p>
<p><a href="https://mise.jdx.dev/getting-started.html" class="uri">https://mise.jdx.dev/getting-started.html</a></p>
</section>
<section id="プロジェクト作成" class="level3">
<h3 class="anchored" data-anchor-id="プロジェクト作成">2.2. プロジェクト作成</h3>
<p>まずディレクトリもしくは Git リポジトリを作成します。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> jupyterlab-project</span></code></pre></div></div>
</section>
<section id="mise-セットアップ" class="level3">
<h3 class="anchored" data-anchor-id="mise-セットアップ">2.3. mise セットアップ</h3>
<p>mise.toml ファイルを作成します。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> jupyterlab-project</span></code></pre></div></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">touch</span> mise.toml</span></code></pre></div></div>
<p>mise.toml を作成するとエラーが出るので <code>mise trust</code> しておきます。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mise</span> trust</span></code></pre></div></div>
<p>mise.toml の内容は以下にしておきます。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>mise.toml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" data-filename="mise.toml" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb5-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[tools]</span></span>
<span id="cb5-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">uv</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"latest"</span></span>
<span id="cb5-3"></span>
<span id="cb5-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[tasks.jupyter]</span></span>
<span id="cb5-5"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">description</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Start JupyterLab"</span></span>
<span id="cb5-6"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">run</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mise exec -- uv run jupyter-lab"</span></span></code></pre></div></div>
</div>
<p>mise.toml に記述したツールをインストールします。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mise</span> install</span></code></pre></div></div>
</section>
<section id="uv-セットアップ" class="level3">
<h3 class="anchored" data-anchor-id="uv-セットアップ">2.4. uv セットアップ</h3>
<p>以下のように uv プロジェクトを初期化します。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">uv</span> init</span></code></pre></div></div>
</section>
<section id="jupyterlab-追加" class="level3">
<h3 class="anchored" data-anchor-id="jupyterlab-追加">2.5. JupyterLab 追加</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">uv</span> add jupyterlab</span></code></pre></div></div>
</section>
<section id="jupyterlab-起動" class="level3">
<h3 class="anchored" data-anchor-id="jupyterlab-起動">2.6. JupyterLab 起動</h3>
<p>以下のコマンドで JupyterLab を起動します。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">mise</span> run jupyter</span></code></pre></div></div>
<p>ブラウザが自動的に開いて JupyterLab が起動しているはず！</p>
</section>
<section id="ライブラリを追加したい場合" class="level3">
<h3 class="anchored" data-anchor-id="ライブラリを追加したい場合">2.7. ライブラリを追加したい場合</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">uv</span> add numpy pandas matplotlib</span></code></pre></div></div>
</section>
</section>
<section id="おまけ" class="level2">
<h2 class="anchored" data-anchor-id="おまけ">3. おまけ</h2>
<p>既存のプロジェクトを uv 移行することが多くて実際はあまり <code>uv init</code> を使ってませんでした。</p>
<p>そこで <code>src/</code> ディレクトリを伴う初期化ってどうするんだろうとふと思って調べたら以下の記事が参考になりました。</p>
<p><a href="https://qiita.com/0xmks/items/f5a4fcac81714ac2f803">Python プロジェクト管理したくて uv に触れてみたメモ #初心者 - Qiita</a></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">uv</span> init <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--lib</span></span></code></pre></div></div>
<p>これでいけますね！次からちゃんと活用していきます。</p>
</section>
<section id="おわりに" class="level2">
<h2 class="anchored" data-anchor-id="おわりに">4. おわりに</h2>
<p>mise も uv も便利！</p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-12-28-setup-jupyterlab-with-mise-uv.html&amp;text=mise%20%2B%20uv%20%E3%81%A7%20JupyterLab%20%E7%92%B0%E5%A2%83%E3%82%92%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97%E3%81%99%E3%82%8B%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=mise%20%2B%20uv%20%E3%81%A7%20JupyterLab%20%E7%92%B0%E5%A2%83%E3%82%92%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97%E3%81%99%E3%82%8B%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-12-28-setup-jupyterlab-with-mise-uv.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-12-28-setup-jupyterlab-with-mise-uv.html&amp;title=mise%20%2B%20uv%20%E3%81%A7%20JupyterLab%20%E7%92%B0%E5%A2%83%E3%82%92%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97%E3%81%99%E3%82%8B%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>tech-others</category>
  <guid>https://i9wa4.github.io/blog/2025-12-28-setup-jupyterlab-with-mise-uv.html</guid>
  <pubDate>Sun, 28 Dec 2025 03:51:20 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>2025年のアウトプットまとめ LAPRAS</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-12-15-activity.html</link>
  <description><![CDATA[ 





<p>2025年のアウトプットと参加イベントをふりかえると</p>
<p>アウトプットしたものや参加したイベントなどをまとめてみました。</p>
<section id="pr作成" class="level2">
<h2 class="anchored" data-anchor-id="pr作成">1. PR作成</h2>
<ul>
<li>2025/12/15
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/12/15
<ul>
<li><a href="https://github.com/i9wa4/i9wa4/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4</a></li>
</ul></li>
<li>2025/12/14
<ul>
<li><a href="https://github.com/i9wa4/zenn/pulls?q=is:pr+author:i9wa4">i9wa4/zenn</a></li>
</ul></li>
<li>2025/12/13
<ul>
<li><a href="https://github.com/i9wa4/zenn/pulls?q=is:pr+author:i9wa4">i9wa4/zenn</a></li>
</ul></li>
<li>2025/12/13
<ul>
<li><a href="https://github.com/i9wa4/jupyter-databricks-kernel/pulls?q=is:pr+author:i9wa4">i9wa4/jupyter-databricks-kernel</a></li>
</ul></li>
<li>2025/12/13
<ul>
<li><a href="https://github.com/i9wa4/databricks-marimo-executor/pulls?q=is:pr+author:i9wa4">i9wa4/databricks-marimo-executor</a></li>
</ul></li>
<li>2025/12/11
<ul>
<li><a href="https://github.com/i9wa4/zenn/pulls?q=is:pr+author:i9wa4">i9wa4/zenn</a></li>
</ul></li>
<li>2025/12/11
<ul>
<li><a href="https://github.com/i9wa4/jupyter-databricks-kernel/pulls?q=is:pr+author:i9wa4">i9wa4/jupyter-databricks-kernel</a></li>
</ul></li>
<li>2025/12/10
<ul>
<li><a href="https://github.com/i9wa4/zenn/pulls?q=is:pr+author:i9wa4">i9wa4/zenn</a></li>
</ul></li>
<li>2025/12/10
<ul>
<li><a href="https://github.com/i9wa4/jupyter-databricks-kernel/pulls?q=is:pr+author:i9wa4">i9wa4/jupyter-databricks-kernel</a></li>
</ul></li>
<li>2025/12/09
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/12/08
<ul>
<li><a href="https://github.com/i9wa4/jupyter-databricks-kernel/pulls?q=is:pr+author:i9wa4">i9wa4/jupyter-databricks-kernel</a></li>
</ul></li>
<li>2025/12/07
<ul>
<li><a href="https://github.com/i9wa4/zenn/pulls?q=is:pr+author:i9wa4">i9wa4/zenn</a></li>
</ul></li>
<li>2025/12/05
<ul>
<li><a href="https://github.com/i9wa4/zenn/pulls?q=is:pr+author:i9wa4">i9wa4/zenn</a></li>
</ul></li>
<li>2025/12/05
<ul>
<li><a href="https://github.com/i9wa4/jupyter-databricks-kernel/pulls?q=is:pr+author:i9wa4">i9wa4/jupyter-databricks-kernel</a></li>
</ul></li>
<li>2025/12/04
<ul>
<li><a href="https://github.com/i9wa4/jupyter-databricks-kernel/pulls?q=is:pr+author:i9wa4">i9wa4/jupyter-databricks-kernel</a></li>
</ul></li>
<li>2025/12/01
<ul>
<li><a href="https://github.com/i9wa4/jupyter-databricks-kernel/pulls?q=is:pr+author:i9wa4">i9wa4/jupyter-databricks-kernel</a></li>
</ul></li>
<li>2025/11/30
<ul>
<li><a href="https://github.com/i9wa4/jupyter-databricks-kernel/pulls?q=is:pr+author:i9wa4">i9wa4/jupyter-databricks-kernel</a></li>
</ul></li>
<li>2025/11/28
<ul>
<li><a href="https://github.com/i9wa4/zenn/pulls?q=is:pr+author:i9wa4">i9wa4/zenn</a></li>
</ul></li>
<li>2025/11/28
<ul>
<li><a href="https://github.com/i9wa4/i9wa4/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4</a></li>
</ul></li>
<li>2025/11/27
<ul>
<li><a href="https://github.com/i9wa4/i9wa4/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4</a></li>
</ul></li>
<li>2025/11/18
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/11/18
<ul>
<li><a href="https://github.com/i9wa4/ddc-source-slash-commands/pulls?q=is:pr+author:i9wa4">i9wa4/ddc-source-slash-commands</a></li>
</ul></li>
<li>2025/11/05
<ul>
<li><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli/pulls?q=is:pr+author:i9wa4">i9wa4/vim-tmux-send-to-ai-cli</a></li>
</ul></li>
<li>2025/10/29
<ul>
<li><a href="https://github.com/i9wa4/zenn/pulls?q=is:pr+author:i9wa4">i9wa4/zenn</a></li>
</ul></li>
<li>2025/09/28
<ul>
<li><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli/pulls?q=is:pr+author:i9wa4">i9wa4/vim-tmux-send-to-ai-cli</a></li>
</ul></li>
<li>2025/09/28
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/09/27
<ul>
<li><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli/pulls?q=is:pr+author:i9wa4">i9wa4/vim-tmux-send-to-ai-cli</a></li>
</ul></li>
<li>2025/09/14
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/09/13
<ul>
<li><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli/pulls?q=is:pr+author:i9wa4">i9wa4/vim-tmux-send-to-ai-cli</a></li>
</ul></li>
<li>2025/09/07
<ul>
<li><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli/pulls?q=is:pr+author:i9wa4">i9wa4/vim-tmux-send-to-ai-cli</a></li>
</ul></li>
<li>2025/09/07
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/08/06
<ul>
<li><a href="https://github.com/i9wa4/zenn/pulls?q=is:pr+author:i9wa4">i9wa4/zenn</a></li>
</ul></li>
<li>2025/07/28
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/07/16
<ul>
<li><a href="https://github.com/i9wa4/zenn/pulls?q=is:pr+author:i9wa4">i9wa4/zenn</a></li>
</ul></li>
<li>2025/07/14
<ul>
<li><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli/pulls?q=is:pr+author:i9wa4">i9wa4/vim-tmux-send-to-ai-cli</a></li>
</ul></li>
<li>2025/07/14
<ul>
<li><a href="https://github.com/i9wa4/vim-markdown-number-header/pulls?q=is:pr+author:i9wa4">i9wa4/vim-markdown-number-header</a></li>
</ul></li>
<li>2025/07/14
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/07/14
<ul>
<li><a href="https://github.com/i9wa4/dotfiles/pulls?q=is:pr+author:i9wa4">i9wa4/dotfiles</a></li>
</ul></li>
<li>2025/07/13
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/06/26
<ul>
<li><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli/pulls?q=is:pr+author:i9wa4">i9wa4/vim-tmux-send-to-ai-cli</a></li>
</ul></li>
<li>2025/06/25
<ul>
<li><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli/pulls?q=is:pr+author:i9wa4">i9wa4/vim-tmux-send-to-ai-cli</a></li>
</ul></li>
<li>2025/06/19
<ul>
<li><a href="https://github.com/i9wa4/mcp-databricks-server/pulls?q=is:pr+author:i9wa4">i9wa4/mcp-databricks-server</a></li>
</ul></li>
<li>2025/05/19
<ul>
<li><a href="https://github.com/i9wa4/terraform-mono-repo/pulls?q=is:pr+author:i9wa4">i9wa4/terraform-mono-repo</a></li>
</ul></li>
<li>2025/05/18
<ul>
<li><a href="https://github.com/i9wa4/terraform-mono-repo/pulls?q=is:pr+author:i9wa4">i9wa4/terraform-mono-repo</a></li>
</ul></li>
<li>2025/05/10
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/05/06
<ul>
<li><a href="https://github.com/i9wa4/zenn/pulls?q=is:pr+author:i9wa4">i9wa4/zenn</a></li>
</ul></li>
<li>2025/05/06
<ul>
<li><a href="https://github.com/i9wa4/vim-markdown-number-header/pulls?q=is:pr+author:i9wa4">i9wa4/vim-markdown-number-header</a></li>
</ul></li>
<li>2025/05/04
<ul>
<li><a href="https://github.com/i9wa4/zenn/pulls?q=is:pr+author:i9wa4">i9wa4/zenn</a></li>
</ul></li>
<li>2025/04/29
<ul>
<li><a href="https://github.com/i9wa4/zenn/pulls?q=is:pr+author:i9wa4">i9wa4/zenn</a></li>
</ul></li>
<li>2025/04/29
<ul>
<li><a href="https://github.com/i9wa4/mcp-databricks-server/pulls?q=is:pr+author:i9wa4">i9wa4/mcp-databricks-server</a></li>
</ul></li>
<li>2025/04/16
<ul>
<li><a href="https://github.com/i9wa4/zenn/pulls?q=is:pr+author:i9wa4">i9wa4/zenn</a></li>
</ul></li>
<li>2025/04/08
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/04/05
<ul>
<li><a href="https://github.com/i9wa4/zenn/pulls?q=is:pr+author:i9wa4">i9wa4/zenn</a></li>
</ul></li>
<li>2025/04/02
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/04/01
<ul>
<li><a href="https://github.com/i9wa4/vim-dbt-jump2def/pulls?q=is:pr+author:i9wa4">i9wa4/vim-dbt-jump2def</a></li>
</ul></li>
<li>2025/03/31
<ul>
<li><a href="https://github.com/i9wa4/vim-dbt-jump2def/pulls?q=is:pr+author:i9wa4">i9wa4/vim-dbt-jump2def</a></li>
</ul></li>
<li>2025/03/28
<ul>
<li><a href="https://github.com/i9wa4/zenn/pulls?q=is:pr+author:i9wa4">i9wa4/zenn</a></li>
</ul></li>
<li>2025/03/15
<ul>
<li><a href="https://github.com/i9wa4/vim-markdown-number-header/pulls?q=is:pr+author:i9wa4">i9wa4/vim-markdown-number-header</a></li>
</ul></li>
<li>2025/03/15
<ul>
<li><a href="https://github.com/i9wa4/vim-dbt-jump2def/pulls?q=is:pr+author:i9wa4">i9wa4/vim-dbt-jump2def</a></li>
</ul></li>
<li>2025/01/25
<ul>
<li><a href="https://github.com/i9wa4/zeno.zsh/pulls?q=is:pr+author:i9wa4">i9wa4/zeno.zsh</a></li>
</ul></li>
<li>2025/01/23
<ul>
<li><a href="https://github.com/genda-tech/genda-creators-blog/pulls?q=is:pr+author:i9wa4">genda-tech/genda-creators-blog</a></li>
</ul></li>
</ul>
</section>
<section id="zenn" class="level2">
<h2 class="anchored" data-anchor-id="zenn">2. Zenn</h2>
<ul>
<li>2025/12/14
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-12-14-databricks-multi-workspace-permissions">Databricks 公式ドキュメントを読んで権限設計を理解する</a></li>
</ul></li>
<li>2025/12/13
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-12-13-jupyter-databricks-kernel-oss-dev">jupyter-databricks-kernel を作りました ― OSS 開発の振り返り</a></li>
</ul></li>
<li>2025/12/12
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-12-12-drawio-tips-claude-code">Claude Code に draw.io の図を描かせるコツ</a></li>
</ul></li>
<li>2025/12/11
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-12-11-use-uv-in-databricks">Databricks で uv を活用して依存関係を管理する</a></li>
</ul></li>
<li>2025/12/10
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-12-10-organize-databricks-notebook-management">Databricksのノートブック管理方法2選</a></li>
</ul></li>
<li>2025/12/07
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-12-07-manage-git-worktree-with-ghq">Git Worktree &amp; ghq 入門 ― Issue/PR 毎の環境を一発生成する便利スクリプトもあるよ！</a></li>
</ul></li>
<li>2025/12/06
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-12-06-ai-guardrails-local-cloud">mise + pre-commit + Renovate で作るメンテしやすいガードレール</a></li>
</ul></li>
<li>2025/12/04
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-12-04-magi-system-ai-review">Vim x tmux によるレビュー用 MAGI システム (AI多数決レビューシステム)</a></li>
</ul></li>
<li>2025/12/01
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-12-01-shell-script-claude-code">シェルスクリプト × Claude Code: 日常スクリプトへの導入実践</a></li>
</ul></li>
<li>2025/10/31
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/pivot-incremental-friendly-dbt-model">データ分析を促進する dbt incremental モデル設計 ― 全期間追跡の低コスト化</a></li>
</ul></li>
<li>2025/08/06
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-08-06-databricks-connect-practice">Databricks Connect 実践編 ― ローカルから Databricks コンピュートを利用</a></li>
</ul></li>
<li>2025/08/06
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-08-06-python-env-optimization">Python 開発環境最適化編 ― uv + pre-commit + GitHub Actions</a></li>
</ul></li>
<li>2025/08/06
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-08-06-devcontainer-claude-code">Claude Code 対応 Dev Container 環境構築編 ― VS Code でもそれ以外でも</a></li>
</ul></li>
<li>2025/07/16
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-07-16-optimize-your-terminal-for-claude-code">個人的ターミナル最適化 for Claude Code</a></li>
</ul></li>
<li>2025/05/06
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-05-06-quarto-slides">Markdown ライクな Quarto でスライドを作成して GitHub Actions で HTML 出力する</a></li>
</ul></li>
<li>2025/05/04
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-05-04-tmux-zsh-git-status">tmux と Zsh に Git リポジトリのステータスを表示する</a></li>
</ul></li>
<li>2025/04/29
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-04-29-mcp-databricks-server-service-principal">Databricks MCP Server を Service Principal 認証対応させた</a></li>
</ul></li>
<li>2025/04/16
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-04-16-issue-with-python-libraries">Python でありがちな本体バージョンとライブラリバージョンの不整合の例</a></li>
</ul></li>
<li>2025/04/05
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-04-05-weekly-report-prompt-for-devin">Devin 週報作成用プロンプト</a></li>
</ul></li>
<li>2025/04/05
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-04-05-weekly-report-by-devin">Devin に週報を書いてもらった</a></li>
</ul></li>
<li>2025/03/28
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-03-28-display-notion-relation-property">Notion データベースでリレーション元のプロパティを表示する (2025年3月28日時点)</a></li>
</ul></li>
</ul>
</section>
<section id="リポジトリ作成" class="level2">
<h2 class="anchored" data-anchor-id="リポジトリ作成">3. リポジトリ作成</h2>
<ul>
<li>2025/12/13
<ul>
<li><a href="https://github.com/i9wa4/databricks-marimo-executor">i9wa4/databricks-marimo-executor</a></li>
</ul></li>
<li>2025/10/23
<ul>
<li><a href="https://github.com/i9wa4/jupyter-databricks-kernel">i9wa4/jupyter-databricks-kernel</a></li>
</ul></li>
<li>2025/06/20
<ul>
<li><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli">i9wa4/vim-tmux-send-to-ai-cli</a></li>
</ul></li>
</ul>
</section>
<section id="blog等" class="level2">
<h2 class="anchored" data-anchor-id="blog等">4. Blog等</h2>
<ul>
<li>2025/12/07
<ul>
<li><a href="https://i9wa4.github.io/blog/zenn-autogen-2025-12-07-manage-git-worktree-with-ghq.html">Git Worktree &amp; ghq 入門 ― Issue/PR 毎の環境を一発生成する便利スクリプトもあるよ！</a></li>
</ul></li>
<li>2025/12/06
<ul>
<li><a href="https://i9wa4.github.io/blog/zenn-autogen-2025-12-06-ai-guardrails-local-cloud.html">mise + pre-commit + Renovate で作るメンテしやすいガードレール</a></li>
</ul></li>
<li>2025/12/04
<ul>
<li><a href="https://i9wa4.github.io/blog/zenn-autogen-2025-12-04-magi-system-ai-review.html">Vim x tmux によるレビュー用 MAGI システム (AI多数決レビューシステム)</a></li>
</ul></li>
<li>2025/12/01
<ul>
<li><a href="https://i9wa4.github.io/blog/zenn-autogen-2025-12-01-shell-script-claude-code.html">シェルスクリプト × Claude Code: 日常スクリプトへの導入実践</a></li>
</ul></li>
<li>2025/11/23
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-11-23-github-activity-2025-review.html">2025年のGitHub活動を振り返る：AI駆動開発の年</a></li>
</ul></li>
<li>2025/11/19
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-11-19-vim-tmux-orchestrating-ai-coding-agents.html">Vim と tmux で複数の AI エージェントを操作する</a></li>
</ul></li>
<li>2025/10/31
<ul>
<li><a href="https://i9wa4.github.io/blog/zenn-autogen-pivot-incremental-friendly-dbt-model.html">データ分析を促進する dbt incremental モデル設計 ― 全期間追跡の低コスト化</a></li>
</ul></li>
<li>2025/09/28
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-09-28-bigquery-dbt-incremental-intro.html">BigQuery で dbt incremental モデルのパフォーマンス改善をしてみた</a></li>
</ul></li>
<li>2025/09/14
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-09-14-codex-cli-config-management.html">Codex CLI の設定ファイルを dotfiles で管理する</a></li>
</ul></li>
<li>2025/09/02
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-09-02-activity.html">2025年のアウトプットまとめ with LAPRAS</a></li>
</ul></li>
<li>2025/08/23
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-08-23-diary.html">2025-08-23 日誌</a></li>
</ul></li>
<li>2025/08/08
<ul>
<li><a href="https://i9wa4.github.io/slides/2025-08-08-midas-ai.html"></a></li>
</ul></li>
<li>2025/07/28
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-07-28-article3-databricks-connect.html">Databricks Connect 実践編 - ローカルから Databricks コンピュートを利用</a></li>
</ul></li>
<li>2025/07/28
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-07-28-article3-databricks-connect.html">Databricks Connect 実践編 ― ローカルから Databricks コンピュートを利用</a></li>
</ul></li>
<li>2025/07/28
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-07-28-article2-python-env.html">Python 開発環境最適化編 - uv + pre-commit + GitHub Actions</a></li>
</ul></li>
<li>2025/07/28
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-07-28-article2-python-env.html">Python 開発環境最適化編 ― uv + pre-commit + GitHub Actions</a></li>
</ul></li>
<li>2025/07/28
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-07-28-article1-devcontainer.html">Claude Code 対応 Dev Container 環境構築編 ― VS Code でもそれ以外でも</a></li>
</ul></li>
<li>2025/07/28
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-07-28-article1-devcontainer.html">Claude Code 対応 Dev Container 環境構築編 - VS Code でもそれ以外でも</a></li>
</ul></li>
<li>2025/07/14
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-07-14-my-first-vim-contribution.html">Vimへの初コントリビューションの経緯と学び</a></li>
</ul></li>
<li>2025/06/20
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-06-20-vim-plugin-for-tmux-claude-code.html">tmux で Vim から Claude Code にテキストを送信するプラグインを作った</a></li>
</ul></li>
<li>2025/06/15
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-06-15-dbt-bigquery-auth.html">ローカル dbt で BigQuery への認証を行う</a></li>
</ul></li>
<li>2025/06/10
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-06-10-install-global-python-with-uv.html">uv で Python のグローバルインストールを行う</a></li>
</ul></li>
<li>2025/06/08
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-06-08-create-uv-venv-with-poetry-pyproject-toml.html">Poetry の pyproject.toml を使って uv で .venv を作成する</a></li>
</ul></li>
<li>2025/06/04
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-06-04-use-cmdbang-to-disable-lsp-formatting-on-save.html">Vim/Neovim の保存時の LSP フォーマットを :w! のときに無効化する方法</a></li>
</ul></li>
<li>2025/05/21
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-05-21-databricks-dashboard-github-operation.html">Databricks AI/BI ダッシュボードの Git 連携の運用方法</a></li>
</ul></li>
<li>2025/05/12
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-05-12-hands-on-lambda-ecr.html">AWS Lambda でコンテナイメージを実行する with Terraform &amp; GitHub Actions</a></li>
</ul></li>
<li>2025/05/10
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-05-10-bash-zsh-edit-and-execute-command.html">Bash/Zsh でコマンドをエディタで編集する</a></li>
</ul></li>
<li>2025/05/06
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-05-06-editorconfig-vim.html">今更ながら Vim に EditorConfig を導入しました</a></li>
</ul></li>
<li>2025/05/06
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-05-06-python-venv.html">Python venv インストール・更新スクリプトの供養</a></li>
</ul></li>
<li>2025/04/20
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-04-20-lefthook.html">lefthook 設定の供養</a></li>
</ul></li>
<li>2025/04/11
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-04-11-mcp-hands-on.html">MCP に入門した</a></li>
</ul></li>
<li>2025/04/10
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-04-10-paid-for-gemini-api.html">Gemini API に課金した</a></li>
</ul></li>
<li>2025/04/10
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-04-10-paid-for-gemini.html">Gemini に課金した</a></li>
</ul></li>
<li>2025/04/07
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-04-07-bookmarks.html">個人的ブックマーク</a></li>
</ul></li>
<li>2025/04/02
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-04-02-looking-back-on-2024.html">2024年度を振り返る</a></li>
</ul></li>
<li>2025/04/01
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-04-01-try-aider.html">Aider を使ってみる</a></li>
</ul></li>
<li>2025/02/21
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-02-21-plain-sql.html">見やすい SQL を書くための Tips</a></li>
</ul></li>
<li>2025/02/20
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-02-20-vim-plugin-idea.html">最近の Vim プラグイン開発のアイデア</a></li>
</ul></li>
<li>2025/01/31
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-01-31-get-instagram-api-access-token.html">Instagram API のアクセストークンを取得する</a></li>
</ul></li>
</ul>
</section>
<section id="connpass" class="level2">
<h2 class="anchored" data-anchor-id="connpass">5. connpass</h2>
<ul>
<li>2025/11/20
<ul>
<li><a href="https://kenro.connpass.com/event/371009/">堅牢.py #1</a></li>
</ul></li>
<li>2025/11/18
<ul>
<li><a href="https://jedai.connpass.com/event/374212/">Databricks無料版で始めるMLflowもくもく会</a></li>
</ul></li>
<li>2025/11/18
<ul>
<li><a href="https://code-based-presentation.connpass.com/event/374363/">【オンライン開催】Code-Driven データ分析ナイト #2 セマンティックレイヤー</a></li>
</ul></li>
<li>2025/11/11
<ul>
<li><a href="https://supporterz-seminar.connpass.com/event/373029/">【勉強会】絶対に設定しておきたいshell環境</a></li>
</ul></li>
<li>2025/11/07
<ul>
<li><a href="https://tamesaredatahokkaido.connpass.com/event/369741/">試されDATA SAPPORO #1</a></li>
</ul></li>
<li>2025/10/31
<ul>
<li><a href="https://findy.connpass.com/event/372055/">開発環境自慢Night 〜CLI型AIエージェント×ターミナル編〜</a></li>
</ul></li>
<li>2025/10/28
<ul>
<li><a href="https://jawsug-bigdata.connpass.com/event/371174/">BigData-JAWS 勉強会 #30 Apache Iceberg勉強会</a></li>
</ul></li>
<li>2025/10/20
<ul>
<li><a href="https://jedai.connpass.com/event/369530/">JEDAI Meetup! AI Readyへの道のり</a></li>
</ul></li>
<li>2025/10/17
<ul>
<li><a href="https://aiau.connpass.com/event/369265/">Claude Code Meetup Tokyo</a></li>
</ul></li>
<li>2025/10/16
<ul>
<li><a href="https://scalar.connpass.com/event/369067/">Database Engineering Meetup #8: Analytics（データ分析）</a></li>
</ul></li>
<li>2025/09/30
<ul>
<li><a href="https://forkwell.connpass.com/event/363198/">Data Engineering Study #31 公開企画会議 アドバイザーと語る気になる技術</a></li>
</ul></li>
<li>2025/09/29
<ul>
<li><a href="https://finatext.connpass.com/event/365995/">DataOps Night #8 ～スケーラブルでAI-Readyなデータ基盤の最前線～</a></li>
</ul></li>
<li>2025/09/24
<ul>
<li><a href="https://datatech-jp.connpass.com/event/360596/">みんなの考えた最強のデータ基盤アーキテクチャ第５回〜オールスター大集合スペシャル！！【現地定員増枠】</a></li>
</ul></li>
<li>2025/09/22
<ul>
<li><a href="https://iceberg.connpass.com/event/364492/">Apache Iceberg Meetup Japan #3</a></li>
</ul></li>
<li>2025/09/18
<ul>
<li><a href="https://levtechlab.connpass.com/event/364919/">AIコードレビューをチームで使いこなす ― 仕組みづくりから運用までの試行錯誤 ―</a></li>
</ul></li>
<li>2025/08/26
<ul>
<li><a href="https://forkwell.connpass.com/event/364485/">生成AI時代だからこそ学ぶコミュニケーションとマネジメント</a></li>
</ul></li>
<li>2025/07/29
<ul>
<li><a href="https://datayokocho.connpass.com/event/358114/">エンタメ業界のデータエンジニアリング最前線＃2 ～SEGA、DeNA</a></li>
</ul></li>
<li>2025/07/28
<ul>
<li><a href="https://findy.connpass.com/event/359455/">t-wadaさんに聞く！SQLアンチパターン第2版 - 全27章まとめて紹介！</a></li>
</ul></li>
<li>2025/07/18
<ul>
<li><a href="https://forkwell.connpass.com/event/357942/">祝30回！過去登壇者と振り返るデータエンジニアの技術とキャリアのこれまでとこれから</a></li>
</ul></li>
<li>2025/07/17
<ul>
<li><a href="https://findy.connpass.com/event/359987/">Claude Code Meetup</a></li>
</ul></li>
<li>2025/07/13
<ul>
<li><a href="https://supporterz-seminar.connpass.com/event/355775/">【！現地参加枠あり！】CoLab Conf（コラコン）【U35限定テックカンファレンス】</a></li>
</ul></li>
<li>2025/07/08
<ul>
<li><a href="https://aid.connpass.com/event/360017/">Claude Code Meetup Japan #1（Claude Code祭り！）</a></li>
</ul></li>
<li>2025/07/04
<ul>
<li><a href="https://pixiv.connpass.com/event/358285/">Data Modeling Night -「今」だからできる理論の実践事例 -</a></li>
</ul></li>
<li>2025/06/30
<ul>
<li><a href="https://cartaholdings.connpass.com/event/360380/">Claude Code Deep Dive</a></li>
</ul></li>
<li>2025/06/25
<ul>
<li><a href="https://scalar.connpass.com/event/356595/">Database Engineering Meetup #7: データエンジニアリング</a></li>
</ul></li>
<li>2025/06/24
<ul>
<li><a href="https://datayokocho.connpass.com/event/353850/">エンタメ業界のデータエンジニアリング最前線＃１　～GENDA、バンダイナムコセブンズ</a></li>
</ul></li>
<li>2025/06/20
<ul>
<li><a href="https://flexy.connpass.com/event/357244/">【SREキャリア最前線】AIと共に進化する！SREの新たな役割とキャリア設計</a></li>
</ul></li>
<li>2025/06/17
<ul>
<li><a href="https://findy.connpass.com/event/357707/">MCP導入における脅威モデリングのすゝめ</a></li>
</ul></li>
<li>2025/06/12
<ul>
<li><a href="https://classmethod.connpass.com/event/356615/">エンジニアのためのMCP勉強会 #2</a></li>
</ul></li>
<li>2025/06/06
<ul>
<li><a href="https://aiau.connpass.com/event/353531/">Cursor Meetup Tokyo</a></li>
</ul></li>
<li>2025/06/03
<ul>
<li><a href="https://forkwell.connpass.com/event/349495/">ITエンジニアの転職学 – “20代で年収800万円最速RTA”と“その罠”</a></li>
</ul></li>
<li>2025/06/02
<ul>
<li><a href="https://mlops.connpass.com/event/352150/">MCP Ops LT大会！！！</a></li>
</ul></li>
<li>2025/05/28
<ul>
<li><a href="https://explaza.connpass.com/event/354178/">Cursorで創作小説を書こう！の会【女オタ生成AI部/株式会社エクスプラザ 共催】</a></li>
</ul></li>
<li>2025/05/27
<ul>
<li><a href="https://finatext.connpass.com/event/350823/">DataOps Night #7</a></li>
</ul></li>
<li>2025/05/16
<ul>
<li><a href="https://forkwell.connpass.com/event/354289/">転職したらMCPサーバーだった件</a></li>
</ul></li>
<li>2025/05/14
<ul>
<li><a href="https://findy.connpass.com/event/349580/">【技術選定を突き詰める】Online Conferenc​​e 2025</a></li>
</ul></li>
<li>2025/05/14
<ul>
<li><a href="https://jedai.connpass.com/event/349260/">JEDAI Meetup! Databricks Apps特集 (ハイブリッド開催)</a></li>
</ul></li>
<li>2025/05/13
<ul>
<li><a href="https://forkwell.connpass.com/event/350515/">Cursor導入でログラス社の現場はどう変わったか - Forkwell AI Study #1</a></li>
</ul></li>
<li>2025/05/12
<ul>
<li><a href="https://itgtechacademy.connpass.com/event/350401/">「データマネジメント」その先へ〜進化するデータと組織戦略～</a></li>
</ul></li>
<li>2025/04/25
<ul>
<li><a href="https://jedai.connpass.com/event/349457/">JEDAI in Osaka 2025 春 (オンサイト+オンライン)</a></li>
</ul></li>
<li>2025/04/25
<ul>
<li><a href="https://findy.connpass.com/event/351644/">MCPでLLMはどう進化する？ 〜からあげさんに学ぶ、AI開発の最前線〜</a></li>
</ul></li>
<li>2025/04/24
<ul>
<li><a href="https://forkwell.connpass.com/event/351066/">Data Engineering Study #29 今だから学びたいDatabricks徹底活用術</a></li>
</ul></li>
<li>2025/04/10
<ul>
<li><a href="https://supporterz-seminar.connpass.com/event/347922/">データエンジニアの未来【サポーターズCoLab】</a></li>
</ul></li>
<li>2025/03/25
<ul>
<li><a href="https://findy-tools.connpass.com/event/347398/">ABEMAの事例とともに学ぶ！セマンティックレイヤーで変わるデータエンジニアリングの世界</a></li>
</ul></li>
<li>2025/03/21
<ul>
<li><a href="https://forkwell.connpass.com/event/346470/">ITエンジニアの転職学 ー 40歳へのカウントダウンとの向き合い方</a></li>
</ul></li>
<li>2025/02/27
<ul>
<li><a href="https://forkwell.connpass.com/event/339761/">Data Engineering Study #28 データ基盤のCI/CD</a></li>
</ul></li>
<li>2025/02/04
<ul>
<li><a href="https://datayokocho.connpass.com/event/343004/">金融業界のデータマネジメント最前線 #6</a></li>
</ul></li>
<li>2025/01/30
<ul>
<li><a href="https://datatech-jp.connpass.com/event/335207/">みんなの考えた最強のデータアーキテクチャ〜2025もやってきましょうSP！</a></li>
</ul></li>
<li>2025/01/27
<ul>
<li><a href="https://redbrick.connpass.com/event/341139/">レイクハウスって結局何なのっていいました？じゃあ真のレイクハウスをみせてやりますよ！</a></li>
</ul></li>
<li>2025/01/24
<ul>
<li><a href="https://findy-tools.connpass.com/event/341178/">JR西日本・ファーストリテイリング・ZOZOが語るビジネス要件を踏まえたデータ基盤の構築</a></li>
</ul></li>
<li>2025/01/20
<ul>
<li><a href="https://datatech-jp.connpass.com/event/337374/">datatech-jp Casual Talks #6</a></li>
</ul></li>
</ul>
<p><a href="https://lapras.com/" title="LAPRASポートフォリオはこちらから">LAPRASポートフォリオはこちらから</a></p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-12-15-activity.html&amp;text=2025%E5%B9%B4%E3%81%AE%E3%82%A2%E3%82%A6%E3%83%88%E3%83%97%E3%83%83%E3%83%88%E3%81%BE%E3%81%A8%E3%82%81%20LAPRAS%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=2025%E5%B9%B4%E3%81%AE%E3%82%A2%E3%82%A6%E3%83%88%E3%83%97%E3%83%83%E3%83%88%E3%81%BE%E3%81%A8%E3%82%81%20LAPRAS%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-12-15-activity.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-12-15-activity.html&amp;title=2025%E5%B9%B4%E3%81%AE%E3%82%A2%E3%82%A6%E3%83%88%E3%83%97%E3%83%83%E3%83%88%E3%81%BE%E3%81%A8%E3%82%81%20LAPRAS%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>diary</category>
  <guid>https://i9wa4.github.io/blog/2025-12-15-activity.html</guid>
  <pubDate>Mon, 15 Dec 2025 14:14:44 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>uv + Quarto でブログやスライドを作成して GitHub Pages で公開する (HTML エクスポートにも対応)</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-12-15-uv-quarto-intro.html</link>
  <description><![CDATA[ 





<section id="はじめに" class="level2">
<h2 class="anchored" data-anchor-id="はじめに">1. はじめに</h2>
<p>Markdown ライクな記法でブログやスライドを作成できる Quarto の入門記事です。</p>
<p>この記事では以下のリポジトリをテンプレートとして使用します。</p>
<p><a href="https://github.com/i9wa4/quarto-intro" class="uri">https://github.com/i9wa4/quarto-intro</a></p>
<p>公開ページ: <a href="https://i9wa4.github.io/quarto-intro" class="uri">https://i9wa4.github.io/quarto-intro</a></p>
</section>
<section id="想定読者" class="level2">
<h2 class="anchored" data-anchor-id="想定読者">2. 想定読者</h2>
<ul>
<li>Git/GitHub 操作の説明がなくても問題ない方</li>
</ul>
</section>
<section id="quarto-とは" class="level2">
<h2 class="anchored" data-anchor-id="quarto-とは">3. Quarto とは</h2>
<p><a href="https://quarto.org/" class="uri">https://quarto.org/</a></p>
<blockquote class="blockquote">
<p>An open-source scientific and technical publishing system</p>
</blockquote>
<p>オープンソースの科学技術出版システムです。Pandoc をベースにしていて手軽でありつつも拡張性があり細かいところに手が届くという印象です。</p>
</section>
<section id="環境構築" class="level2">
<h2 class="anchored" data-anchor-id="環境構築">4. 環境構築</h2>
<p>uv を使って Quarto をインストールします。</p>
<section id="uv-のインストール" class="level3">
<h3 class="anchored" data-anchor-id="uv-のインストール">4.1. uv のインストール</h3>
<p>uv がまだインストールされていない場合は以下を参照してください。</p>
<p><a href="https://docs.astral.sh/uv/getting-started/installation/" class="uri">https://docs.astral.sh/uv/getting-started/installation/</a></p>
</section>
<section id="プロジェクトの作成" class="level3">
<h3 class="anchored" data-anchor-id="プロジェクトの作成">4.2. プロジェクトの作成</h3>
<p>GitHub で空のリポジトリを作成してからローカルに clone します。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># リポジトリを clone</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone git@github.com:your-username/your-repo.git</span>
<span id="cb1-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> your-repo</span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># uv で初期化</span></span>
<span id="cb1-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">uv</span> init</span>
<span id="cb1-7"></span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># quarto-cli をインストール</span></span>
<span id="cb1-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">uv</span> add quarto-cli</span></code></pre></div></div>
</section>
<section id="pyproject.toml" class="level3">
<h3 class="anchored" data-anchor-id="pyproject.toml">4.3. pyproject.toml</h3>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>pyproject.toml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" data-filename="pyproject.toml" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb2-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[project]</span></span>
<span id="cb2-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"your-repo"</span></span>
<span id="cb2-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">version</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0.1.0"</span></span>
<span id="cb2-4"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">description</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Quarto intro project"</span></span>
<span id="cb2-5"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">requires-python</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"&gt;=3.14"</span></span>
<span id="cb2-6"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">dependencies</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb2-7">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"quarto-cli"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb2-8"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div></div>
</div>
</section>
</section>
<section id="プロジェクト構成" class="level2">
<h2 class="anchored" data-anchor-id="プロジェクト構成">5. プロジェクト構成</h2>
<p>quarto-intro リポジトリの構成は以下の通りです。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">./</span></span>
<span id="cb3-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> .github/</span>
<span id="cb3-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│</span>   ├── dependabot.yml</span>
<span id="cb3-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│</span>   └── workflows/</span>
<span id="cb3-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│</span>       ├── export-to-html.yaml</span>
<span id="cb3-6"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│</span>       └── publish.yaml</span>
<span id="cb3-7"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> .gitignore</span>
<span id="cb3-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> .nojekyll</span>
<span id="cb3-9"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> _quarto.yml</span>
<span id="cb3-10"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> assets/</span>
<span id="cb3-11"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│</span>   └── common/</span>
<span id="cb3-12"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│</span>       └── title-background.jpg</span>
<span id="cb3-13"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> blog/</span>
<span id="cb3-14"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│</span>   ├── index.qmd</span>
<span id="cb3-15"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│</span>   └── 2024-08-25-test1.qmd</span>
<span id="cb3-16"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> index.qmd</span>
<span id="cb3-17"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> pyproject.toml</span>
<span id="cb3-18"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> slides/</span>
<span id="cb3-19"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│</span>   ├── index.qmd</span>
<span id="cb3-20"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">│</span>   └── 2025-05-05-initial-slide.qmd</span>
<span id="cb3-21"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">└──</span> uv.lock</span></code></pre></div></div>
<section id="quarto.yml" class="level3">
<h3 class="anchored" data-anchor-id="quarto.yml">5.1. <code>_quarto.yml</code></h3>
<p>プロジェクトの設定を記述するファイルです。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>_quarto.yml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" data-filename="_quarto.yml" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">project</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb4-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">type</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> website</span></span>
<span id="cb4-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">output-dir</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_site"</span></span>
<span id="cb4-4"></span>
<span id="cb4-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">date-format</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> iso</span></span>
<span id="cb4-6"></span>
<span id="cb4-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">website</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb4-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">title</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"quarto-intro"</span></span></code></pre></div></div>
</div>
</section>
<section id="gitignore" class="level3">
<h3 class="anchored" data-anchor-id="gitignore">5.2. <code>.gitignore</code></h3>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.gitignore</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" data-filename=".gitignore" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">/.quarto/</span></span>
<span id="cb5-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">/_site/</span></span>
<span id="cb5-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">/_extensions/</span></span>
<span id="cb5-4"></span>
<span id="cb5-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">**/*.quarto_ipynb</span></span></code></pre></div></div>
</div>
</section>
<section id="index.qmd" class="level3">
<h3 class="anchored" data-anchor-id="index.qmd">5.3. <code>index.qmd</code></h3>
<p>トップページを作成するためのファイルです。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>index.qmd</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6" data-filename="index.qmd" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb6-2"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">title:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> "quarto-intro"</span></span>
<span id="cb6-3"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">listing:</span></span>
<span id="cb6-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  contents:</span></span>
<span id="cb6-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    - "blog"</span></span>
<span id="cb6-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    - "slides"</span></span>
<span id="cb6-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  exclude:</span></span>
<span id="cb6-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    filename: "index.qmd"</span></span>
<span id="cb6-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  sort:</span></span>
<span id="cb6-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    - "date desc"</span></span>
<span id="cb6-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb6-12"></span>
<span id="cb6-13"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">ブログ記事一覧</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">](./blog)</span></span>
<span id="cb6-14"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">スライド一覧</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">](./slides)</span></span></code></pre></div></div>
</div>
</section>
</section>
<section id="ブログ記事の作成" class="level2">
<h2 class="anchored" data-anchor-id="ブログ記事の作成">6. ブログ記事の作成</h2>
<p><code>blog/</code> ディレクトリに <code>.qmd</code> ファイルを作成します。</p>
<section id="blogindex.qmd" class="level3">
<h3 class="anchored" data-anchor-id="blogindex.qmd">6.1. <code>blog/index.qmd</code></h3>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>blog/index.qmd</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" data-filename="blog/index.qmd" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb7-2"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">title:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> ブログ記事一覧</span></span>
<span id="cb7-3"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">listing:</span></span>
<span id="cb7-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  contents:</span></span>
<span id="cb7-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    - "."</span></span>
<span id="cb7-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  sort:</span></span>
<span id="cb7-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    - "date desc"</span></span>
<span id="cb7-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">---</span></span></code></pre></div></div>
</div>
</section>
<section id="ブログ記事の例" class="level3">
<h3 class="anchored" data-anchor-id="ブログ記事の例">6.2. ブログ記事の例</h3>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>blog/2024-08-25-test1.qmd</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8" data-filename="blog/2024-08-25-test1.qmd" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb8-2"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">title:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> test1</span></span>
<span id="cb8-3"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">date:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> 2024-08-25</span></span>
<span id="cb8-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb8-5"></span>
<span id="cb8-6">ブログ記事の本文です。</span></code></pre></div></div>
</div>
</section>
</section>
<section id="スライドの作成" class="level2">
<h2 class="anchored" data-anchor-id="スライドの作成">7. スライドの作成</h2>
<p>Quarto は reveal.js 形式のスライドを作成できます。</p>
<section id="slidesindex.qmd" class="level3">
<h3 class="anchored" data-anchor-id="slidesindex.qmd">7.1. <code>slides/index.qmd</code></h3>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>slides/index.qmd</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9" data-filename="slides/index.qmd" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb9-2"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">title:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> スライド一覧</span></span>
<span id="cb9-3"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">listing:</span></span>
<span id="cb9-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  contents:</span></span>
<span id="cb9-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    - "."</span></span>
<span id="cb9-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  sort:</span></span>
<span id="cb9-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    - "date desc"</span></span>
<span id="cb9-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">---</span></span></code></pre></div></div>
</div>
</section>
<section id="スライドの例" class="level3">
<h3 class="anchored" data-anchor-id="スライドの例">7.2. スライドの例</h3>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>slides/2025-05-05-initial-slide.qmd</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10" data-filename="slides/2025-05-05-initial-slide.qmd" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb10-2"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">title:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> スライドタイトル</span></span>
<span id="cb10-3"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">author:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> uma-chan</span></span>
<span id="cb10-4"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">date:</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"> 2025-05-05</span></span>
<span id="cb10-5"><span class="an" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">format:</span></span>
<span id="cb10-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">  revealjs:</span></span>
<span id="cb10-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    slide-level: 3</span></span>
<span id="cb10-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    slide-number: true</span></span>
<span id="cb10-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">---</span></span>
<span id="cb10-10"></span>
<span id="cb10-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">## セクション1</span></span>
<span id="cb10-12"></span>
<span id="cb10-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">### スライド1</span></span>
<span id="cb10-14"></span>
<span id="cb10-15">本文</span>
<span id="cb10-16"></span>
<span id="cb10-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">### スライド2</span></span>
<span id="cb10-18"></span>
<span id="cb10-19">本文</span>
<span id="cb10-20"></span>
<span id="cb10-21"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">## セクション2</span></span>
<span id="cb10-22"></span>
<span id="cb10-23"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">### スライド3</span></span>
<span id="cb10-24"></span>
<span id="cb10-25">本文</span></code></pre></div></div>
</div>
<p><code>##</code> でセクションタイトルのスライド、<code>###</code> で通常のスライドを区切ります。</p>
</section>
</section>
<section id="ローカルでプレビュー" class="level2">
<h2 class="anchored" data-anchor-id="ローカルでプレビュー">8. ローカルでプレビュー</h2>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">uv</span> run quarto preview</span></code></pre></div></div>
<p>ブラウザでリアルタイムにプレビューしながら編集できます。</p>
</section>
<section id="github-pages-への公開" class="level2">
<h2 class="anchored" data-anchor-id="github-pages-への公開">9. GitHub Pages への公開</h2>
<p>GitHub Actions を使って GitHub Pages に自動デプロイします。</p>
<section id="初回デプロイ" class="level3">
<h3 class="anchored" data-anchor-id="初回デプロイ">9.1. 初回デプロイ</h3>
<p>初回はローカルから以下のコマンドを実行して <code>gh-pages</code> ブランチを作成します。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">uv</span> run quarto publish gh-pages</span></code></pre></div></div>
</section>
<section id="publish.yaml" class="level3">
<h3 class="anchored" data-anchor-id="publish.yaml">9.2. <code>publish.yaml</code></h3>
<p>2回目以降は GitHub Actions で自動デプロイされます。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.github/workflows/publish.yaml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13" data-filename=".github/workflows/publish.yaml" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Quarto Publish</span></span>
<span id="cb13-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">run-name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.event_name }} on ${{ github.ref_name }} by @${{ github.actor }}</span></span>
<span id="cb13-3"></span>
<span id="cb13-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb13-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">workflow_dispatch</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb13-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb13-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main</span></span>
<span id="cb13-8"></span>
<span id="cb13-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">permissions</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">{}</span></span>
<span id="cb13-10"></span>
<span id="cb13-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">defaults</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb13-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb13-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">shell</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> bash</span></span>
<span id="cb13-14"></span>
<span id="cb13-15"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">concurrency</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb13-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.workflow }}-${{ github.ref }}</span></span>
<span id="cb13-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cancel-in-progress</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb13-18"></span>
<span id="cb13-19"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb13-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">build-deploy</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb13-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runs-on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ubuntu-latest</span></span>
<span id="cb13-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">timeout-minutes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb13-23"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">permissions</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb13-24"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">contents</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> write</span></span>
<span id="cb13-25"></span>
<span id="cb13-26"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">steps</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb13-27"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Check out repository</span></span>
<span id="cb13-28"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/checkout@v4</span></span>
<span id="cb13-29"></span>
<span id="cb13-30"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Set up Quarto</span></span>
<span id="cb13-31"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> quarto-dev/quarto-actions/setup@v2</span></span>
<span id="cb13-32"></span>
<span id="cb13-33"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Render and Publish</span></span>
<span id="cb13-34"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> quarto-dev/quarto-actions/publish@v2</span></span>
<span id="cb13-35"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb13-36"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">target</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> gh-pages</span></span>
<span id="cb13-37"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">env</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb13-38"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">GITHUB_TOKEN</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ secrets.GITHUB_TOKEN }}</span></span></code></pre></div></div>
</div>
</section>
</section>
<section id="html-ファイルのエクスポート" class="level2">
<h2 class="anchored" data-anchor-id="html-ファイルのエクスポート">10. HTML ファイルのエクスポート</h2>
<p>GitHub Pages を作成しない場合も、HTML ファイルを <code>html</code> ブランチ生成するようなデプロイも可能です。</p>
<section id="export-to-html.yaml" class="level3">
<h3 class="anchored" data-anchor-id="export-to-html.yaml">10.1. <code>export-to-html.yaml</code></h3>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.github/workflows/export-to-html.yaml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14" data-filename=".github/workflows/export-to-html.yaml" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb14-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Export to HTML</span></span>
<span id="cb14-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">run-name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.event_name }} on ${{ github.ref_name }} by @${{ github.actor }}</span></span>
<span id="cb14-3"></span>
<span id="cb14-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb14-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">workflow_dispatch</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb14-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb14-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main</span></span>
<span id="cb14-8"></span>
<span id="cb14-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">permissions</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">{}</span></span>
<span id="cb14-10"></span>
<span id="cb14-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">defaults</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb14-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb14-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">shell</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> bash</span></span>
<span id="cb14-14"></span>
<span id="cb14-15"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">concurrency</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb14-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.workflow }}-${{ github.ref }}</span></span>
<span id="cb14-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cancel-in-progress</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb14-18"></span>
<span id="cb14-19"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb14-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">export-html</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb14-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runs-on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ubuntu-latest</span></span>
<span id="cb14-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">timeout-minutes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb14-23"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">permissions</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb14-24"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">contents</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> write</span></span>
<span id="cb14-25"></span>
<span id="cb14-26"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">steps</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb14-27"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Check out repository</span></span>
<span id="cb14-28"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/checkout@v4</span></span>
<span id="cb14-29"></span>
<span id="cb14-30"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Set up Quarto</span></span>
<span id="cb14-31"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> quarto-dev/quarto-actions/setup@v2</span></span>
<span id="cb14-32"></span>
<span id="cb14-33"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Render Quarto Website</span></span>
<span id="cb14-34"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">        run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb14-35">          quarto render</span>
<span id="cb14-36"></span>
<span id="cb14-37"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Deploy to HTML branch</span></span>
<span id="cb14-38"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> JamesIves/github-pages-deploy-action@v4</span></span>
<span id="cb14-39"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb14-40"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">folder</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> _site</span></span>
<span id="cb14-41"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branch</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> html</span></span>
<span id="cb14-42"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">clean</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span></code></pre></div></div>
</div>
</section>
<section id="html-ファイルの取得方法" class="level3">
<h3 class="anchored" data-anchor-id="html-ファイルの取得方法">10.2. HTML ファイルの取得方法</h3>
<ol type="1">
<li>GitHub で <code>html</code> ブランチに切り替え</li>
<li>Code &gt; Download ZIP でダウンロード</li>
<li>または <code>git checkout html &amp;&amp; git pull</code></li>
</ol>
</section>
</section>
<section id="dependabot-の設定" class="level2">
<h2 class="anchored" data-anchor-id="dependabot-の設定">11. Dependabot の設定</h2>
<p>GitHub Actions と uv のパッケージを自動で更新するために Dependabot を設定します。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.github/dependabot.yml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15" data-filename=".github/dependabot.yml" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb15-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">version</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb15-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">updates</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb15-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">package-ecosystem</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"github-actions"</span></span>
<span id="cb15-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">directory</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span></span>
<span id="cb15-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">schedule</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb15-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">interval</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"weekly"</span></span>
<span id="cb15-7"></span>
<span id="cb15-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">package-ecosystem</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"uv"</span></span>
<span id="cb15-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">directory</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span></span>
<span id="cb15-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">schedule</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb15-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">interval</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"weekly"</span></span></code></pre></div></div>
</div>
<p>これにより依存パッケージを適切に管理できます。</p>
</section>
<section id="おわりに" class="level2">
<h2 class="anchored" data-anchor-id="おわりに">12. おわりに</h2>
<p>uv と Quarto を使えば、Markdown ライクな記法でブログやスライドを簡単に作成できます。</p>
<p>テンプレートリポジトリを参考にして自分だけのサイトを作ってみてください。</p>
<p><a href="https://github.com/i9wa4/quarto-intro" class="uri">https://github.com/i9wa4/quarto-intro</a></p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-12-15-uv-quarto-intro.html&amp;text=uv%20%2B%20Quarto%20%E3%81%A7%E3%83%96%E3%83%AD%E3%82%B0%E3%82%84%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%89%E3%82%92%E4%BD%9C%E6%88%90%E3%81%97%E3%81%A6%20GitHub%20Pages%20%E3%81%A7%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B%20%28HTML%20%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%9D%E3%83%BC%E3%83%88%E3%81%AB%E3%82%82%E5%AF%BE%E5%BF%9C%29%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=uv%20%2B%20Quarto%20%E3%81%A7%E3%83%96%E3%83%AD%E3%82%B0%E3%82%84%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%89%E3%82%92%E4%BD%9C%E6%88%90%E3%81%97%E3%81%A6%20GitHub%20Pages%20%E3%81%A7%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B%20%28HTML%20%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%9D%E3%83%BC%E3%83%88%E3%81%AB%E3%82%82%E5%AF%BE%E5%BF%9C%29%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-12-15-uv-quarto-intro.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-12-15-uv-quarto-intro.html&amp;title=uv%20%2B%20Quarto%20%E3%81%A7%E3%83%96%E3%83%AD%E3%82%B0%E3%82%84%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%89%E3%82%92%E4%BD%9C%E6%88%90%E3%81%97%E3%81%A6%20GitHub%20Pages%20%E3%81%A7%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B%20%28HTML%20%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%9D%E3%83%BC%E3%83%88%E3%81%AB%E3%82%82%E5%AF%BE%E5%BF%9C%29%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>tech-others</category>
  <guid>https://i9wa4.github.io/blog/2025-12-15-uv-quarto-intro.html</guid>
  <pubDate>Sun, 14 Dec 2025 19:56:23 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Alacritty のテーマ切り替えと透過度変更を tmux キーバインドで操作する</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-12-14-alacritty-tmux-theme-opacity.html</link>
  <description><![CDATA[ 





<section id="はじめに" class="level2">
<h2 class="anchored" data-anchor-id="はじめに">1. はじめに</h2>
<p>Alacritty を使っていると、気分や作業環境に応じてテーマを変えたり、背景の透過度を調整したくなることがあります。</p>
<p>今回は tmux のキーバインドから Alacritty のテーマ切り替えと透過度変更をリアルタイムに行う方法を紹介します。</p>
</section>
<section id="仕組みの概要" class="level2">
<h2 class="anchored" data-anchor-id="仕組みの概要">2. 仕組みの概要</h2>
<p>この仕組みのポイントは以下の2点です。</p>
<ol type="1">
<li>動的に書き換える専用のファイル (<code>theme.toml</code>, <code>opacity.toml</code>) を用意する</li>
<li>Alacritty のホットリロード機能で変更を即座に反映する</li>
</ol>
<p>Alacritty には設定ファイルの変更を検知して自動的にリロードする機能があります。この機能を活用し、シェルスクリプトで設定ファイルを動的に書き換えることでテーマや透過度を変更します。</p>
<section id="設定ファイルの構造" class="level3">
<h3 class="anchored" data-anchor-id="設定ファイルの構造">2.1. 設定ファイルの構造</h3>
<p>Alacritty の設定ファイルは <code>import</code> 機能を使って分割管理できます。</p>
<pre class="text"><code>~/.config/alacritty/
├── .gitignore
├── alacritty.toml    # メイン設定ファイル (gitignore)
├── common.toml       # 共通設定
├── macos.toml        # OS固有設定
├── theme.toml        # テーマ設定 (gitignore, 動的に書き換え)
├── opacity.toml      # 透過度設定 (gitignore, 動的に書き換え)
└── themes/           # テーマファイル群 (gitignore, 別リポジトリからクローン)
    └── themes/
        ├── ayu_dark.toml
        ├── ayu_light.toml
        └── ...</code></pre>
<p>動的に書き換えるファイルや環境依存のファイルは <code>.gitignore</code> に追加しています。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.gitignore</strong></pre>
</div>
<pre class="text" data-filename=".gitignore"><code>themes/
alacritty.toml
theme.toml
opacity.toml</code></pre>
</div>
<ul>
<li><code>themes/</code>: 別リポジトリからクローンするため</li>
<li><code>alacritty.toml</code>: OS固有設定のインポートがあり環境依存のため</li>
<li><code>theme.toml</code>, <code>opacity.toml</code>: 動的に書き換えられるため</li>
</ul>
<p><code>alacritty.toml</code> から <code>common.toml</code> をインポートし、<code>common.toml</code> から <code>theme.toml</code> と <code>opacity.toml</code> をインポートする構造になっています。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>alacritty.toml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" data-filename="alacritty.toml" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[general]</span></span>
<span id="cb3-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">import</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb3-3">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">~/.config/alacritty/common.toml</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb3-4">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">~/.config/alacritty/macos.toml</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span></span>
<span id="cb3-5"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div></div>
</div>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>common.toml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" data-filename="common.toml" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb4-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[general]</span></span>
<span id="cb4-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">import</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb4-3">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">~/.config/alacritty/theme.toml</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb4-4">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">~/.config/alacritty/opacity.toml</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span></span>
<span id="cb4-5"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb4-6"></span>
<span id="cb4-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[font]</span></span>
<span id="cb4-8"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">size</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">26</span></span>
<span id="cb4-9"></span>
<span id="cb4-10"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[font.normal]</span></span>
<span id="cb4-11"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">family</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"MyricaM M"</span></span>
<span id="cb4-12"></span>
<span id="cb4-13"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[window]</span></span>
<span id="cb4-14"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">startup_mode</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Maximized"</span></span>
<span id="cb4-15"></span>
<span id="cb4-16"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[keyboard]</span></span>
<span id="cb4-17"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">bindings</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[]</span></span></code></pre></div></div>
</div>
<p><code>theme.toml</code> と <code>opacity.toml</code> はシェルスクリプトによって動的に書き換えられるファイルです。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>theme.toml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" data-filename="theme.toml" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb5-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[general]</span></span>
<span id="cb5-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">import</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb5-3">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">~/.config/alacritty/themes/themes/enfocado_dark.toml</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span></span>
<span id="cb5-4"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div></div>
</div>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>opacity.toml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6" data-filename="opacity.toml" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb6-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[window]</span></span>
<span id="cb6-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">opacity</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.60</span></span></code></pre></div></div>
</div>
</section>
</section>
<section id="テーマ切り替え機能" class="level2">
<h2 class="anchored" data-anchor-id="テーマ切り替え機能">3. テーマ切り替え機能</h2>
<p>テーマ切り替えは2つのスクリプトで実現しています。</p>
<section id="ダークライトモードの切り替え" class="level3">
<h3 class="anchored" data-anchor-id="ダークライトモードの切り替え">3.1. ダーク/ライトモードの切り替え</h3>
<p><code>terminal-theme-toggle.sh</code> はダークモードとライトモードを切り替えます。現在のモードはキャッシュファイルに保存されます。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>terminal-theme-toggle.sh</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" data-filename="terminal-theme-toggle.sh" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#!/usr/bin/env bash</span></span>
<span id="cb7-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> errexit</span>
<span id="cb7-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> nounset</span>
<span id="cb7-4"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> pipefail</span>
<span id="cb7-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> posix</span>
<span id="cb7-6"></span>
<span id="cb7-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Toggle terminal theme between dark and light mode.</span></span>
<span id="cb7-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Stores current theme in cache file.</span></span>
<span id="cb7-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#</span></span>
<span id="cb7-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Usage:</span></span>
<span id="cb7-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   terminal-theme-toggle.sh</span></span>
<span id="cb7-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#</span></span>
<span id="cb7-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Cache file:</span></span>
<span id="cb7-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   $XDG_CACHE_HOME/terminal-theme (default: ~/.cache/terminal-theme)</span></span>
<span id="cb7-15"></span>
<span id="cb7-16"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CACHE_FILE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${XDG_CACHE_HOME</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:-</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$HOME</span>/.cache<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/terminal-theme"</span></span>
<span id="cb7-17"></span>
<span id="cb7-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Get current theme</span></span>
<span id="cb7-19"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-f</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$CACHE_FILE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb7-20">  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">current</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tr</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-d</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">' \n'</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$CACHE_FILE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb7-21"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span></span>
<span id="cb7-22">  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">current</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dark"</span></span>
<span id="cb7-23"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb7-24"></span>
<span id="cb7-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Toggle theme</span></span>
<span id="cb7-26"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$current</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dark"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb7-27">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"light"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$CACHE_FILE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb7-28"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span></span>
<span id="cb7-29">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dark"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$CACHE_FILE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb7-30"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span></code></pre></div></div>
</div>
</section>
<section id="テーマのランダム選択" class="level3">
<h3 class="anchored" data-anchor-id="テーマのランダム選択">3.2. テーマのランダム選択</h3>
<p><code>theme-change.sh</code> は現在のモード (ダーク/ライト) に応じたテーマをランダムに選択します。</p>
<p>テーマがダークかライトかは、テーマファイルの背景色から輝度を計算して自動判定しています。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>theme-change.sh</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8" data-filename="theme-change.sh" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#!/bin/bash</span></span>
<span id="cb8-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> errexit</span>
<span id="cb8-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> nounset</span>
<span id="cb8-4"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> pipefail</span>
<span id="cb8-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> posix</span>
<span id="cb8-6"></span>
<span id="cb8-7"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">THEME_DIR</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$HOME</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/.config/alacritty/themes/themes"</span></span>
<span id="cb8-8"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">THEME_FILE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$HOME</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/.config/alacritty/theme.toml"</span></span>
<span id="cb8-9"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CACHE_FILE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${XDG_CACHE_HOME</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:-</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$HOME</span>/.cache<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/terminal-theme"</span></span>
<span id="cb8-10"></span>
<span id="cb8-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># キャッシュファイルからテーマタイプを取得</span></span>
<span id="cb8-12"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-f</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$CACHE_FILE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb8-13">  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">THEME_TYPE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$CACHE_FILE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tr</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-d</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">' \n'</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb8-14"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span></span>
<span id="cb8-15">  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">THEME_TYPE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dark"</span></span>
<span id="cb8-16"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb8-17"></span>
<span id="cb8-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># light または dark 以外の場合はデフォルト</span></span>
<span id="cb8-19"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$THEME_TYPE</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"light"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$THEME_TYPE</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dark"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb8-20">  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">THEME_TYPE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dark"</span></span>
<span id="cb8-21"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb8-22"></span>
<span id="cb8-23"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CACHE_LIST_FILE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${XDG_CACHE_HOME</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:-</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$HOME</span>/.cache<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/alacritty-themes-</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${THEME_TYPE}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb8-24"></span>
<span id="cb8-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 背景色から明るさを判定する関数</span></span>
<span id="cb8-26"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is_matching_theme()</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">{</span></span>
<span id="cb8-27">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">local</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">theme_file</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$1</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb8-28">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">local</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">target_type</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$2</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb8-29"></span>
<span id="cb8-30">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># background の色を取得</span></span>
<span id="cb8-31">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">local</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">bg_color</span></span>
<span id="cb8-32">  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">bg_color</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grep</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-E</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"^\s*background\s*="</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$theme_file</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-1</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sed</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-E</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"s/.*['</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">]?(#[0-9a-fA-F]{6})['</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">]?.*/\1/"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb8-33"></span>
<span id="cb8-34">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-z</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$bg_color</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb8-35">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 判定できない場合はダークとみなす</span></span>
<span id="cb8-36">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$target_type</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dark"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]]</span></span>
<span id="cb8-37">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$?</span></span>
<span id="cb8-38">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb8-39"></span>
<span id="cb8-40">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># RGB値を抽出</span></span>
<span id="cb8-41">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">local</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">r</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$((</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">16#</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${bg_color</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}))</span></span>
<span id="cb8-42">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">local</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">g</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$((</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">16#</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${bg_color</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}))</span></span>
<span id="cb8-43">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">local</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">b</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$((</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">16#</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${bg_color</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}))</span></span>
<span id="cb8-44"></span>
<span id="cb8-45">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 輝度を計算 (0.299*R + 0.587*G + 0.114*B)</span></span>
<span id="cb8-46">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">local</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">brightness</span></span>
<span id="cb8-47">  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">brightness</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"scale=2; 0.299*</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$r</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> + 0.587*</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$g</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> + 0.114*</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$b</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bc</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb8-48"></span>
<span id="cb8-49">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 128を境界値として判定</span></span>
<span id="cb8-50">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$target_type</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"light"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb8-51">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">((</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$brightness</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> &gt;= 128"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bc</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-l</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">))</span></span>
<span id="cb8-52">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span></span>
<span id="cb8-53">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">((</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$brightness</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> &lt; 128"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">bc</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-l</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">))</span></span>
<span id="cb8-54">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb8-55"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">}</span></span>
<span id="cb8-56"></span>
<span id="cb8-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># キャッシュに有効なデータがあれば利用し、無効なら再生成</span></span>
<span id="cb8-58"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">themes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">()</span></span>
<span id="cb8-59"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-f</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$CACHE_LIST_FILE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb8-60">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">while</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">IFS</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">read</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">line</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">do</span></span>
<span id="cb8-61">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-z</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$line</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]]</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">continue</span></span>
<span id="cb8-62">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-f</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$THEME_DIR</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$line</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb8-63">      <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">themes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$line</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb8-64">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb8-65">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">done</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$CACHE_LIST_FILE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb8-66"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb8-67"></span>
<span id="cb8-68"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">themes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[@]</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-eq</span> 0 <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb8-69">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># テーマタイプに一致するテーマのリストを作成</span></span>
<span id="cb8-70">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> theme_file <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$THEME_DIR</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>/<span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">*</span>.toml<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">do</span></span>
<span id="cb8-71">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-f</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$theme_file</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]]</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">||</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">continue</span></span>
<span id="cb8-72">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">is_matching_theme</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$theme_file</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$THEME_TYPE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb8-73">      <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">themes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">(</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">basename</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$theme_file</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb8-74">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb8-75">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">done</span></span>
<span id="cb8-76"></span>
<span id="cb8-77">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">themes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[@]</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-gt</span> 0 <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb8-78">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># shellcheck disable=SC2207</span></span>
<span id="cb8-79">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">IFS</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">$'</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">themes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">($(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">printf</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%s\n"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${themes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[@]</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">))</span></span>
<span id="cb8-80">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">unset</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">IFS</span></span>
<span id="cb8-81">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">printf</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%s\n"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${themes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[@]</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$CACHE_LIST_FILE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb8-82">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span></span>
<span id="cb8-83">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">:</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$CACHE_LIST_FILE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb8-84">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb8-85"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb8-86"></span>
<span id="cb8-87"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">themes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[@]</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-eq</span> 0 <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb8-88">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Error: No </span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${THEME_TYPE}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> themes found"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&amp;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb8-89">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">exit</span> 1</span>
<span id="cb8-90"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb8-91"></span>
<span id="cb8-92"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ランダムにテーマを選択</span></span>
<span id="cb8-93"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">next_theme</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${themes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span>RANDOM % <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">themes</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[@]</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb8-94"></span>
<span id="cb8-95"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># theme.toml を更新</span></span>
<span id="cb8-96"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$THEME_FILE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;&lt;EOF</span></span>
<span id="cb8-97"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">[general]</span></span>
<span id="cb8-98"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">import = [</span></span>
<span id="cb8-99"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">    '</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$THEME_DIR</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$next_theme</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span></span>
<span id="cb8-100"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb8-101"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">EOF</span></span>
<span id="cb8-102"></span>
<span id="cb8-103"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># キャッシュファイルに書き込み (既にあるはずだが念のため)</span></span>
<span id="cb8-104"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-p</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dirname</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$CACHE_FILE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb8-105"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$THEME_TYPE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$CACHE_FILE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb8-106"></span>
<span id="cb8-107"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Alacritty の設定リロードをトリガー</span></span>
<span id="cb8-108"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">touch</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$HOME</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/.config/alacritty/alacritty.toml"</span></span>
<span id="cb8-109"></span>
<span id="cb8-110"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tmux のステータスバーを更新</span></span>
<span id="cb8-111"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">command</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> tmux <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;&gt;</span>/dev/null <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tmux</span> list-sessions <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;&gt;</span>/dev/null<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb8-112">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tmux</span> refresh-client <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-S</span></span>
<span id="cb8-113"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span></code></pre></div></div>
</div>
<p>輝度計算には人間の視覚特性を考慮した係数 <code>0.299*R + 0.587*G + 0.114*B</code> を使用しています。輝度が128以上ならライトテーマ、128未満ならダークテーマと判定します。</p>
</section>
<section id="テーマファイルの入手" class="level3">
<h3 class="anchored" data-anchor-id="テーマファイルの入手">3.3. テーマファイルの入手</h3>
<p>テーマファイルは <a href="https://github.com/alacritty/alacritty-theme">alacritty-theme</a> リポジトリから入手できます。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">git</span> clone https://github.com/alacritty/alacritty-theme ~/.config/alacritty/themes</span></code></pre></div></div>
</section>
</section>
<section id="透過度変更機能" class="level2">
<h2 class="anchored" data-anchor-id="透過度変更機能">4. 透過度変更機能</h2>
<p><code>opacity-change.sh</code> は透過度を0.1ステップで上下に調整します。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>opacity-change.sh</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10" data-filename="opacity-change.sh" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#!/bin/bash</span></span>
<span id="cb10-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> errexit</span>
<span id="cb10-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> nounset</span>
<span id="cb10-4"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> pipefail</span>
<span id="cb10-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> posix</span>
<span id="cb10-6"></span>
<span id="cb10-7"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">OPACITY_FILE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$HOME</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/.config/alacritty/opacity.toml"</span></span>
<span id="cb10-8"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ALACRITTY_FILE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$HOME</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/.config/alacritty/alacritty.toml"</span></span>
<span id="cb10-9"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">STEP</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0.1</span>
<span id="cb10-10"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">DEFAULT_OPACITY</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1.0</span>
<span id="cb10-11"></span>
<span id="cb10-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 引数チェック</span></span>
<span id="cb10-13"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$#</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-ne</span> 1 <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb10-14">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Usage: </span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$0</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> {up|down}"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&amp;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb10-15">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">exit</span> 1</span>
<span id="cb10-16"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb10-17"></span>
<span id="cb10-18"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">DIRECTION</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$1</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb10-19"></span>
<span id="cb10-20"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$DIRECTION</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"up"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$DIRECTION</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"down"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb10-21">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Error: direction must be 'up' or 'down'"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&amp;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb10-22">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">exit</span> 1</span>
<span id="cb10-23"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb10-24"></span>
<span id="cb10-25"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 現在の opacity 値を取得</span></span>
<span id="cb10-26"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-f</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$OPACITY_FILE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb10-27">  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CURRENT_OPACITY</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grep</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"^opacity"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$OPACITY_FILE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sed</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'s/.*= *//'</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb10-28"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span></span>
<span id="cb10-29">  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CURRENT_OPACITY</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$DEFAULT_OPACITY</span></span>
<span id="cb10-30"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb10-31"></span>
<span id="cb10-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 新しい opacity 値を計算</span></span>
<span id="cb10-33"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$DIRECTION</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"up"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb10-34">  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">NEW_OPACITY</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$CURRENT_OPACITY</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> + </span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$STEP</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">/usr/bin/bc</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb10-35">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">((</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$NEW_OPACITY</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> &gt; 1.0"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">/usr/bin/bc</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-l</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">));</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb10-36">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">NEW_OPACITY</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1.0</span>
<span id="cb10-37">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb10-38"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span></span>
<span id="cb10-39">  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">NEW_OPACITY</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$CURRENT_OPACITY</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> - </span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$STEP</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">/usr/bin/bc</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb10-40">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">((</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$NEW_OPACITY</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> &lt; 0.0"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">/usr/bin/bc</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-l</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">));</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb10-41">    <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">NEW_OPACITY</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0.0</span>
<span id="cb10-42">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb10-43"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb10-44"></span>
<span id="cb10-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># opacity.toml を更新 (printf で 0.xx フォーマットを保証)</span></span>
<span id="cb10-46"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">FORMATTED_OPACITY</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">printf</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%.2f"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$NEW_OPACITY</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb10-47"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cat</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$OPACITY_FILE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;&lt;EOF</span></span>
<span id="cb10-48"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">[window]</span></span>
<span id="cb10-49"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">opacity = </span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$FORMATTED_OPACITY</span></span>
<span id="cb10-50"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">EOF</span></span>
<span id="cb10-51"></span>
<span id="cb10-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Alacritty の設定リロードをトリガー</span></span>
<span id="cb10-53"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">touch</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$ALACRITTY_FILE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb10-54"></span>
<span id="cb10-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tmux のステータスバーを更新</span></span>
<span id="cb10-56"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">command</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> tmux <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;&gt;</span>/dev/null <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tmux</span> list-sessions <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;&gt;</span>/dev/null<span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb10-57">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">tmux</span> refresh-client <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-S</span></span>
<span id="cb10-58"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span></code></pre></div></div>
</div>
<p>透過度は0.0 (完全透明) から1.0 (不透明) の範囲で制限されます。</p>
</section>
<section id="tmux-キーバインドの設定" class="level2">
<h2 class="anchored" data-anchor-id="tmux-キーバインドの設定">5. tmux キーバインドの設定</h2>
<p>これらのスクリプトを tmux のキーバインドから呼び出せるようにします。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>tmux.conf</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11" data-filename="tmux.conf" style="background: #f1f3f5;"><pre class="sourceCode conf code-with-copy"><code class="sourceCode toml"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Switch Alacritty theme</span></span>
<span id="cb11-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">bind-key</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">-n</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">M-c</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">run-shell</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"bash ~/path/to/theme-change.sh"</span></span>
<span id="cb11-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">bind-key</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">-n</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">M-t</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">run-shell</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"bash ~/path/to/terminal-theme-toggle.sh"</span></span>
<span id="cb11-4"></span>
<span id="cb11-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adjust Alacritty opacity</span></span>
<span id="cb11-6"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">bind-key</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">-n</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">M-a</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">run-shell</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"bash ~/path/to/opacity-change.sh up"</span></span>
<span id="cb11-7"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">bind-key</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">-n</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">M-s</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">run-shell</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"bash ~/path/to/opacity-change.sh down"</span></span></code></pre></div></div>
</div>
<table class="caption-top table">
<thead>
<tr class="header">
<th>キーバインド</th>
<th>機能</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Alt + c</code></td>
<td>現在のモード内でテーマをランダム変更</td>
</tr>
<tr class="even">
<td><code>Alt + t</code></td>
<td>ダーク/ライトモードを切り替え</td>
</tr>
<tr class="odd">
<td><code>Alt + a</code></td>
<td>透過度を上げる (不透明に)</td>
</tr>
<tr class="even">
<td><code>Alt + s</code></td>
<td>透過度を下げる (透明に)</td>
</tr>
</tbody>
</table>
<p><code>-n</code> オプションを使用しているため、prefix キーなしで直接 <code>Alt + キー</code> で操作できます。</p>
</section>
<section id="ステータスバーへの表示" class="level2">
<h2 class="anchored" data-anchor-id="ステータスバーへの表示">6. ステータスバーへの表示</h2>
<p>現在のテーマ名と透過度を tmux のステータスバーに表示することもできます。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>theme-status.sh</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12" data-filename="theme-status.sh" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#!/bin/bash</span></span>
<span id="cb12-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> errexit</span>
<span id="cb12-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> nounset</span>
<span id="cb12-4"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> pipefail</span>
<span id="cb12-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> posix</span>
<span id="cb12-6"></span>
<span id="cb12-7"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">THEME_FILE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$HOME</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/.config/alacritty/theme.toml"</span></span>
<span id="cb12-8"></span>
<span id="cb12-9"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-f</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$THEME_FILE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb12-10">  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">THEME</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grep</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"themes/themes/"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$THEME_FILE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sed</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"s/.*themes\/themes\/\(.*\)\.toml.*/\1/"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb12-11">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-n</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$THEME</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb12-12">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$THEME</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb12-13">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span></span>
<span id="cb12-14">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"unknown"</span></span>
<span id="cb12-15">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb12-16"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span></span>
<span id="cb12-17">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"no-theme"</span></span>
<span id="cb12-18"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span></code></pre></div></div>
</div>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>opacity-status.sh</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13" data-filename="opacity-status.sh" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#!/bin/bash</span></span>
<span id="cb13-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> errexit</span>
<span id="cb13-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> nounset</span>
<span id="cb13-4"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> pipefail</span>
<span id="cb13-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> posix</span>
<span id="cb13-6"></span>
<span id="cb13-7"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">OPACITY_FILE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$HOME</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/.config/alacritty/opacity.toml"</span></span>
<span id="cb13-8"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">DEFAULT_OPACITY</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>1.0</span>
<span id="cb13-9"></span>
<span id="cb13-10"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-f</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$OPACITY_FILE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]];</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb13-11">  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">OPACITY</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grep</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"^opacity"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$OPACITY_FILE</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sed</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'s/.*= *//'</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb13-12">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">printf</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%.1f\n"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$OPACITY</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb13-13"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span></span>
<span id="cb13-14">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">printf</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"%.1f\n"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$DEFAULT_OPACITY</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb13-15"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span></code></pre></div></div>
</div>
<p>tmux.conf でこれらを呼び出します。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>tmux.conf</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14" data-filename="tmux.conf" style="background: #f1f3f5;"><pre class="sourceCode conf code-with-copy"><code class="sourceCode toml"><span id="cb14-1"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">set-option</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">-g</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">status-right</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"#(bash ~/.config/alacritty/theme-status.sh) #(bash ~/.config/alacritty/opacity-status.sh)"</span></span></code></pre></div></div>
</div>
</section>
<section id="ポイント" class="level2">
<h2 class="anchored" data-anchor-id="ポイント">7. ポイント</h2>
<section id="alacritty-のホットリロード" class="level3">
<h3 class="anchored" data-anchor-id="alacritty-のホットリロード">7.1. Alacritty のホットリロード</h3>
<p>Alacritty は設定ファイルの変更を自動検知してリロードします。ただし、import しているファイルの変更は検知されないため、<code>touch alacritty.toml</code> でメインファイルのタイムスタンプを更新してリロードをトリガーしています。</p>
</section>
<section id="テーマリストのキャッシュ" class="level3">
<h3 class="anchored" data-anchor-id="テーマリストのキャッシュ">7.2. テーマリストのキャッシュ</h3>
<p>テーマの輝度判定は初回のみ実行し、結果を <code>~/.cache/alacritty-themes-{dark,light}</code> にキャッシュしています。これにより2回目以降のテーマ切り替えが高速になります。</p>
</section>
<section id="tmux-ステータスバーの更新" class="level3">
<h3 class="anchored" data-anchor-id="tmux-ステータスバーの更新">7.3. tmux ステータスバーの更新</h3>
<p>テーマや透過度を変更した後、<code>tmux refresh-client -S</code> でステータスバーを即座に更新しています。</p>
</section>
<section id="vim-background-との連動" class="level3">
<h3 class="anchored" data-anchor-id="vim-background-との連動">7.4. Vim background との連動</h3>
<p>Vim 側でも同じキャッシュファイル (<code>~/.cache/terminal-theme</code>) を参照して、<code>background</code> オプションを連動させています。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>vimrc</strong></pre>
</div>
<pre class="vim" data-filename="vimrc"><code>" Detect background from terminal theme cache
let s:cache_file = expand($XDG_CACHE_HOME) .. '/terminal-theme'
if filereadable(s:cache_file)
  let s:theme_type = trim(readfile(s:cache_file)[0])
  if s:theme_type ==# 'light'
    set background=light
  else
    set background=dark
  endif
else
  set background=dark
endif

" カラースキームは retrobox 固定
colorscheme retrobox</code></pre>
</div>
<p>現状はカラースキームを retrobox 固定にしていますが、ダーク/ライトモードに応じてランダム選択する仕組みも用意しています。</p>
</section>
</section>
<section id="おわりに" class="level2">
<h2 class="anchored" data-anchor-id="おわりに">8. おわりに</h2>
<p>Alacritty のホットリロード機能と tmux のキーバインドを組み合わせることで、ターミナルの見た目をキーボードだけで素早く変更できるようになりました。</p>
<p>気分転換にテーマを変えたり、画面共有時に透過度を調整したりして活用してます。</p>
<p>ちなみに、テーマの輝度判定ロジックはさすがに凝りすぎな気もしますが、AI に丸投げして作ったものなので特に違和感なく動いています。dotfiles も AI に任せる時代になりました。</p>
<p>設定ファイルの全体は以下のリポジトリで公開しています。</p>
<p><a href="https://github.com/i9wa4/dotfiles/tree/main/dot.config/alacritty" class="uri">https://github.com/i9wa4/dotfiles/tree/main/dot.config/alacritty</a></p>
<p><a href="https://github.com/i9wa4/dotfiles/blob/main/dot.config/tmux/tmux.conf" class="uri">https://github.com/i9wa4/dotfiles/blob/main/dot.config/tmux/tmux.conf</a></p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-12-14-alacritty-tmux-theme-opacity.html&amp;text=Alacritty%20%E3%81%AE%E3%83%86%E3%83%BC%E3%83%9E%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88%E3%81%A8%E9%80%8F%E9%81%8E%E5%BA%A6%E5%A4%89%E6%9B%B4%E3%82%92%20tmux%20%E3%82%AD%E3%83%BC%E3%83%90%E3%82%A4%E3%83%B3%E3%83%89%E3%81%A7%E6%93%8D%E4%BD%9C%E3%81%99%E3%82%8B%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=Alacritty%20%E3%81%AE%E3%83%86%E3%83%BC%E3%83%9E%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88%E3%81%A8%E9%80%8F%E9%81%8E%E5%BA%A6%E5%A4%89%E6%9B%B4%E3%82%92%20tmux%20%E3%82%AD%E3%83%BC%E3%83%90%E3%82%A4%E3%83%B3%E3%83%89%E3%81%A7%E6%93%8D%E4%BD%9C%E3%81%99%E3%82%8B%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-12-14-alacritty-tmux-theme-opacity.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-12-14-alacritty-tmux-theme-opacity.html&amp;title=Alacritty%20%E3%81%AE%E3%83%86%E3%83%BC%E3%83%9E%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88%E3%81%A8%E9%80%8F%E9%81%8E%E5%BA%A6%E5%A4%89%E6%9B%B4%E3%82%92%20tmux%20%E3%82%AD%E3%83%BC%E3%83%90%E3%82%A4%E3%83%B3%E3%83%89%E3%81%A7%E6%93%8D%E4%BD%9C%E3%81%99%E3%82%8B%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>tech-others</category>
  <guid>https://i9wa4.github.io/blog/2025-12-14-alacritty-tmux-theme-opacity.html</guid>
  <pubDate>Sun, 14 Dec 2025 04:01:25 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>2025年のGitHub活動を振り返る：AI駆動開発の年</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-11-23-github-activity-2025-review.html</link>
  <description><![CDATA[ 





<section id="はじめに" class="level2">
<h2 class="anchored" data-anchor-id="はじめに">1. はじめに</h2>
<p>ふと自分のGitHub Contributionsグラフを眺めていたら「3,765 contributions in the last year」という文字列が目に入りました。</p>
<p>2025年はAI駆動開発に本格的に取り組んだ1年でした。Claude CodeとCodex CLIを中心に開発環境を構築し、Vimプラグインを4本開発し、Vim本体へのコントリビューションも達成しました。</p>
<p>数字を見るのは好きなので、データを集計しながら2025年の活動を振り返ってみます。</p>
<section id="年の数字" class="level3">
<h3 class="anchored" data-anchor-id="年の数字">1.1. 2025年の数字</h3>
<p><strong>個人リポジトリへのコミット（2025年）</strong>: 約2,106 commits</p>
<ul>
<li>dotfiles: 1,058 commits（開発環境の改善）</li>
<li>i9wa4.github.io: 331 commits（技術記事42本）</li>
<li>github-profile-summary-cards: 315 commits（プロフィール自動更新）</li>
<li>terraform-mono-repo: 294 commits（インフラコード実験）</li>
<li>zenn-i9wa4: 55 commits（Zenn記事）</li>
<li>i9wa4: 53 commits（プロフィールページ）</li>
</ul>
<p><strong>その他の活動（過去1年間）</strong>: 約1,659 contributions</p>
<ul>
<li>会社リポジトリへのコミット</li>
<li>Issue作成・コメント（個人+会社）</li>
<li>Pull Requestレビュー（個人+会社）</li>
<li>その他GitHub上での活動</li>
</ul>
<p>個人プロジェクトへのコミットが約6割、その他活動が約4割の割合です。</p>
</section>
<section id="過去からの流れ" class="level3">
<h3 class="anchored" data-anchor-id="過去からの流れ">1.2. 過去からの流れ</h3>
<p>2023年3月にdotfilesとブログリポジトリを作成して以来、少しずつ活動を積み重ねてきました。</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>年</th>
<th>コミット数</th>
<th>特徴</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>2023年</td>
<td>460 commits</td>
<td>基盤構築</td>
</tr>
<tr class="even">
<td>2024年</td>
<td>1,630 commits</td>
<td>アウトプット爆発</td>
</tr>
<tr class="odd">
<td>2025年</td>
<td>2,106 commits</td>
<td>AI駆動開発への挑戦</td>
</tr>
</tbody>
</table>
<p>2024年1月からブログを本格的に書き始めたのが大きな転機で、「学ぶ → 試す → 記事にする」という正のサイクルができました。2025年はそこにAI駆動開発という新しい要素が加わった年です。</p>
</section>
</section>
<section id="年の月別主な出来事" class="level2">
<h2 class="anchored" data-anchor-id="年の月別主な出来事">2. 2025年の月別主な出来事</h2>
<ul>
<li>3月: Terraformモノリポ作成、インフラコードの試行錯誤開始</li>
<li>4月: AI駆動開発ツール試用開始（Aider, Devin）</li>
<li>5月: uvに完全移行してPython環境を刷新、Terraform + MCP Lambdaの実装に集中</li>
<li>6月: Vim本体へ初コントリビューション（感動した）、MCP Lambda実装完了</li>
<li>7月: Claude Code導入</li>
<li>9月: Codex CLI導入</li>
<li>10月: dotfilesの月間コミット数が263に達して過去最高を記録</li>
<li>11月: Vimプラグイン開発加速</li>
</ul>
</section>
<section id="年の活動詳細" class="level2">
<h2 class="anchored" data-anchor-id="年の活動詳細">3. 2025年の活動詳細</h2>
<p>2025年は特にAI駆動開発に力を入れた1年でした。ここでは主要な活動を詳しく振り返ります。</p>
<section id="ai駆動開発環境の構築" class="level3">
<h3 class="anchored" data-anchor-id="ai駆動開発環境の構築">3.1. AI駆動開発環境の構築</h3>
<p>Claude CodeとCodex CLIを中心に、自分専用のAI駆動開発環境を作り込みました。</p>
<section id="カスタムスラッシュコマンド開発" class="level4">
<h4 class="anchored" data-anchor-id="カスタムスラッシュコマンド開発">3.1.1. カスタムスラッシュコマンド開発</h4>
<p>よくある作業を自動化するために10本以上のカスタムスラッシュコマンドを開発しました。</p>
<ul>
<li><code>/CONTRIBUTING</code>: プロジェクトのルール（このドキュメント自体）をAIに覚えさせる</li>
<li><code>/my-commit</code>: Gitコミット時のお作法をAIに任せる</li>
<li><code>/my-review</code>: PRレビューをAIにサポートしてもらう</li>
<li><code>/issue-to-pr</code>: IssueからPRまでの流れを3フェーズで管理</li>
<li><code>/learn-bigquery</code>, <code>/learn-dbt</code>, <code>/learn-databricks</code>, <code>/learn-jupyter-notebook</code>: 技術学習用コマンド</li>
<li><code>/restricted-bigquery-dbt-environment</code>: 制約付き環境での開発をサポート</li>
<li><code>/summarize-reviews</code>: レビューコメントを要約</li>
</ul>
<p>これらのコマンドはdotfilesで管理していて、どのプロジェクトでもすぐに使える状態にしています。</p>
</section>
<section id="vimプラグイン開発" class="level4">
<h4 class="anchored" data-anchor-id="vimプラグイン開発">3.1.2. Vimプラグイン開発</h4>
<p>VimからAI CLIを快適に操作するためのプラグインを開発しました。</p>
<ul>
<li><a href="https://github.com/i9wa4/ddc-source-slash-commands">ddc-source-slash-commands</a>: スラッシュコマンドをVimで補完できるようにする</li>
<li><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli">vim-tmux-send-to-ai-cli</a>: Vimからtmux経由でAI CLIにプロンプトを送る</li>
</ul>
<p>この2つのプラグインのおかげで、Vimで書いたコードやテキストをそのままAI CLIに送れるようになりました。</p>
</section>
</section>
<section id="ターミナル環境の最適化" class="level3">
<h3 class="anchored" data-anchor-id="ターミナル環境の最適化">3.2. ターミナル環境の最適化</h3>
<p>Vim + tmux + Alacritty + Zsh + AI CLI を組み合わせた統合環境を構築しました。</p>
<p>テーマの自動切り替え、透明度制御、カラースキームの統一など、細かいところまでこだわってスクリプトで自動化しています。</p>
<p>正直やりすぎ感はありますが、自分の環境を極限まで最適化するのは楽しいですね。dotfilesに1,000コミット以上している理由がこれです。</p>
</section>
<section id="データエンジニアリング実務" class="level3">
<h3 class="anchored" data-anchor-id="データエンジニアリング実務">3.3. データエンジニアリング実務</h3>
<p>仕事ではdbt、Databricks、BigQueryを使ったデータ基盤開発に取り組んでいました。</p>
<p>主な成果:</p>
<ul>
<li>dbt incremental モデルの最適化とベストプラクティスの確立</li>
<li>Devcontainer環境の構築による開発環境の標準化</li>
<li>Databricks Connect を使ったローカル開発フローの確立</li>
<li>BigQuery + dbtのパフォーマンスチューニング</li>
</ul>
<p>これらの知見は技術記事として公開していて、特にdbt関連の記事は多くの人に読んでもらえているようです。</p>
</section>
<section id="技術記事執筆" class="level3">
<h3 class="anchored" data-anchor-id="技術記事執筆">3.4. 技術記事執筆</h3>
<p>2025年は42本の記事を書きました（ブログ37本、スライド5本）。主な記事をいくつか挙げます。</p>
<ul>
<li><a href="../blog/2025-11-19-vim-tmux-orchestrating-ai-coding-agents.html">Vim と tmux で複数の AI エージェントを操作する</a></li>
<li><a href="../blog/2025-07-14-optimize-your-teminal-for-claude-code.html">個人的ターミナル最適化 for Claude Code</a></li>
<li><a href="../blog/2025-09-14-codex-cli-config-management.html">Codex CLI の設定ファイルを dotfiles で管理する</a></li>
<li><a href="../blog/2025-09-28-bigquery-dbt-incremental-intro.html">BigQuery で dbt incremental モデルのパフォーマンス改善をしてみた</a></li>
<li><a href="../blog/2025-07-14-my-first-vim-contribution.html">Vimへの初コントリビューションの経緯と学び</a></li>
</ul>
</section>
<section id="vimエコシステムへの貢献" class="level3">
<h3 class="anchored" data-anchor-id="vimエコシステムへの貢献">3.5. Vimエコシステムへの貢献</h3>
<p>2025年はVimプラグイン開発にも力を入れました。</p>
<p>開発・更新したプラグイン:</p>
<ul>
<li><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli">vim-tmux-send-to-ai-cli</a>: Vimからtmux経由でAI CLIにプロンプトを送る</li>
<li><a href="https://github.com/i9wa4/ddc-source-slash-commands">ddc-source-slash-commands</a>: スラッシュコマンドの補完</li>
<li><a href="https://github.com/i9wa4/vim-dbt-jump2def">vim-dbt-jump2def</a>: dbtプロジェクトで定義ジャンプ</li>
<li><a href="https://github.com/i9wa4/vim-markdown-number-header">vim-markdown-number-header</a>: Markdownの見出し番号付け</li>
</ul>
<p>特に嬉しかったのは6月にVim本体へ初めてコントリビューションできたことです。小さな修正でしたが、長年使ってきたVimに貢献できたのは感慨深いものがありました。</p>
</section>
<section id="terraformとインフラコード" class="level3">
<h3 class="anchored" data-anchor-id="terraformとインフラコード">3.6. Terraformとインフラコード</h3>
<p>3月から6月にかけて、<a href="https://github.com/i9wa4/terraform-mono-repo">terraform-mono-repo</a>でTerraformの勉強に力を入れていました。</p>
<p>特に5月から6月にかけてはMCP（Model Context Protocol）のLambda実装に集中していて、VPC構成やECRへのイメージpush、GitHub Actionsとの連携など、かなり作り込みました。</p>
<p>結局実務で使う機会がなかったので現在は中断していますが、この経験はインフラコードへの理解を深めるのに役立ちました。</p>
</section>
<section id="その他の実験プロジェクト" class="level3">
<h3 class="anchored" data-anchor-id="その他の実験プロジェクト">3.7. その他の実験プロジェクト</h3>
<p>小規模な実験プロジェクトもいくつか動かしていました。</p>
<ul>
<li>各種hands-onリポジトリ: go, nix, mcp, ghaなど、技術検証用のプロジェクト</li>
<li>mcp-databricks-server: Databricks MCP Serverの試作</li>
</ul>
<p>これらは成果物としては小さいですが、新しい技術を試す場として活用していました。</p>
</section>
</section>
<section id="振り返ってみて" class="level2">
<h2 class="anchored" data-anchor-id="振り返ってみて">4. 振り返ってみて</h2>
<section id="年の成果" class="level3">
<h3 class="anchored" data-anchor-id="年の成果">4.1. 2025年の成果</h3>
<p>2025年はAI駆動開発という新しい領域に本格的に取り組んだ年でした。</p>
<p>主な成果:</p>
<ul>
<li>Vimプラグイン: 4本開発・更新</li>
<li>Vim本体への初コントリビューション</li>
<li>Claude Code カスタムスラッシュコマンド: 10本以上</li>
<li>技術記事: 42本執筆（ブログ37本、スライド5本）</li>
<li>dotfilesコミット: 1,058回（月平均96回）</li>
<li>総コミット数: 2,106回（個人リポジトリ）</li>
</ul>
<p>Claude CodeとCodex CLIを軸にした開発環境を構築し、「ツールを使う側」から「ツールを作る側」にもなれた1年です。</p>
</section>
<section id="学びと試行錯誤" class="level3">
<h3 class="anchored" data-anchor-id="学びと試行錯誤">4.2. 学びと試行錯誤</h3>
<p>すべてが成功したわけではありません。Terraformモノリポは実務で使う機会がなく中断しましたし、MCP Lambda実装も結局本番投入には至りませんでした。</p>
<p>でも、それも含めて色々なことに挑戦できた充実した年でした。失敗から学ぶことも多く、次に活かせる経験になっています。</p>
</section>
<section id="これから" class="level3">
<h3 class="anchored" data-anchor-id="これから">4.3. これから</h3>
<p>AI駆動開発環境はまだまだ改善の余地があります。特にVim + tmux + AI CLIの連携をさらに洗練させたいと考えています。</p>
<p>データエンジニアリング領域でも、いくつか新しい実験を始めています。詳細はまた別の機会に。</p>
<p>2026年も新しい技術に挑戦しながら、学んだことを記事にして共有していきます。この習慣は続けていきたいですね。</p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-11-23-github-activity-2025-review.html&amp;text=2025%E5%B9%B4%E3%81%AEGitHub%E6%B4%BB%E5%8B%95%E3%82%92%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8B%EF%BC%9AAI%E9%A7%86%E5%8B%95%E9%96%8B%E7%99%BA%E3%81%AE%E5%B9%B4%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=2025%E5%B9%B4%E3%81%AEGitHub%E6%B4%BB%E5%8B%95%E3%82%92%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8B%EF%BC%9AAI%E9%A7%86%E5%8B%95%E9%96%8B%E7%99%BA%E3%81%AE%E5%B9%B4%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-11-23-github-activity-2025-review.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-11-23-github-activity-2025-review.html&amp;title=2025%E5%B9%B4%E3%81%AEGitHub%E6%B4%BB%E5%8B%95%E3%82%92%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8B%EF%BC%9AAI%E9%A7%86%E5%8B%95%E9%96%8B%E7%99%BA%E3%81%AE%E5%B9%B4%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>
</section>

 ]]></description>
  <category>blog</category>
  <category>diary</category>
  <guid>https://i9wa4.github.io/blog/2025-11-23-github-activity-2025-review.html</guid>
  <pubDate>Sun, 23 Nov 2025 06:31:03 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Vim と tmux で複数の AI エージェントを操作する</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-11-19-vim-tmux-orchestrating-ai-coding-agents.html</link>
  <description><![CDATA[ 





<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>この記事は <a href="https://vim-jp.org/ekiden/">Vim 駅伝</a> の 2025-11-19 の記事です。</p>
<p>前回は 2025-11-17 ぺりー さんの <a href="https://satorunooshie.medium.com/designing-repeatable-edits-8ec574ff0acd">ドットコマンドで再現可能な編集を設計する | Medium</a> でした。</p>
</div>
</div>
<section id="aiエージェント並行実行の現在地-2025年11月時点" class="level2">
<h2 class="anchored" data-anchor-id="aiエージェント並行実行の現在地-2025年11月時点">1. AIエージェント並行実行の現在地 (2025年11月時点)</h2>
<p>Claude Code や Codex CLI を1つのタスクに対して複数起動させると便利ですが取り回しが難しいですよね。</p>
<p>この需要に応えたのが2025年10月29日にリリースされた Cursor 2.0 でした。</p>
<blockquote class="blockquote">
<p><strong>マルチエージェント</strong></p>
<p>新しいエディタでエージェントを管理。サイドバーでエージェントとプランを一覧・操作できます。</p>
<p>1つのプロンプトで最大8つのエージェントを並列実行できます。ファイル競合を防ぐために、git worktree またはリモートマシンを使用します。各エージェントは、コードベースの独立したコピー上で個別に動作します。</p>
</blockquote>
<p><a href="https://cursor.com/changelog/2-0">新しいコード生成モデルとエージェントインターフェース · Cursor</a></p>
<p>これはかなり強力な機能追加ですが今のところ Cursor 以外で同様の体験を得るのは難しいです。</p>
<p>Vim と tmux で似たような操作を実現させるアイデアを共有するので、ターミナルでの AI エージェント操作についても盛り上げていきましょう！</p>
</section>
<section id="対象読者" class="level2">
<h2 class="anchored" data-anchor-id="対象読者">2. 対象読者</h2>
<ul>
<li>必須
<ul>
<li>Vim &amp; tmux を利用できる方</li>
</ul></li>
<li>推奨
<ul>
<li>Vim 補完プラグイン <a href="https://github.com/Shougo/ddc.vim">ddc.vim</a> を利用できる方</li>
</ul></li>
</ul>
</section>
<section id="vim-と-tmux-による複数のaiエージェント操作実演" class="level2">
<h2 class="anchored" data-anchor-id="vim-と-tmux-による複数のaiエージェント操作実演">3. Vim と tmux による複数のAIエージェント操作実演</h2>
<p>構築後の操作画面を先にお見せします。Claude Code <em>1 と Codex CLI</em> 2 に同じプロンプトを送っている様子です。</p>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/AyE-ruGOGCc>" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
</section>
<section id="利用ツール等の解説" class="level2">
<h2 class="anchored" data-anchor-id="利用ツール等の解説">4. 利用ツール等の解説</h2>
<section id="zeno.zsh" class="level3">
<h3 class="anchored" data-anchor-id="zeno.zsh">4.1. zeno.zsh</h3>
<p><a href="https://github.com/yuki-yano/zeno.zsh" class="uri">https://github.com/yuki-yano/zeno.zsh</a></p>
<p>動画の冒頭で vde-layout 起動時に利用している zeno.zsh のスニペット設定例を共有します。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>~/.config/zeno/config.yml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" data-filename="~/.config/zeno/config.yml" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">snippets</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb1-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> (vde-layout) dev</span></span>
<span id="cb1-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">keyword</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> vd</span></span>
<span id="cb1-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">snippet</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb1-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      vde-layout dev</span></span>
<span id="cb1-6"></span>
<span id="cb1-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> (vde-layout) review</span></span>
<span id="cb1-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">keyword</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> vr</span></span>
<span id="cb1-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">snippet</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb1-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      vde-layout review</span></span></code></pre></div></div>
</div>
</section>
<section id="vde-layout" class="level3">
<h3 class="anchored" data-anchor-id="vde-layout">4.2. vde-layout</h3>
<p><a href="https://github.com/yuki-yano/vde-layout" class="uri">https://github.com/yuki-yano/vde-layout</a></p>
<p><code>vde-layout</code> コマンドを実行することで予め設定した tmux レイアウトを適用できます。</p>
<p>設定ファイル例は以下となります。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>~/.config/vde/layout.yml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" data-filename="~/.config/vde/layout.yml" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">presets</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">review</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> review</span></span>
<span id="cb2-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">description</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> review</span></span>
<span id="cb2-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">windowMode</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> current-window</span></span>
<span id="cb2-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">layout</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">type</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> horizontal</span></span>
<span id="cb2-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ratio</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb2-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">panes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">type</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> vertical</span></span>
<span id="cb2-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ratio</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb2-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">panes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">            </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> editor</span></span>
<span id="cb2-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">              </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">command</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> vim -c "execute 'edit' '.i9wa4/temp.md'-&gt;expand()"</span></span>
<span id="cb2-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">              </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">focus</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb2-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">            </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> codex</span></span>
<span id="cb2-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">              </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">command</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> codex --yolo</span></span>
<span id="cb2-18"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">type</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> vertical</span></span>
<span id="cb2-19"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ratio</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">,</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb2-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">panes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">            </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> claude</span></span>
<span id="cb2-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">              </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">command</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> claude --dangerously-skip-permissions</span></span>
<span id="cb2-23"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">            </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> codex</span></span>
<span id="cb2-24"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">              </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">command</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> codex --yolo</span></span></code></pre></div></div>
</div>
</section>
<section id="ddc-source-slash-commands" class="level3">
<h3 class="anchored" data-anchor-id="ddc-source-slash-commands">4.3. ddc-source-slash-commands</h3>
<p><a href="https://github.com/i9wa4/ddc-source-slash-commands" class="uri">https://github.com/i9wa4/ddc-source-slash-commands</a></p>
<p>Vim 補完プラグイン <a href="https://github.com/Shougo/ddc.vim">ddc.vim</a> のソースプラグインです。</p>
<p>カスタムスラッシュコマンドを補完候補として表示するために利用します。</p>
<p>カスタムスラッシュコマンドに対応していない AI エージェントの場合はファイルのフルパスを送信すれば問題ないです。</p>
<p>柔軟にプロンプトを調整できるのが Vim で操作するメリットですね。</p>
</section>
<section id="vim-tmux-send-to-ai-cli" class="level3">
<h3 class="anchored" data-anchor-id="vim-tmux-send-to-ai-cli">4.4. vim-tmux-send-to-ai-cli</h3>
<p><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli" class="uri">https://github.com/i9wa4/vim-tmux-send-to-ai-cli</a></p>
<p>Vim から tmux 経由で AI エージェント起動中のペインにプロンプトを送信するためのプラグインです。</p>
<p>送信先：</p>
<ul>
<li>(デフォルト) 同一ウインドウの中で最も小さい番号のペインに送信</li>
<li>同一ウインドウの特定のペインに送信</li>
<li>同一ウインドウの全てのペインに送信</li>
</ul>
<p>送信内容：</p>
<ul>
<li>カーソル行</li>
<li>段落</li>
<li>選択範囲</li>
<li>ファイル全体</li>
<li>行範囲 (例: 10～20行目)</li>
</ul>
</section>
<section id="ペイン間の競合を回避するプロンプト" class="level3">
<h3 class="anchored" data-anchor-id="ペイン間の競合を回避するプロンプト">4.5. ペイン間の競合を回避するプロンプト</h3>
<p>複数の AI エージェントを並行実行する際、中間生成するドキュメントの競合を避けるために <code>.i9wa4/</code> ディレクトリ (私の環境で global gitignore されているディレクトリ) と tmux ペイン番号を活用します。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb3-1"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span>生成するファイル名は <span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`YYYYMMDD-pN-xxxx.md`</span> の形式とする</span>
<span id="cb3-2"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    - </span><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`YYYYMMDD`</span>: 日付 (例: <span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`20251105`</span>)</span>
<span id="cb3-3"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    - </span><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`pN`</span>: tmux ペイン番号 (例: <span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`p0`</span>, <span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`p1`</span>, <span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`p2`</span>)</span>
<span id="cb3-4"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    - </span><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`xxxx`</span>: ファイルの目的 (例: <span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`review`</span>, <span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`plan`</span>, <span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`memo`</span>)</span>
<span id="cb3-5"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">    - </span>例: <span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`.i9wa4/20251105-p2-review.md`</span></span>
<span id="cb3-6"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span>tmux ペイン番号Nは <span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`tmux display-message -p -t "$${TMUX_PANE}" '#{pane_index}'`</span> で取得する</span></code></pre></div></div>
<p>このプロンプトによって AI エージェントが生成する中間ファイルが他ペインと競合しなくなります。</p>
<p>ちなみに global gitignore なディレクトリについては以下のポストを参考にしました。</p>
<blockquote class="twitter-tweet blockquote">
<p lang="ja" dir="ltr">
自分の Git 環境ではグローバルな gitignore で .mizchi/* が無視されており、どうもならんときはここに .mizchi/run.sh などが置かれています <a href="https://t.co/b7r4omHnPs">https://t.co/b7r4omHnPs</a>
</p>
— mizchi (<span class="citation" data-cites="mizchi">@mizchi</span>) <a href="https://twitter.com/mizchi/status/1914543131888066561?ref_src=twsrc%5Etfw">April 22, 2025</a>
</blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</section>
</section>
<section id="おわりに" class="level2">
<h2 class="anchored" data-anchor-id="おわりに">5. おわりに</h2>
<p>足りない部分を自作して補うことで Vim と tmux で複数の AI エージェントを操作するアイデアを共有しました。</p>
<p>今後もターミナルでの AI エージェント操作が盛り上がっていくことを願っています！</p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-11-19-vim-tmux-orchestrating-ai-coding-agents.html&amp;text=Vim%20%E3%81%A8%20tmux%20%E3%81%A7%E8%A4%87%E6%95%B0%E3%81%AE%20AI%20%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E6%93%8D%E4%BD%9C%E3%81%99%E3%82%8B%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=Vim%20%E3%81%A8%20tmux%20%E3%81%A7%E8%A4%87%E6%95%B0%E3%81%AE%20AI%20%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E6%93%8D%E4%BD%9C%E3%81%99%E3%82%8B%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-11-19-vim-tmux-orchestrating-ai-coding-agents.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-11-19-vim-tmux-orchestrating-ai-coding-agents.html&amp;title=Vim%20%E3%81%A8%20tmux%20%E3%81%A7%E8%A4%87%E6%95%B0%E3%81%AE%20AI%20%E3%82%A8%E3%83%BC%E3%82%B8%E3%82%A7%E3%83%B3%E3%83%88%E3%82%92%E6%93%8D%E4%BD%9C%E3%81%99%E3%82%8B%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>tech-vim</category>
  <category>vim-jp</category>
  <guid>https://i9wa4.github.io/blog/2025-11-19-vim-tmux-orchestrating-ai-coding-agents.html</guid>
  <pubDate>Tue, 18 Nov 2025 15:00:00 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>BigQuery で dbt incremental モデルのパフォーマンス改善をしてみた</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-09-28-bigquery-dbt-incremental-intro.html</link>
  <description><![CDATA[ 





<section id="はじめに" class="level2">
<h2 class="anchored" data-anchor-id="はじめに">1. はじめに</h2>
<p>ログ同士を突き合わせる dbt モデルの dbt run 実行時間が1時間を超えていたため、BigQuery の特性を活かしつつ実行時間を40分短縮した流れを紹介します。対象はイミューターなログを扱うモデルで、過去データの更新を考慮しない前提を置ける構造でした。</p>
</section>
<section id="当初の課題" class="level2">
<h2 class="anchored" data-anchor-id="当初の課題">2. 当初の課題</h2>
<ul>
<li>incremental_strategy が merge で、ターゲットテーブル全体を走査していた</li>
<li>unique_key が15列と多く、結合条件が複雑であった</li>
<li>参照元テーブルが期間条件なしで FULL OUTER JOIN され、中間結果が肥大化していた</li>
</ul>
</section>
<section id="実施した改善策" class="level2">
<h2 class="anchored" data-anchor-id="実施した改善策">3. 実施した改善策</h2>
<section id="incremental_strategy-の切り替え" class="level3">
<h3 class="anchored" data-anchor-id="incremental_strategy-の切り替え">3.1. incremental_strategy の切り替え</h3>
<ul>
<li>merge から insert_overwrite へ変更し、対象パーティションのみを差し替えた</li>
</ul>
</section>
<section id="パーティションプルーニングの徹底" class="level3">
<h3 class="anchored" data-anchor-id="パーティションプルーニングの徹底">3.2. パーティションプルーニングの徹底</h3>
<ul>
<li>vars で渡した日付範囲を JOIN 前のフィルタで適用し、読み取り対象を日次で限定した</li>
<li>パーティション指定を日単位で明示化し、BigQuery のスキャン範囲を事前に制限した</li>
</ul>
</section>
<section id="重複除去ロジックの簡素化" class="level3">
<h3 class="anchored" data-anchor-id="重複除去ロジックの簡素化">3.3. 重複除去ロジックの簡素化</h3>
<ul>
<li>15列のunique_key指定を ROW_NUMBER() による決定的な重複除去に変更した</li>
<li>複雑なMERGE処理からシンプルな重複除去ロジックへ簡素化した</li>
</ul>
</section>
</section>
<section id="効果と検証" class="level2">
<h2 class="anchored" data-anchor-id="効果と検証">4. 効果と検証</h2>
<ul>
<li>dbt run 実行時間は1時間超えから40分短縮できた</li>
<li>同期間の surrogate key 単位で件数と代表値を比較し整合性を確認できた</li>
<li>修正前後で更新内容に差異がないことを確認できた (ログデータの特性上そうなる)</li>
</ul>
</section>
<section id="おわりに" class="level2">
<h2 class="anchored" data-anchor-id="おわりに">5. おわりに</h2>
<p>BigQuery の挙動と dbt の incremental モデルへの習熟度がまだまだなので引き続き学びを深めます。</p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-09-28-bigquery-dbt-incremental-intro.html&amp;text=BigQuery%20%E3%81%A7%20dbt%20incremental%20%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E6%94%B9%E5%96%84%E3%82%92%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=BigQuery%20%E3%81%A7%20dbt%20incremental%20%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E6%94%B9%E5%96%84%E3%82%92%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-09-28-bigquery-dbt-incremental-intro.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-09-28-bigquery-dbt-incremental-intro.html&amp;title=BigQuery%20%E3%81%A7%20dbt%20incremental%20%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E6%94%B9%E5%96%84%E3%82%92%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>tech-data</category>
  <guid>https://i9wa4.github.io/blog/2025-09-28-bigquery-dbt-incremental-intro.html</guid>
  <pubDate>Sun, 28 Sep 2025 12:38:33 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Codex CLI の設定ファイルを dotfiles で管理する</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-09-14-codex-cli-config-management.html</link>
  <description><![CDATA[ 





<p>Codex CLI を使い始めたのですが dotfiles 使いにとっては辛い部分があり距離を置いてしまっていました。</p>
<p>今回力技で設定ファイルを dotfiles で管理する方法を思いついたので紹介します。</p>
<section id="codex-cli-の設定ファイルについて" class="level2">
<h2 class="anchored" data-anchor-id="codex-cli-の設定ファイルについて">1. Codex CLI の設定ファイルについて</h2>
<p>Codex CLI の設定ファイルは <code>~/.config/codex/config.toml</code> です。</p>
<p>内容は例えば以下のような感じです。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb1-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[projects."</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">/Users/uma/ghq/github.com/i9wa4/dotfiles"</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb1-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">trust_level</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"trusted"</span></span></code></pre></div></div>
</section>
<section id="問題点" class="level2">
<h2 class="anchored" data-anchor-id="問題点">2. 問題点</h2>
<p><code>config.toml</code> にはフルパスが書かれるため複数のマシンで設定を管理するのが面倒です。</p>
<p>かつどのプロジェクトを信頼するかの設定もマシンごとに異なることが多いので <code>config.toml</code> をそのまま dotfiles で管理するのはイマイチと言えます。</p>
</section>
<section id="解決策" class="level2">
<h2 class="anchored" data-anchor-id="解決策">3. 解決策</h2>
<p>共通設定だけ dotfiles の管理対象とし、プロジェクト別の設定はスクリプトで生成してしまうというものです。</p>
<p>これで困ることはほとんどないでしょう！</p>
<section id="config.toml-の生成スクリプト" class="level3">
<h3 class="anchored" data-anchor-id="config.toml-の生成スクリプト">3.1. config.toml の生成スクリプト</h3>
<p>共通設定を <code>~/.config/codex/config.common.toml</code> に書いておき、プロジェクトごとの設定を自動生成して <code>config.toml</code> を生成させます。</p>
<p>※リポジトリを ghq で管理していることを前提としています。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>~/.config/codex/generate_config.sh</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" data-filename="~/.config/codex/generate_config.sh" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#!/usr/bin/env bash</span></span>
<span id="cb2-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-euo</span> pipefail</span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">GHQ_BASE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${HOME}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>/ghq/github.com</span>
<span id="cb2-5"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">COMMON</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"./config.common.toml"</span></span>
<span id="cb2-6"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">OUTPUT</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"./config.toml"</span></span>
<span id="cb2-7"></span>
<span id="cb2-8"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">cd</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dirname</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$0</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb2-9"></span>
<span id="cb2-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Copy common settings</span></span>
<span id="cb2-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cp</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-f</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${COMMON}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${OUTPUT}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb2-12"></span>
<span id="cb2-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add project-specific settings</span></span>
<span id="cb2-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">find</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${GHQ_BASE}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-maxdepth</span> 3 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-type</span> d <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-name</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".git"</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>/dev/null <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb2-15">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sed</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'s|\.git$||'</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb2-16">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb2-17">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">while</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">read</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-r</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">repo</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">do</span></span>
<span id="cb2-18">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[[</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-z</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${repo}</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]]</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">continue</span></span>
<span id="cb2-19">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb2-20"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">[projects.</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${repo}</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb2-21"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">trust_level = </span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">trusted</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\"</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb2-22">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">done</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&gt;</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${OUTPUT}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb2-23"></span>
<span id="cb2-24"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Generated: </span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${OUTPUT}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span></code></pre></div></div>
</div>
</section>
</section>
<section id="おわりに" class="level2">
<h2 class="anchored" data-anchor-id="おわりに">4. おわりに</h2>
<p>dotfiles で管理しづらいから Codex CLI と距離を置いていたみなさん、これで今日から使えるようになりましたよ！</p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-09-14-codex-cli-config-management.html&amp;text=Codex%20CLI%20%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%20dotfiles%20%E3%81%A7%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=Codex%20CLI%20%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%20dotfiles%20%E3%81%A7%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-09-14-codex-cli-config-management.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-09-14-codex-cli-config-management.html&amp;title=Codex%20CLI%20%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%20dotfiles%20%E3%81%A7%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>tech-ai</category>
  <guid>https://i9wa4.github.io/blog/2025-09-14-codex-cli-config-management.html</guid>
  <pubDate>Sun, 14 Sep 2025 12:55:32 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>2025年のアウトプットまとめ LAPRAS</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-09-02-activity.html</link>
  <description><![CDATA[ 





<p>2025年のアウトプットと参加イベントをふりかえると</p>
<p>アウトプットしたものや参加したイベントなどをまとめてみました。</p>
<section id="connpass" class="level2">
<h2 class="anchored" data-anchor-id="connpass">1. connpass</h2>
<ul>
<li>2025/09/29
<ul>
<li><a href="https://finatext.connpass.com/event/365995/">DataOps Night #8 ～スケーラブルでAI-Readyなデータ基盤の最前線～</a></li>
</ul></li>
<li>2025/07/29
<ul>
<li><a href="https://datayokocho.connpass.com/event/358114/">エンタメ業界のデータエンジニアリング最前線＃2 ～SEGA、DeNA</a></li>
</ul></li>
<li>2025/07/28
<ul>
<li><a href="https://findy.connpass.com/event/359455/">t-wadaさんに聞く！SQLアンチパターン第2版 - 全27章まとめて紹介！</a></li>
</ul></li>
<li>2025/07/18
<ul>
<li><a href="https://forkwell.connpass.com/event/357942/">祝30回！過去登壇者と振り返るデータエンジニアの技術とキャリアのこれまでとこれから</a></li>
</ul></li>
<li>2025/07/17
<ul>
<li><a href="https://findy.connpass.com/event/359987/">Claude Code Meetup</a></li>
</ul></li>
<li>2025/07/13
<ul>
<li><a href="https://supporterz-seminar.connpass.com/event/355775/">【！現地参加枠あり！】CoLab Conf（コラコン）【U35限定テックカンファレンス】</a></li>
</ul></li>
<li>2025/07/08
<ul>
<li><a href="https://aid.connpass.com/event/360017/">Claude Code Meetup Japan #1（Claude Code祭り！）</a></li>
</ul></li>
<li>2025/07/04
<ul>
<li><a href="https://pixiv.connpass.com/event/358285/">Data Modeling Night -「今」だからできる理論の実践事例 -</a></li>
</ul></li>
<li>2025/06/30
<ul>
<li><a href="https://cartaholdings.connpass.com/event/360380/">Claude Code Deep Dive</a></li>
</ul></li>
<li>2025/06/25
<ul>
<li><a href="https://scalar.connpass.com/event/356595/">Database Engineering Meetup #7: データエンジニアリング</a></li>
</ul></li>
<li>2025/06/24
<ul>
<li><a href="https://datayokocho.connpass.com/event/353850/">エンタメ業界のデータエンジニアリング最前線＃１　～GENDA、バンダイナムコセブンズ</a></li>
</ul></li>
<li>2025/06/20
<ul>
<li><a href="https://flexy.connpass.com/event/357244/">【SREキャリア最前線】AIと共に進化する！SREの新たな役割とキャリア設計</a></li>
</ul></li>
<li>2025/06/17
<ul>
<li><a href="https://findy.connpass.com/event/357707/">MCP導入における脅威モデリングのすゝめ</a></li>
</ul></li>
<li>2025/06/12
<ul>
<li><a href="https://classmethod.connpass.com/event/356615/">エンジニアのためのMCP勉強会 #2</a></li>
</ul></li>
<li>2025/06/06
<ul>
<li><a href="https://aiau.connpass.com/event/353531/">Cursor Meetup Tokyo</a></li>
</ul></li>
<li>2025/06/03
<ul>
<li><a href="https://forkwell.connpass.com/event/349495/">ITエンジニアの転職学 – “20代で年収800万円最速RTA”と“その罠”</a></li>
</ul></li>
<li>2025/06/02
<ul>
<li><a href="https://mlops.connpass.com/event/352150/">MCP Ops LT大会！！！</a></li>
</ul></li>
<li>2025/05/28
<ul>
<li><a href="https://explaza.connpass.com/event/354178/">Cursorで創作小説を書こう！の会【女オタ生成AI部/株式会社エクスプラザ 共催】</a></li>
</ul></li>
<li>2025/05/27
<ul>
<li><a href="https://finatext.connpass.com/event/350823/">DataOps Night #7</a></li>
</ul></li>
<li>2025/05/16
<ul>
<li><a href="https://forkwell.connpass.com/event/354289/">転職したらMCPサーバーだった件</a></li>
</ul></li>
<li>2025/05/14
<ul>
<li><a href="https://jedai.connpass.com/event/349260/">JEDAI Meetup! Databricks Apps特集 (ハイブリッド開催)</a></li>
</ul></li>
<li>2025/05/14
<ul>
<li><a href="https://findy.connpass.com/event/349580/">【技術選定を突き詰める】Online Conferenc​​e 2025</a></li>
</ul></li>
<li>2025/05/13
<ul>
<li><a href="https://forkwell.connpass.com/event/350515/">Cursor導入でログラス社の現場はどう変わったか - Forkwell AI Study #1</a></li>
</ul></li>
<li>2025/05/12
<ul>
<li><a href="https://itgtechacademy.connpass.com/event/350401/">「データマネジメント」その先へ〜進化するデータと組織戦略～</a></li>
</ul></li>
<li>2025/04/25
<ul>
<li><a href="https://findy.connpass.com/event/351644/">MCPでLLMはどう進化する？ 〜からあげさんに学ぶ、AI開発の最前線〜</a></li>
</ul></li>
<li>2025/04/25
<ul>
<li><a href="https://jedai.connpass.com/event/349457/">JEDAI in Osaka 2025 春 (オンサイト+オンライン)</a></li>
</ul></li>
<li>2025/04/24
<ul>
<li><a href="https://forkwell.connpass.com/event/351066/">Data Engineering Study #29 今だから学びたいDatabricks徹底活用術</a></li>
</ul></li>
<li>2025/04/10
<ul>
<li><a href="https://supporterz-seminar.connpass.com/event/347922/">データエンジニアの未来【サポーターズCoLab】</a></li>
</ul></li>
<li>2025/03/25
<ul>
<li><a href="https://findy-tools.connpass.com/event/347398/">ABEMAの事例とともに学ぶ！セマンティックレイヤーで変わるデータエンジニアリングの世界</a></li>
</ul></li>
<li>2025/03/21
<ul>
<li><a href="https://forkwell.connpass.com/event/346470/">ITエンジニアの転職学 ー 40歳へのカウントダウンとの向き合い方</a></li>
</ul></li>
<li>2025/02/27
<ul>
<li><a href="https://forkwell.connpass.com/event/339761/">Data Engineering Study #28 データ基盤のCI/CD</a></li>
</ul></li>
<li>2025/02/04
<ul>
<li><a href="https://datayokocho.connpass.com/event/343004/">金融業界のデータマネジメント最前線 #6</a></li>
</ul></li>
<li>2025/01/30
<ul>
<li><a href="https://datatech-jp.connpass.com/event/335207/">みんなの考えた最強のデータアーキテクチャ〜2025もやってきましょうSP！</a></li>
</ul></li>
<li>2025/01/27
<ul>
<li><a href="https://redbrick.connpass.com/event/341139/">レイクハウスって結局何なのっていいました？じゃあ真のレイクハウスをみせてやりますよ！</a></li>
</ul></li>
<li>2025/01/24
<ul>
<li><a href="https://findy-tools.connpass.com/event/341178/">JR西日本・ファーストリテイリング・ZOZOが語るビジネス要件を踏まえたデータ基盤の構築</a></li>
</ul></li>
<li>2025/01/20
<ul>
<li><a href="https://datatech-jp.connpass.com/event/337374/">datatech-jp Casual Talks #6</a></li>
</ul></li>
</ul>
</section>
<section id="blog等" class="level2">
<h2 class="anchored" data-anchor-id="blog等">2. Blog等</h2>
<ul>
<li>2025/08/23
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-08-23-diary.html">2025-08-23 日誌</a></li>
</ul></li>
<li>2025/07/28
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-07-28-article3-databricks-connect.html">Databricks Connect 実践編 - ローカルから Databricks コンピュートを利用</a></li>
</ul></li>
<li>2025/07/28
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-07-28-article2-python-env.html">Python 開発環境最適化編 - uv + pre-commit + GitHub Actions</a></li>
</ul></li>
<li>2025/07/28
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-07-28-article1-devcontainer.html">Claude Code 対応 Dev Container 環境構築編 - VS Code でもそれ以外でも</a></li>
</ul></li>
<li>2025/07/14
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-07-14-optimize-your-teminal-for-claude-code.html">個人的ターミナル最適化 for Claude Code</a></li>
</ul></li>
<li>2025/07/14
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-07-14-my-first-vim-contribution.html">Vimへの初コントリビューションの経緯と学び</a></li>
</ul></li>
<li>2025/06/20
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-06-20-vim-plugin-for-tmux-claude-code.html">tmux で Vim から Claude Code にテキストを送信するプラグインを作った</a></li>
</ul></li>
<li>2025/06/15
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-06-15-dbt-bigquery-auth.html">ローカル dbt で BigQuery への認証を行う</a></li>
</ul></li>
<li>2025/06/10
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-06-10-install-global-python-with-uv.html">uv で Python のグローバルインストールを行う</a></li>
</ul></li>
<li>2025/06/08
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-06-08-create-uv-venv-with-poetry-pyproject-toml.html">Poetry の pyproject.toml を使って uv で .venv を作成する</a></li>
</ul></li>
<li>2025/06/04
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-06-04-use-cmdbang-to-disable-lsp-formatting-on-save.html">Vim/Neovim の保存時の LSP フォーマットを :w! のときに無効化する方法</a></li>
</ul></li>
<li>2025/05/21
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-05-21-databricks-dashboard-github-operation.html">Databricks AI/BI ダッシュボードの Git 連携の運用方法</a></li>
</ul></li>
<li>2025/05/12
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-05-12-hands-on-lambda-ecr.html">AWS Lambda でコンテナイメージを実行する with Terraform &amp; GitHub Actions</a></li>
</ul></li>
<li>2025/05/10
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-05-10-bash-zsh-edit-and-execute-command.html">Bash/Zsh でコマンドをエディタで編集する</a></li>
</ul></li>
<li>2025/05/06
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-05-06-editorconfig-vim.html">今更ながら Vim に EditorConfig を導入しました</a></li>
</ul></li>
<li>2025/05/06
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-05-06-python-venv.html">Python venv インストール・更新スクリプトの供養</a></li>
</ul></li>
<li>2025/05/06
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-05-06-quarto-slides.html">Markdown ライクな Quarto でスライドを作成して GitHub Actions で HTML 出力する</a></li>
</ul></li>
<li>2025/05/04
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-05-04-tmux-zsh-git-status.html">tmux と Zsh に Git リポジトリのステータスを表示する</a></li>
</ul></li>
<li>2025/04/29
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-04-29-mcp-databricks-server-service-principal.html">Databricks MCP Server を Service Principal 認証対応させた</a></li>
</ul></li>
<li>2025/04/20
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-04-20-lefthook.html">lefthook 設定の供養</a></li>
</ul></li>
<li>2025/04/11
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-04-11-mcp-hands-on.html">MCP に入門した</a></li>
</ul></li>
<li>2025/04/10
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-04-10-paid-for-gemini-api.html">Gemini API に課金した</a></li>
</ul></li>
<li>2025/04/10
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-04-10-paid-for-gemini.html">Gemini に課金した</a></li>
</ul></li>
<li>2025/04/07
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-04-07-bookmarks.html">個人的ブックマーク</a></li>
</ul></li>
<li>2025/04/02
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-04-02-looking-back-on-2024.html">2024年度を振り返る</a></li>
</ul></li>
<li>2025/04/01
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-04-01-try-aider.html">Aider を使ってみる</a></li>
</ul></li>
<li>2025/02/21
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-02-21-plain-sql.html">見やすい SQL を書くための Tips</a></li>
</ul></li>
<li>2025/02/20
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-02-20-vim-plugin-idea.html">最近の Vim プラグイン開発のアイデア</a></li>
</ul></li>
<li>2025/01/31
<ul>
<li><a href="https://i9wa4.github.io/blog/2025-01-31-get-instagram-api-access-token.html">Instagram API のアクセストークンを取得する</a></li>
</ul></li>
</ul>
</section>
<section id="zenn" class="level2">
<h2 class="anchored" data-anchor-id="zenn">3. Zenn</h2>
<ul>
<li>2025/08/06
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-08-06-databricks-connect-practice">Databricks Connect 実践編 - ローカルから Databricks コンピュートを利用</a></li>
</ul></li>
<li>2025/08/06
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-08-06-python-env-optimization">Python 開発環境最適化編 - uv + pre-commit + GitHub Actions</a></li>
</ul></li>
<li>2025/08/06
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-08-06-devcontainer-claude-code">Claude Code 対応 Dev Container 環境構築編 - VS Code でもそれ以外でも</a></li>
</ul></li>
<li>2025/07/16
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-07-16-optimize-your-terminal-for-claude-code">個人的ターミナル最適化 for Claude Code</a></li>
</ul></li>
<li>2025/05/06
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-05-06-quarto-slides">Markdown ライクな Quarto でスライドを作成して GitHub Actions で HTML 出力する</a></li>
</ul></li>
<li>2025/05/04
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-05-04-tmux-zsh-git-status">tmux と Zsh に Git リポジトリのステータスを表示する</a></li>
</ul></li>
<li>2025/04/29
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-04-29-mcp-databricks-server-service-principal">Databricks MCP Server を Service Principal 認証対応させた</a></li>
</ul></li>
<li>2025/04/16
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-04-16-issue-with-python-libraries">Python でありがちな本体バージョンとライブラリバージョンの不整合の例</a></li>
</ul></li>
<li>2025/04/05
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-04-05-weekly-report-prompt-for-devin">Devin 週報作成用プロンプト</a></li>
</ul></li>
<li>2025/04/05
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-04-05-weekly-report-by-devin">Devin に週報を書いてもらった</a></li>
</ul></li>
<li>2025/03/28
<ul>
<li><a href="https://zenn.dev/i9wa4/articles/2025-03-28-display-notion-relation-property">Notion データベースでリレーション元のプロパティを表示する (2025年3月28日時点)</a></li>
</ul></li>
</ul>
</section>
<section id="pr作成" class="level2">
<h2 class="anchored" data-anchor-id="pr作成">4. PR作成</h2>
<ul>
<li>2025/08/06
<ul>
<li><a href="https://github.com/i9wa4/zenn-i9wa4/pulls?q=is:pr+author:i9wa4">i9wa4/zenn-i9wa4</a></li>
</ul></li>
<li>2025/07/28
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/07/16
<ul>
<li><a href="https://github.com/i9wa4/zenn-i9wa4/pulls?q=is:pr+author:i9wa4">i9wa4/zenn-i9wa4</a></li>
</ul></li>
<li>2025/07/14
<ul>
<li><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli/pulls?q=is:pr+author:i9wa4">i9wa4/vim-tmux-send-to-ai-cli</a></li>
</ul></li>
<li>2025/07/14
<ul>
<li><a href="https://github.com/i9wa4/vim-markdown-number-header/pulls?q=is:pr+author:i9wa4">i9wa4/vim-markdown-number-header</a></li>
</ul></li>
<li>2025/07/14
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/07/14
<ul>
<li><a href="https://github.com/i9wa4/dotfiles/pulls?q=is:pr+author:i9wa4">i9wa4/dotfiles</a></li>
</ul></li>
<li>2025/07/13
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/06/26
<ul>
<li><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli/pulls?q=is:pr+author:i9wa4">i9wa4/vim-tmux-send-to-ai-cli</a></li>
</ul></li>
<li>2025/06/25
<ul>
<li><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli/pulls?q=is:pr+author:i9wa4">i9wa4/vim-tmux-send-to-ai-cli</a></li>
</ul></li>
<li>2025/06/19
<ul>
<li><a href="https://github.com/i9wa4/mcp-databricks-server/pulls?q=is:pr+author:i9wa4">i9wa4/mcp-databricks-server</a></li>
</ul></li>
<li>2025/05/19
<ul>
<li><a href="https://github.com/i9wa4/terraform-mono-repo/pulls?q=is:pr+author:i9wa4">i9wa4/terraform-mono-repo</a></li>
</ul></li>
<li>2025/05/18
<ul>
<li><a href="https://github.com/i9wa4/terraform-mono-repo/pulls?q=is:pr+author:i9wa4">i9wa4/terraform-mono-repo</a></li>
</ul></li>
<li>2025/05/10
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/05/06
<ul>
<li><a href="https://github.com/i9wa4/zenn-i9wa4/pulls?q=is:pr+author:i9wa4">i9wa4/zenn-i9wa4</a></li>
</ul></li>
<li>2025/05/06
<ul>
<li><a href="https://github.com/i9wa4/vim-markdown-number-header/pulls?q=is:pr+author:i9wa4">i9wa4/vim-markdown-number-header</a></li>
</ul></li>
<li>2025/05/04
<ul>
<li><a href="https://github.com/i9wa4/zenn-i9wa4/pulls?q=is:pr+author:i9wa4">i9wa4/zenn-i9wa4</a></li>
</ul></li>
<li>2025/04/29
<ul>
<li><a href="https://github.com/i9wa4/zenn-i9wa4/pulls?q=is:pr+author:i9wa4">i9wa4/zenn-i9wa4</a></li>
</ul></li>
<li>2025/04/29
<ul>
<li><a href="https://github.com/i9wa4/mcp-databricks-server/pulls?q=is:pr+author:i9wa4">i9wa4/mcp-databricks-server</a></li>
</ul></li>
<li>2025/04/16
<ul>
<li><a href="https://github.com/i9wa4/zenn-i9wa4/pulls?q=is:pr+author:i9wa4">i9wa4/zenn-i9wa4</a></li>
</ul></li>
<li>2025/04/08
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/04/05
<ul>
<li><a href="https://github.com/i9wa4/zenn-i9wa4/pulls?q=is:pr+author:i9wa4">i9wa4/zenn-i9wa4</a></li>
</ul></li>
<li>2025/04/02
<ul>
<li><a href="https://github.com/i9wa4/i9wa4.github.io/pulls?q=is:pr+author:i9wa4">i9wa4/i9wa4.github.io</a></li>
</ul></li>
<li>2025/04/01
<ul>
<li><a href="https://github.com/i9wa4/vim-dbt-jump2def/pulls?q=is:pr+author:i9wa4">i9wa4/vim-dbt-jump2def</a></li>
</ul></li>
<li>2025/03/31
<ul>
<li><a href="https://github.com/i9wa4/vim-dbt-jump2def/pulls?q=is:pr+author:i9wa4">i9wa4/vim-dbt-jump2def</a></li>
</ul></li>
<li>2025/03/28
<ul>
<li><a href="https://github.com/i9wa4/zenn-i9wa4/pulls?q=is:pr+author:i9wa4">i9wa4/zenn-i9wa4</a></li>
</ul></li>
<li>2025/03/15
<ul>
<li><a href="https://github.com/i9wa4/vim-markdown-number-header/pulls?q=is:pr+author:i9wa4">i9wa4/vim-markdown-number-header</a></li>
</ul></li>
<li>2025/03/15
<ul>
<li><a href="https://github.com/i9wa4/vim-dbt-jump2def/pulls?q=is:pr+author:i9wa4">i9wa4/vim-dbt-jump2def</a></li>
</ul></li>
</ul>
</section>
<section id="リポジトリ作成" class="level2">
<h2 class="anchored" data-anchor-id="リポジトリ作成">5. リポジトリ作成</h2>
<ul>
<li>2025/06/20
<ul>
<li><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli">i9wa4/vim-tmux-send-to-ai-cli</a></li>
</ul></li>
<li>2025/05/03
<ul>
<li><a href="https://github.com/i9wa4/quarto-slides">i9wa4/quarto-slides</a></li>
</ul></li>
<li>2025/04/29
<ul>
<li><a href="https://github.com/i9wa4/mcp-databricks-server">i9wa4/mcp-databricks-server</a></li>
</ul></li>
<li>2025/04/10
<ul>
<li><a href="https://github.com/i9wa4/mcp-hands-on">i9wa4/mcp-hands-on</a></li>
</ul></li>
<li>2025/03/23
<ul>
<li><a href="https://github.com/i9wa4/terraform-mono-repo">i9wa4/terraform-mono-repo</a></li>
</ul></li>
<li>2025/02/06
<ul>
<li><a href="https://github.com/i9wa4/databricks-notebook-test">i9wa4/databricks-notebook-test</a></li>
</ul></li>
</ul>
<p><a href="https://lapras.com/" title="LAPRASポートフォリオはこちらから">LAPRASポートフォリオはこちらから</a></p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-09-02-activity.html&amp;text=2025%E5%B9%B4%E3%81%AE%E3%82%A2%E3%82%A6%E3%83%88%E3%83%97%E3%83%83%E3%83%88%E3%81%BE%E3%81%A8%E3%82%81%20LAPRAS%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=2025%E5%B9%B4%E3%81%AE%E3%82%A2%E3%82%A6%E3%83%88%E3%83%97%E3%83%83%E3%83%88%E3%81%BE%E3%81%A8%E3%82%81%20LAPRAS%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-09-02-activity.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-09-02-activity.html&amp;title=2025%E5%B9%B4%E3%81%AE%E3%82%A2%E3%82%A6%E3%83%88%E3%83%97%E3%83%83%E3%83%88%E3%81%BE%E3%81%A8%E3%82%81%20LAPRAS%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>diary</category>
  <guid>https://i9wa4.github.io/blog/2025-09-02-activity.html</guid>
  <pubDate>Tue, 02 Sep 2025 00:25:52 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>2025-08-23 日誌</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-08-23-diary.html</link>
  <description><![CDATA[ 





<p>毎日書いているような顔してますが初めての日誌です</p>
<section id="最近考えていること" class="level2">
<h2 class="anchored" data-anchor-id="最近考えていること">1. 最近考えていること</h2>
<p>色々と忙しくなり上手く回ってない感があり自己肯定感が下がっています。</p>
<p>が、下記のように最近新しく始めたことがちゃんと結構あって案外悪くないかも！</p>
</section>
<section id="最近新しく始めたこと" class="level2">
<h2 class="anchored" data-anchor-id="最近新しく始めたこと">2. 最近新しく始めたこと</h2>
<p>刺激を求めると色々好転する感覚があるので元々保守的でインドアですが頑張ってます。</p>
<p>ここ1-2ヶ月で新しく始めたこと</p>
<ul>
<li>馴染みのない技術要素 (CloudFormation, Datadog, AWS のネットワーク周り) に触れてみた</li>
<li>チームメンバーへのタスク切り出し・進捗管理を本格的にやっている</li>
<li>社内の飲みたい人集めて飲み会開いた</li>
<li>他部署の定例に勝手に毎週参加して居座る</li>
<li>半分仕事だけどデータ界隈の交流を増やしてみた</li>
<li>エンジニア友達 <a href="https://x.com/YKirin0418"><span class="citation" data-cites="YKirin0418">@YKirin0418</span></a> と初対面 &amp; サシ飲みした</li>
</ul>
</section>
<section id="副業ちゃんとやれてそう" class="level2">
<h2 class="anchored" data-anchor-id="副業ちゃんとやれてそう">3. 副業ちゃんとやれてそう</h2>
<p>6月から PIVOT の業務委託を始めていました。</p>
<p>これが副業デビューです。</p>
<p>最初はドメイン知識や開発環境面で苦戦していましたが徐々にシュッっと貢献する動きができるようになってきました！</p>
<p>自分のもつ経験やスキルを積極的に提供していければと思っています。</p>
<p>やっぱり自分の好きなプロダクトに関わるのは楽しいです。</p>
</section>
<section id="直近やってみたいこと" class="level2">
<h2 class="anchored" data-anchor-id="直近やってみたいこと">4. 直近やってみたいこと</h2>
<p>やる時間は無いだろうなと思いつつも書くだけ書いておきます。</p>
<p>Ubuntu に Docker Compose で Minecraft 統合版サーバーを立てているのですが、Java 版に切り替えて GeyserMC 対応をしたい！</p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-08-23-diary.html&amp;text=2025-08-23%20%E6%97%A5%E8%AA%8C%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=2025-08-23%20%E6%97%A5%E8%AA%8C%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-08-23-diary.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-08-23-diary.html&amp;title=2025-08-23%20%E6%97%A5%E8%AA%8C%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>diary</category>
  <guid>https://i9wa4.github.io/blog/2025-08-23-diary.html</guid>
  <pubDate>Sat, 23 Aug 2025 14:59:20 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Databricks Connect 実践編 ― ローカルから Databricks コンピュートを利用</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-07-28-article3-databricks-connect.html</link>
  <description><![CDATA[ 





<p>本記事は3部構成の3本目です。</p>
<ol type="1">
<li><a href="../blog/2025-07-28-article1-devcontainer.html">Claude Code 対応 Dev Container 環境構築編 - VS Code でもそれ以外でも</a></li>
<li><a href="../blog/2025-07-28-article2-python-env.html">Python 開発環境最適化編 - uv + pre-commit + GitHub Actions</a></li>
<li><a href="../blog/2025-07-28-article3-databricks-connect.html">Databricks Connect 実践編 - ローカルから Databricks コンピュートを利用</a></li>
</ol>
<section id="はじめに" class="level2">
<h2 class="anchored" data-anchor-id="はじめに">1. はじめに</h2>
<p>前回までの環境に Databricks Connect を追加して、ローカル開発環境から Databricks の Spark セッションを利用できるようにします。</p>
<p>Databricks 上でもローカルでも同じコードが動作する汎用的なライブラリも紹介します。</p>
</section>
<section id="対象読者" class="level2">
<h2 class="anchored" data-anchor-id="対象読者">2. 対象読者</h2>
<ul>
<li>Databricks のコンピュートをローカルから利用したい方</li>
<li>Databricks 上での開発に Claude Code を利用したい方</li>
<li>Databricks 以外の DWH サービスを使っているが参考にしたい方</li>
</ul>
</section>
<section id="databricks-connect-とは" class="level2">
<h2 class="anchored" data-anchor-id="databricks-connect-とは">3. Databricks Connect とは</h2>
<p>Databricks Connect は、ローカル開発環境から Databricks クラスタに接続できるライブラリです。</p>
<p>これにより以下のメリットが得られます。</p>
<ul>
<li>VS Code や Claude Code などのローカル開発環境が利用できる</li>
<li>ローカルでの開発と Databricks 上での実行で同じコードが使える</li>
</ul>
</section>
<section id="環境設定" class="level2">
<h2 class="anchored" data-anchor-id="環境設定">4. 環境設定</h2>
<section id="pyproject.toml-への追加" class="level3">
<h3 class="anchored" data-anchor-id="pyproject.toml-への追加">4.1. pyproject.toml への追加</h3>
<p>前回の pyproject.toml に以下の依存関係を追加します。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>pyproject.toml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" data-filename="pyproject.toml" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb1-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[project]</span></span>
<span id="cb1-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">dependencies</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb1-3">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"databricks-connect~=16.4.0"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-4">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ipykernel"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-5">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jupyterlab"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-6">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"matplotlib"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-7">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"numpy"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-8">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pandas"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-9">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"python-dotenv"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-10">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"requests"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-11">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"seaborn"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-12"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb1-13"></span>
<span id="cb1-14"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[tool.flake8]</span></span>
<span id="cb1-15"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">extend-ignore</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb1-16">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"E203"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Whitespace before ':'</span></span>
<span id="cb1-17">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"E701"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Multiple statements on one line (colon)</span></span>
<span id="cb1-18">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"F821"</span>   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># undefined name (Databricks-specific module)</span></span>
<span id="cb1-19"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div></div>
</div>
</section>
<section id="dev-container設定の更新" class="level3">
<h3 class="anchored" data-anchor-id="dev-container設定の更新">4.2. Dev Container設定の更新</h3>
<p>devcontainer.json に以下の設定を追加します。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.devcontainer/devcontainer.json</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" data-filename=".devcontainer/devcontainer.json" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb2-2">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"runArgs"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb2-3">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--cap-add=NET_ADMIN"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb2-4">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--cap-add=NET_RAW"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb2-5">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--network=host"</span></span>
<span id="cb2-6">    <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb2-7">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"mounts"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb2-8">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"source=${localEnv:HOME}/.databrickscfg,target=/home/node/.databrickscfg,type=bind,consistency=cached"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb2-9">    <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb2-10"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div></div>
</div>
</section>
<section id="環境変数設定" class="level3">
<h3 class="anchored" data-anchor-id="環境変数設定">4.3. 環境変数設定</h3>
<p><code>.env.example</code> ファイルを作成します。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.env.example</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" data-filename=".env.example" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Databricks設定</span></span>
<span id="cb3-2"></span>
<span id="cb3-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># .databrickscfgのプロファイル名（推奨）</span></span>
<span id="cb3-4"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">DATABRICKS_CONFIG_PROFILE</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>DEFAULT</span>
<span id="cb3-5"></span>
<span id="cb3-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># クラスター使用の場合（どちらか一方を設定）</span></span>
<span id="cb3-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># DATABRICKS_CLUSTER_ID=</span></span>
<span id="cb3-8"></span>
<span id="cb3-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Serverless Compute使用の場合</span></span>
<span id="cb3-10"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">DATABRICKS_SERVERLESS_COMPUTE_ID</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>auto</span>
<span id="cb3-11"></span>
<span id="cb3-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># バージョンチェック無効化</span></span>
<span id="cb3-13"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">DATABRICKS_CONNECT_DISABLE_VERSION_CHECK</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>true</span></code></pre></div></div>
</div>
</section>
</section>
<section id="spark-セッション管理ライブラリ" class="level2">
<h2 class="anchored" data-anchor-id="spark-セッション管理ライブラリ">5. Spark セッション管理ライブラリ</h2>
<p>Dev Container (ローカル) と Databricks の両方で同じように Spark セッションを作成するためのライブラリを用意しました。</p>
<section id="使用方法" class="level3">
<h3 class="anchored" data-anchor-id="使用方法">5.1. 使用方法</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> databricks_spark <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> create_spark_session</span>
<span id="cb4-2"></span>
<span id="cb4-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 新しいSparkセッションを作成</span></span>
<span id="cb4-4">spark <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> create_spark_session()</span>
<span id="cb4-5">df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> spark.sql(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SHOW CATALOGS"</span>)</span>
<span id="cb4-6">df.show()</span></code></pre></div></div>
</section>
<section id="ライブラリ実装" class="level3">
<h3 class="anchored" data-anchor-id="ライブラリ実装">5.2. ライブラリ実装</h3>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>5.2.1. <code>databricks_spark.py</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>databricks_spark.py</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" data-filename="databricks_spark.py" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""</span></span>
<span id="cb5-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">Databricks Spark セッション管理</span></span>
<span id="cb5-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">Databricksとローカル両対応の1ファイル完結型ライブラリ</span></span>
<span id="cb5-4"></span>
<span id="cb5-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">使用方法:</span></span>
<span id="cb5-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    from databricks_spark import create_spark_session</span></span>
<span id="cb5-7"></span>
<span id="cb5-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    # 新しいSparkセッションを作成</span></span>
<span id="cb5-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    spark = create_spark_session()</span></span>
<span id="cb5-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    df = spark.sql("SHOW CATALOGS")</span></span>
<span id="cb5-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">    df.show()</span></span>
<span id="cb5-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""</span></span>
<span id="cb5-13"></span>
<span id="cb5-14"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> logging</span>
<span id="cb5-15"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb5-16"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> sys</span>
<span id="cb5-17"></span>
<span id="cb5-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ロガー設定</span></span>
<span id="cb5-19">_logger <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> logging.getLogger(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">__name__</span>)</span>
<span id="cb5-20"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> _logger.handlers:</span>
<span id="cb5-21">    _logger.setLevel(logging.INFO)</span>
<span id="cb5-22">    formatter <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> logging.Formatter(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%(asctime)s</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%(name)s</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> [</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%(levelname)s</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">] </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%(message)s</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb5-23">    handler <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> logging.StreamHandler(sys.stdout)</span>
<span id="cb5-24">    handler.setFormatter(formatter)</span>
<span id="cb5-25">    _logger.addHandler(handler)</span>
<span id="cb5-26"></span>
<span id="cb5-27"></span>
<span id="cb5-28"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> is_databricks_environment() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">bool</span>:</span>
<span id="cb5-29">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""Databricks環境で実行されているかを判定"""</span></span>
<span id="cb5-30">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> os.environ.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DATABRICKS_RUNTIME_VERSION"</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">is</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span></span>
<span id="cb5-31"></span>
<span id="cb5-32"></span>
<span id="cb5-33"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> get_environment_type() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-&gt;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>:</span>
<span id="cb5-34">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""実行環境のタイプを取得"""</span></span>
<span id="cb5-35">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> is_databricks_environment():</span>
<span id="cb5-36">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"databricks"</span></span>
<span id="cb5-37">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb5-38">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"local"</span></span>
<span id="cb5-39"></span>
<span id="cb5-40"></span>
<span id="cb5-41"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> create_databricks_native_session():</span>
<span id="cb5-42">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""Databricks上でのネイティブSparkセッション作成"""</span></span>
<span id="cb5-43">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb5-44">        <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> pyspark.sql <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> SparkSession</span>
<span id="cb5-45"></span>
<span id="cb5-46">        spark <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> SparkSession.getActiveSession()</span>
<span id="cb5-47">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> spark <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">is</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">None</span>:</span>
<span id="cb5-48">            spark <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> SparkSession.builder.appName(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DatabricksNotebook"</span>).getOrCreate()</span>
<span id="cb5-49"></span>
<span id="cb5-50">        _logger.info(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Databricks native Sparkセッション取得完了"</span>)</span>
<span id="cb5-51">        _logger.info(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"📊 Spark version: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>spark<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>version<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb5-52">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> spark</span>
<span id="cb5-53"></span>
<span id="cb5-54">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">ImportError</span>:</span>
<span id="cb5-55">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">raise</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">ImportError</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Databricks環境でPySparkが利用できません"</span>)</span>
<span id="cb5-56"></span>
<span id="cb5-57"></span>
<span id="cb5-58"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> create_local_connect_session():</span>
<span id="cb5-59">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""ローカルでのDatabricksConnect Sparkセッション作成"""</span></span>
<span id="cb5-60">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb5-61">        <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> databricks.<span class="ex" style="color: null;
background-color: null;
font-style: inherit;">connect</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> DatabricksSession</span>
<span id="cb5-62"></span>
<span id="cb5-63">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 環境変数のデフォルト値を設定</span></span>
<span id="cb5-64">        os.environ.setdefault(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DATABRICKS_CONFIG_PROFILE"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DEFAULT"</span>)</span>
<span id="cb5-65">        os.environ.setdefault(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DATABRICKS_SERVERLESS_COMPUTE_ID"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"auto"</span>)</span>
<span id="cb5-66">        os.environ.setdefault(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DATABRICKS_CONNECT_DISABLE_VERSION_CHECK"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"true"</span>)</span>
<span id="cb5-67"></span>
<span id="cb5-68">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># .env読み込み（オプション）</span></span>
<span id="cb5-69">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb5-70">            <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> dotenv <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> find_dotenv, load_dotenv</span>
<span id="cb5-71"></span>
<span id="cb5-72">            env_file <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> find_dotenv()</span>
<span id="cb5-73">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> env_file:</span>
<span id="cb5-74">                load_dotenv(env_file)</span>
<span id="cb5-75">                _logger.info(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"📁 .env読み込み: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>env_file<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb5-76">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">ImportError</span>:</span>
<span id="cb5-77">            _logger.info(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"📁 dotenvモジュールなし - 環境変数のみ使用"</span>)</span>
<span id="cb5-78"></span>
<span id="cb5-79">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># プロファイル指定チェック</span></span>
<span id="cb5-80">        profile_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> os.environ.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DATABRICKS_CONFIG_PROFILE"</span>)</span>
<span id="cb5-81"></span>
<span id="cb5-82">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> profile_name:</span>
<span id="cb5-83">            _logger.info(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"🔧 .databrickscfgプロファイル使用: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>profile_name<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb5-84"></span>
<span id="cb5-85">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> os.environ.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DATABRICKS_CLUSTER_ID"</span>):</span>
<span id="cb5-86">                cluster_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> os.environ.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DATABRICKS_CLUSTER_ID"</span>)</span>
<span id="cb5-87">                spark <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (</span>
<span id="cb5-88">                    DatabricksSession.builder.profile(profile_name)</span>
<span id="cb5-89">                    .clusterId(cluster_id)</span>
<span id="cb5-90">                    .getOrCreate()</span>
<span id="cb5-91">                )</span>
<span id="cb5-92">                _logger.info(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"🆔 クラスター使用: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>cluster_id<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb5-93">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb5-94">                spark <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (</span>
<span id="cb5-95">                    DatabricksSession.builder.profile(profile_name)</span>
<span id="cb5-96">                    .serverless(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb5-97">                    .getOrCreate()</span>
<span id="cb5-98">                )</span>
<span id="cb5-99">                _logger.info(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🚀 Serverless Compute使用"</span>)</span>
<span id="cb5-100">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb5-101">            _logger.info(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🔧 環境変数から直接接続"</span>)</span>
<span id="cb5-102"></span>
<span id="cb5-103">            required_vars <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DATABRICKS_HOST"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DATABRICKS_TOKEN"</span>]</span>
<span id="cb5-104">            missing_vars <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [var <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> var <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> required_vars <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">not</span> os.environ.get(var)]</span>
<span id="cb5-105"></span>
<span id="cb5-106">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> missing_vars:</span>
<span id="cb5-107">                <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">raise</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">ValueError</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"環境変数が未設定: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>missing_vars<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb5-108"></span>
<span id="cb5-109">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> os.environ.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DATABRICKS_CLUSTER_ID"</span>):</span>
<span id="cb5-110">                cluster_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> os.environ.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DATABRICKS_CLUSTER_ID"</span>)</span>
<span id="cb5-111">                spark <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> DatabricksSession.builder.clusterId(cluster_id).getOrCreate()</span>
<span id="cb5-112">                _logger.info(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"🆔 クラスター使用: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>cluster_id<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb5-113">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb5-114">                spark <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> DatabricksSession.builder.serverless(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>).getOrCreate()</span>
<span id="cb5-115">                _logger.info(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🚀 Serverless Compute使用"</span>)</span>
<span id="cb5-116"></span>
<span id="cb5-117">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># DataFrame表示最適化（Serverless環境では一部設定が制限される）</span></span>
<span id="cb5-118">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb5-119">            spark.conf.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"spark.sql.repl.eagerEval.enabled"</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb5-120">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span>:</span>
<span id="cb5-121">            <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Serverless Computeでは設定できない場合があるのでスキップ</span></span>
<span id="cb5-122">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">pass</span></span>
<span id="cb5-123"></span>
<span id="cb5-124">        _logger.info(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"✅ Databricks Connect Sparkセッション作成完了"</span>)</span>
<span id="cb5-125">        _logger.info(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"📊 Spark version: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>spark<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>version<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb5-126">        _logger.info(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"🌐 接続先: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>spark<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>client<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>host<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb5-127">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> spark</span>
<span id="cb5-128"></span>
<span id="cb5-129">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">ImportError</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> e:</span>
<span id="cb5-130">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">raise</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">ImportError</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"databricks-connectが利用できません: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>e<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb5-131"></span>
<span id="cb5-132"></span>
<span id="cb5-133"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> create_spark_session():</span>
<span id="cb5-134">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">"""実行環境に応じて適切なSparkセッションを作成"""</span></span>
<span id="cb5-135">    env_type <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_environment_type()</span>
<span id="cb5-136">    _logger.info(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"🔍 実行環境検出: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>env_type<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb5-137"></span>
<span id="cb5-138">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">try</span>:</span>
<span id="cb5-139">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> env_type <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"databricks"</span>:</span>
<span id="cb5-140">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> create_databricks_native_session()</span>
<span id="cb5-141">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># local環境（VS Code、Cursor、Dev Container CLI等）</span></span>
<span id="cb5-142">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> create_local_connect_session()</span>
<span id="cb5-143"></span>
<span id="cb5-144">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> e:</span>
<span id="cb5-145">        error_msg <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(e)</span>
<span id="cb5-146">        _logger.error(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"❌ Sparkセッション作成失敗: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>error_msg<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb5-147"></span>
<span id="cb5-148">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># バージョン不整合の検出と対応提案</span></span>
<span id="cb5-149">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Unsupported combination"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> error_msg <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">and</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Databricks Runtime"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> error_msg:</span>
<span id="cb5-150">            _logger.error(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🔧 バージョン不整合が検出されました"</span>)</span>
<span id="cb5-151">            _logger.error(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"💡 以下のいずれかの対応を行ってください:"</span>)</span>
<span id="cb5-152">            _logger.error(</span>
<span id="cb5-153">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   1. DatabricksConnectをクラスターのランタイムに合わせてダウングレード:"</span></span>
<span id="cb5-154">            )</span>
<span id="cb5-155">            _logger.error(</span>
<span id="cb5-156">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"      uv add 'databricks-connect~=[クラスターのランタイムバージョン]'"</span></span>
<span id="cb5-157">            )</span>
<span id="cb5-158">            _logger.error(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"   2. Databricksクラスターのランタイムをアップグレード"</span>)</span>
<span id="cb5-159"></span>
<span id="cb5-160">        _logger.error(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"💡 環境タイプ: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>env_type<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb5-161">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">raise</span></span>
<span id="cb5-162"></span>
<span id="cb5-163"></span>
<span id="cb5-164"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 明示的にcreate_spark_session()を呼び出してセッションを作成してください</span></span>
<span id="cb5-165"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 例: spark = create_spark_session()</span></span></code></pre></div></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="databricks側の設定" class="level2">
<h2 class="anchored" data-anchor-id="databricks側の設定">6. Databricks側の設定</h2>
<section id="接続先クラスタ設定" class="level3">
<h3 class="anchored" data-anchor-id="接続先クラスタ設定">6.1. 接続先クラスタ設定</h3>
<p>Spark config で以下を設定します。</p>
<pre class="text"><code>spark.databricks.service.server.enabled true</code></pre>
</section>
<section id="databricks-接続設定" class="level3">
<h3 class="anchored" data-anchor-id="databricks-接続設定">6.2. Databricks 接続設定</h3>
<p>Databricks へ接続する場合は <code>~/.databrickscfg</code> に以下の内容を記述します。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode ini code-with-copy"><code class="sourceCode ini"><span id="cb7-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[DEFAULT]</span></span>
<span id="cb7-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">host </span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> https://your-databricks-workspace.cloud.databricks.com</span></span>
<span id="cb7-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">token </span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> your-access-token</span></span></code></pre></div></div>
<ul>
<li><code>host</code>: Databricks ワークスペースの URL</li>
<li><code>token</code>: Databricks アクセストークン</li>
</ul>
</section>
</section>
<section id="利用手順" class="level2">
<h2 class="anchored" data-anchor-id="利用手順">7. 利用手順</h2>
<section id="env-作成" class="level3">
<h3 class="anchored" data-anchor-id="env-作成">7.1. <code>.env</code> 作成</h3>
<ol type="1">
<li><p><code>.env</code> ファイルを作成します</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cp</span> .env.example .env</span></code></pre></div></div></li>
<li><p>必要であれば <code>.env</code> ファイルの内容を変更してください</p></li>
</ol>
</section>
<section id="開発ワークフロー" class="level3">
<h3 class="anchored" data-anchor-id="開発ワークフロー">7.2. 開発ワークフロー</h3>
<ol type="1">
<li>Dev Container を起動</li>
<li>Python カーネルを選択</li>
<li>Spark セッションを作成して開発開始</li>
</ol>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> databricks_spark <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> create_spark_session</span>
<span id="cb9-2"></span>
<span id="cb9-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Sparkセッション作成</span></span>
<span id="cb9-4">spark <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> create_spark_session()</span>
<span id="cb9-5"></span>
<span id="cb9-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># データの取得</span></span>
<span id="cb9-7">df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> spark.sql(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"SELECT * FROM your_table LIMIT 10"</span>)</span>
<span id="cb9-8">df.show()</span>
<span id="cb9-9"></span>
<span id="cb9-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># データ分析</span></span>
<span id="cb9-11">df.groupBy(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"category"</span>).count().show()</span></code></pre></div></div>
</section>
</section>
<section id="ノートブックでの-python-モジュールインストール方法" class="level2">
<h2 class="anchored" data-anchor-id="ノートブックでの-python-モジュールインストール方法">8. ノートブックでの Python モジュールインストール方法</h2>
<p>Databricks での実行時のみ Python パッケージをインストールする HACK な方法です。</p>
<p>uv を使っていない場合は <code>%pip install &lt;package&gt;</code> で大丈夫です。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode py code-with-copy"><code class="sourceCode python"><span id="cb10-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb10-2"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> os.environ.get(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"DATABRICKS_RUNTIME_VERSION"</span>):</span>
<span id="cb10-3">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>pip install uv</span>
<span id="cb10-4">    <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span>pip install <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>r <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span>(uv pip <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">compile</span> pyproject.toml <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--</span>color never)</span></code></pre></div></div>
</section>
<section id="トラブルシューティング" class="level2">
<h2 class="anchored" data-anchor-id="トラブルシューティング">9. トラブルシューティング</h2>
<section id="バージョン不整合エラー" class="level3">
<h3 class="anchored" data-anchor-id="バージョン不整合エラー">9.1. バージョン不整合エラー</h3>
<p>Databricks Connect のバージョンとクラスタのランタイムバージョンが合わない場合があります</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># クラスタのランタイムに合わせてダウングレード</span></span>
<span id="cb11-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">uv</span> add <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'databricks-connect~=14.3.0'</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># この場合は DBR 14.3 に対応</span></span></code></pre></div></div>
</section>
<section id="接続エラー" class="level3">
<h3 class="anchored" data-anchor-id="接続エラー">9.2. 接続エラー</h3>
<p>設定ファイルが存在せずマウントされていない場合が考えられるので、devcontainer.json の <code>mounts</code> 設定を確認してください。</p>
</section>
</section>
<section id="おわりに" class="level2">
<h2 class="anchored" data-anchor-id="おわりに">10. おわりに</h2>
<p>これでローカル開発環境から Databricks の Spark クラスタを利用できるようになりました。</p>
<p>Claude Code にノートブック実行とデバッグを任せることでデータサイエンスや機械学習の作業効率が爆上がりですね！</p>
<p>Claude Code にこの手の作業を任せるときは時間がかかるので並行して他の作業に取り組むのがオススメです。</p>
</section>
<section id="おまけ-claude-code-に読ませると便利なルール" class="level2">
<h2 class="anchored" data-anchor-id="おまけ-claude-code-に読ませると便利なルール">11. (おまけ) Claude Code に読ませると便利なルール</h2>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>CONTRIBUTING.md</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12" data-filename="CONTRIBUTING.md" style="background: #f1f3f5;"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb12-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;"># CONTRIBUTING</span></span>
<span id="cb12-2"></span>
<span id="cb12-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">## 重要なルール</span></span>
<span id="cb12-4"></span>
<span id="cb12-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">### pre-commit 設定について</span></span>
<span id="cb12-6"></span>
<span id="cb12-7"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span>**NEVER**: pre-commit を無効化してはならない</span>
<span id="cb12-8"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span>**NEVER**: <span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`pre-commit skip`</span> や <span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`git commit --no-verify`</span> を使用してはならない</span>
<span id="cb12-9"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span>**IMPORTANT**: pre-commit のチェックに失敗した場合は、必ずコードを修正してからコミットする</span>
<span id="cb12-10"></span>
<span id="cb12-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">## Jupyter Notebook 実行方法</span></span>
<span id="cb12-12"></span>
<span id="cb12-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">### デフォルトの実行方法</span></span>
<span id="cb12-14"></span>
<span id="cb12-15">Notebook全体を実行する指示を受けた際は、以下のコマンドを使用する</span>
<span id="cb12-16"></span>
<span id="cb12-17"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`uv run jupyter nbconvert --to notebook --execute &lt;notebook_path&gt; --inplace --ExecutePreprocessor.timeout=300`</span></span>
<span id="cb12-18"></span>
<span id="cb12-19"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">#### 使用例</span></span>
<span id="cb12-20"></span>
<span id="cb12-21"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`uv run jupyter nbconvert --to notebook --execute /workspace/notebooks/databricks-connect-sample.ipynb --inplace --ExecutePreprocessor.timeout=300`</span></span>
<span id="cb12-22"></span>
<span id="cb12-23"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">#### オプション説明</span></span>
<span id="cb12-24"></span>
<span id="cb12-25"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`--to notebook`</span>: Notebook形式で出力</span>
<span id="cb12-26"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`--execute`</span>: セルを実際に実行</span>
<span id="cb12-27"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`--inplace`</span>: 元のファイルに実行結果を上書き</span>
<span id="cb12-28"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`--ExecutePreprocessor.timeout=300`</span>: タイムアウトを300秒に設定</span>
<span id="cb12-29"></span>
<span id="cb12-30"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">### 実行ログの確認</span></span>
<span id="cb12-31"></span>
<span id="cb12-32">実行時のログを確認したい場合は以下のように実行する</span>
<span id="cb12-33"></span>
<span id="cb12-34"><span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`uv run jupyter nbconvert --to notebook --execute &lt;notebook_path&gt; --inplace --ExecutePreprocessor.timeout=300 2&gt;&amp;1 | tee /tmp/notebook_execution.log`</span></span>
<span id="cb12-35"></span>
<span id="cb12-36"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">### 注意事項</span></span>
<span id="cb12-37"></span>
<span id="cb12-38"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span>実行前に必要な環境変数（<span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`.env`</span>ファイル等）が適切に設定されていることを確認する</span>
<span id="cb12-39"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span>長時間実行されるセルがある場合は<span class="in" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">`--ExecutePreprocessor.timeout`</span>の値を調整する</span>
<span id="cb12-40"><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">- </span>VS Codeで開いている場合は実行後にファイルの更新を確認する</span></code></pre></div></div>
</div>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-07-28-article3-databricks-connect.html&amp;text=Databricks%20Connect%20%E5%AE%9F%E8%B7%B5%E7%B7%A8%20%E2%80%95%20%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%8B%E3%82%89%20Databricks%20%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=Databricks%20Connect%20%E5%AE%9F%E8%B7%B5%E7%B7%A8%20%E2%80%95%20%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%8B%E3%82%89%20Databricks%20%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-07-28-article3-databricks-connect.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-07-28-article3-databricks-connect.html&amp;title=Databricks%20Connect%20%E5%AE%9F%E8%B7%B5%E7%B7%A8%20%E2%80%95%20%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%8B%E3%82%89%20Databricks%20%E3%82%B3%E3%83%B3%E3%83%94%E3%83%A5%E3%83%BC%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>tech-data</category>
  <guid>https://i9wa4.github.io/blog/2025-07-28-article3-databricks-connect.html</guid>
  <pubDate>Sun, 27 Jul 2025 16:54:03 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Python 開発環境最適化編 ― uv + pre-commit + GitHub Actions</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-07-28-article2-python-env.html</link>
  <description><![CDATA[ 





<p>本記事は3部構成の2本目です。</p>
<ol type="1">
<li><a href="../blog/2025-07-28-article1-devcontainer.html">Claude Code 対応 Dev Container 環境構築編 - VS Code でもそれ以外でも</a></li>
<li><a href="../blog/2025-07-28-article2-python-env.html">Python 開発環境最適化編 - uv + pre-commit + GitHub Actions</a></li>
<li><a href="../blog/2025-07-28-article3-databricks-connect.html">Databricks Connect 実践編 - ローカルから Databricks コンピュートを利用</a></li>
</ol>
<section id="はじめに" class="level2">
<h2 class="anchored" data-anchor-id="はじめに">1. はじめに</h2>
<p>前回の Dev Container 環境に Python 開発環境を追加します。</p>
<p>uv によるパッケージ管理と pre-commit による品質管理で、チーム開発でも個人開発でも快適な Python 環境を構築できます。</p>
</section>
<section id="対象読者" class="level2">
<h2 class="anchored" data-anchor-id="対象読者">2. 対象読者</h2>
<ul>
<li>Python開発環境を効率化したい方</li>
<li>チーム開発でコード品質を統一したい方</li>
<li>VS Code以外のエディタでも同じ環境を使いたい方</li>
</ul>
</section>
<section id="uv-とは" class="level2">
<h2 class="anchored" data-anchor-id="uv-とは">3. uv とは</h2>
<p>今回利用している Python 環境管理ツールです。</p>
<p><a href="https://github.com/astral-sh/uv" class="uri">https://github.com/astral-sh/uv</a></p>
<p>最低限理解しておくべき要点は以下です。</p>
<ul>
<li>uv 自体は Python エコシステムの外にあるツール</li>
<li>インストールしたい Python パッケージを <code>pyproject.toml</code> で管理する</li>
<li><code>pyproject.toml</code> のパッケージの依存関係解決結果を <code>uv.lock</code> に保存し環境の再現性を担保している</li>
</ul>
</section>
<section id="python-環境設定" class="level2">
<h2 class="anchored" data-anchor-id="python-環境設定">4. Python 環境設定</h2>
<p>Python コーディング向け環境設定について説明していきます。</p>
<p>基本的なライブラリと pre-commit で Black isort, flake8 を利用していきます。</p>
<section id="pyproject.toml" class="level3">
<h3 class="anchored" data-anchor-id="pyproject.toml">4.1. pyproject.toml</h3>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>pyproject.toml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" data-filename="pyproject.toml" style="background: #f1f3f5;"><pre class="sourceCode toml code-with-copy"><code class="sourceCode toml"><span id="cb1-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[project]</span></span>
<span id="cb1-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">name</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"your-project-name"</span></span>
<span id="cb1-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">version</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0.1.0"</span></span>
<span id="cb1-4"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">description</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Add your description here"</span></span>
<span id="cb1-5"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">requires-python</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"~=3.13.0"</span></span>
<span id="cb1-6"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">dependencies</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb1-7">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ipykernel"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-8">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jupyterlab"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-9">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"matplotlib"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-10">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"numpy"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-11">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pandas"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-12">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"python-dotenv"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-13">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"requests"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-14">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"seaborn"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-15"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb1-16"></span>
<span id="cb1-17"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[dependency-groups]</span></span>
<span id="cb1-18"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">dev</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb1-19">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pre-commit~=4.2.0"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-20">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black==25.1.0"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-21">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"isort==6.0.0"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-22">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flake8==7.3.0"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-23">  <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"flake8-pyproject"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb1-24"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb1-25"></span>
<span id="cb1-26"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[tool.black]</span></span>
<span id="cb1-27"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">line-length</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">88</span></span>
<span id="cb1-28"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">target-version</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">py313</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb1-29"></span>
<span id="cb1-30"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[tool.isort]</span></span>
<span id="cb1-31"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">profile</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span></span>
<span id="cb1-32"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">line_length</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">88</span></span>
<span id="cb1-33"></span>
<span id="cb1-34"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[tool.flake8]</span></span>
<span id="cb1-35"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">max-line-length</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">88</span></span>
<span id="cb1-36"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">extend-exclude</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".venv"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb1-37"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">extend-ignore</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb1-38">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"E203"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Whitespace before ':'</span></span>
<span id="cb1-39">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"E701"</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">,</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Multiple statements on one line (colon)</span></span>
<span id="cb1-40"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">]</span></span></code></pre></div></div>
</div>
</section>
<section id="pre-commit-設定" class="level3">
<h3 class="anchored" data-anchor-id="pre-commit-設定">4.2. pre-commit 設定</h3>
<p>Formatter設定をVS Codeから切り離すことでVS Code以外のエディタやGitHub Actionsでも利用できるようになります。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.pre-commit-config.yaml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" data-filename=".pre-commit-config.yaml" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">default_stages</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pre-commit</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repos</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repo</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> https://github.com/pre-commit/pre-commit-hooks</span></span>
<span id="cb2-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rev</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> v5.0.0</span></span>
<span id="cb2-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hooks</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> check-added-large-files</span></span>
<span id="cb2-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> check-json</span></span>
<span id="cb2-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> check-yaml</span></span>
<span id="cb2-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> detect-private-key</span></span>
<span id="cb2-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> end-of-file-fixer</span></span>
<span id="cb2-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> mixed-line-ending</span></span>
<span id="cb2-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">args</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--fix=</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">no</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb2-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> trailing-whitespace</span></span>
<span id="cb2-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">args</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--markdown-linebreak-ext=md</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb2-15"></span>
<span id="cb2-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repo</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> local</span></span>
<span id="cb2-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hooks</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-18"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> black</span></span>
<span id="cb2-19"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> black</span></span>
<span id="cb2-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">entry</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> uv run --no-sync black</span></span>
<span id="cb2-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">language</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> system</span></span>
<span id="cb2-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">types</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">python</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb2-23"></span>
<span id="cb2-24"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repo</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> local</span></span>
<span id="cb2-25"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hooks</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-26"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> isort</span></span>
<span id="cb2-27"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> isort (python)</span></span>
<span id="cb2-28"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">entry</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> uv run --no-sync isort</span></span>
<span id="cb2-29"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">language</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> system</span></span>
<span id="cb2-30"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">types</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">python</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb2-31"></span>
<span id="cb2-32"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repo</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> local</span></span>
<span id="cb2-33"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hooks</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-34"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> flake8</span></span>
<span id="cb2-35"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> flake8</span></span>
<span id="cb2-36"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">entry</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> uv run --no-sync flake8</span></span>
<span id="cb2-37"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">language</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> system</span></span>
<span id="cb2-38"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">types</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">[</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">python</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">]</span></span>
<span id="cb2-39"></span>
<span id="cb2-40"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repo</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> https://github.com/gitleaks/gitleaks</span></span>
<span id="cb2-41"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rev</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> v8.28.0</span></span>
<span id="cb2-42"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hooks</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-43"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> gitleaks</span></span></code></pre></div></div>
</div>
</section>
<section id="github-actions-での-pre-commit" class="level3">
<h3 class="anchored" data-anchor-id="github-actions-での-pre-commit">4.3. GitHub Actions での pre-commit</h3>
<p>GitHub Actionsでpre-commitを実行するための設定です。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.github/workflows/pre-commit.yaml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" data-filename=".github/workflows/pre-commit.yaml" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> pre-commit</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">run-name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.event_name }} on ${{ github.ref_name }} by @${{ github.actor }}</span></span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">workflow_dispatch</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">push</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main</span></span>
<span id="cb3-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull_request</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">branches</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> main</span></span>
<span id="cb3-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">types</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> opened</span></span>
<span id="cb3-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> synchronize</span></span>
<span id="cb3-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> reopened</span></span>
<span id="cb3-16"></span>
<span id="cb3-17"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">permissions</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">{}</span></span>
<span id="cb3-18"></span>
<span id="cb3-19"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">defaults</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-20"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-21"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">shell</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> bash</span></span>
<span id="cb3-22"></span>
<span id="cb3-23"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">concurrency</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-24"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.workflow }}-${{ github.ref }}</span></span>
<span id="cb3-25"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cancel-in-progress</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">true</span></span>
<span id="cb3-26"></span>
<span id="cb3-27"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-28"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pre-commit</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-29"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runs-on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ubuntu-latest</span></span>
<span id="cb3-30"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">timeout-minutes</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb3-31"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">permissions</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-32"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">contents</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> read</span></span>
<span id="cb3-33"></span>
<span id="cb3-34"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">steps</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-35"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Checkout</span></span>
<span id="cb3-36"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/checkout@v4</span></span>
<span id="cb3-37"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">          # プルリクエスト時はソースブランチ(github.head_ref)を、</span></span>
<span id="cb3-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">          # 手動実行時は実行対象ブランチ(github.ref_name)をチェックアウト</span></span>
<span id="cb3-40"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ref</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ github.event_name == 'pull_request' &amp;&amp; github.head_ref || github.ref_name }}</span></span>
<span id="cb3-41"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">persist-credentials</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span></span>
<span id="cb3-42"></span>
<span id="cb3-43"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Install uv</span></span>
<span id="cb3-44"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> astral-sh/setup-uv@v6</span></span>
<span id="cb3-45"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-46"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">version</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0.8.3"</span></span>
<span id="cb3-47"></span>
<span id="cb3-48"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Set up Python</span></span>
<span id="cb3-49"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">        run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb3-50">          uv sync --only-group dev</span>
<span id="cb3-51"></span>
<span id="cb3-52"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Cache pre-commit</span></span>
<span id="cb3-53"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/cache@v4</span></span>
<span id="cb3-54"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-55"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">path</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ~/.cache/pre-commit</span></span>
<span id="cb3-56"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">          key</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb3-57">            pre-commit-${{ runner.os }}-${{ hashFiles('.pre-commit-config.yaml') }}-${{ hashFiles('uv.lock') }}</span>
<span id="cb3-58"></span>
<span id="cb3-59"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Install pre-commit</span></span>
<span id="cb3-60"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">        run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb3-61">          uv run --no-sync pre-commit install</span>
<span id="cb3-62"></span>
<span id="cb3-63"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Run pre-commit</span></span>
<span id="cb3-64"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">        run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb3-65">          uv run --no-sync pre-commit run --all-files</span></code></pre></div></div>
</div>
</section>
</section>
<section id="dev-container-への統合" class="level2">
<h2 class="anchored" data-anchor-id="dev-container-への統合">5. Dev Container への統合</h2>
<section id="devcontainer.json-の更新" class="level3">
<h3 class="anchored" data-anchor-id="devcontainer.json-の更新">5.1. devcontainer.json の更新</h3>
<p>前回の devcontainer.json に以下の設定を追加します。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb4-2">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"customizations"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb4-3">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"vscode"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb4-4">            <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"extensions"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb4-5">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"editorconfig.editorconfig"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb4-6">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"elagil.pre-commit-helper"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb4-7">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ms-python.python"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb4-8">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ms-toolsai.jupyter"</span></span>
<span id="cb4-9">            <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb4-10">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb4-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">},</span></span>
<span id="cb4-12">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"remoteEnv"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb4-13">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"UV_LINK_MODE"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"copy"</span></span>
<span id="cb4-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">},</span></span>
<span id="cb4-15">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"postStartCommand"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"uv sync --frozen --group dev &amp;&amp; uv run pre-commit install"</span></span>
<span id="cb4-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div></div>
</section>
<section id="jupyterlab-起動スクリプト" class="level3">
<h3 class="anchored" data-anchor-id="jupyterlab-起動スクリプト">5.2. JupyterLab 起動スクリプト</h3>
<p>VS Code ユーザーは不要ですが一応 JupyterLab を起動するスクリプトも用意しました。</p>
<p>ポートは自動割り当てにしています。</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>5.2.1. <code>.devcontainer/start-jupyter.sh</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.devcontainer/start-jupyter.sh</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" data-filename=".devcontainer/start-jupyter.sh" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#!/usr/bin/env bash</span></span>
<span id="cb5-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-o</span> errexit</span>
<span id="cb5-3"></span>
<span id="cb5-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># JupyterLab起動スクリプト</span></span>
<span id="cb5-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 快適な開発用</span></span>
<span id="cb5-6"></span>
<span id="cb5-7"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🔥 JupyterLab 環境を起動中..."</span></span>
<span id="cb5-8"></span>
<span id="cb5-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ポート設定（環境変数または自動割り当て）</span></span>
<span id="cb5-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># JUPYTER_PORT=8888 # </span><span class="al" style="color: #AD0000;
background-color: null;
font-style: inherit;">NOTE</span><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">: この行をコメントアウトすると自動ポート検索が有効になります</span></span>
<span id="cb5-11"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">JUPYTER_PORT</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${JUPYTER_PORT</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:-</span>0<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-12"></span>
<span id="cb5-13"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">[</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$JUPYTER_PORT</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0"</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">]</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb5-14">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"📡 利用可能なポートを自動検索中..."</span></span>
<span id="cb5-15"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span></span>
<span id="cb5-16">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"📡 指定ポート </span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${JUPYTER_PORT}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> で起動します"</span></span>
<span id="cb5-17"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb5-18"></span>
<span id="cb5-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Python環境の確認</span></span>
<span id="cb5-20"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">[</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-f</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"uv.lock"</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">]</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb5-21">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"📦 uv環境を使用してJupyterLabを起動します"</span></span>
<span id="cb5-22">  <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">uv</span> sync <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--frozen</span></span>
<span id="cb5-23">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nohup</span> uv run jupyter lab <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--ip</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0.0.0.0 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--port</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${JUPYTER_PORT}</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--no-browser</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--allow-root</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb5-24">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--NotebookApp.token</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--NotebookApp.password</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb5-25">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--ServerApp.allow_origin</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'*'</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--ServerApp.disable_check_xsrf</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>True <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>/dev/null <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&amp;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;</span></span>
<span id="cb5-26"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">elif</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">[</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-d</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".venv"</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">]</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb5-27">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"📦 venv環境を使用してJupyterLabを起動します"</span></span>
<span id="cb5-28">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">source</span> .venv/bin/activate</span>
<span id="cb5-29">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nohup</span> jupyter lab <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--ip</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>0.0.0.0 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--port</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${JUPYTER_PORT}</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--no-browser</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--allow-root</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb5-30">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--NotebookApp.token</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--NotebookApp.password</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb5-31">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--ServerApp.allow_origin</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'*'</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--ServerApp.disable_check_xsrf</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>True <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>/dev/null <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;&amp;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;</span></span>
<span id="cb5-32"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span></span>
<span id="cb5-33">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"❌ Python仮想環境が見つかりません"</span></span>
<span id="cb5-34">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"uvまたはvenvで環境をセットアップしてください"</span></span>
<span id="cb5-35">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">exit</span> 1</span>
<span id="cb5-36"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb5-37"></span>
<span id="cb5-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 実際に割り当てられたポートを取得（リトライ機能付き）</span></span>
<span id="cb5-39"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> i <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">{</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">..</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">}</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">do</span></span>
<span id="cb5-40">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sleep</span> 1</span>
<span id="cb5-41">  <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ACTUAL_PORT</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">ss</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-tlnp</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span>/dev/null <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">grep</span> jupyter-lab <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">awk</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'{print $4}'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cut</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-d:</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-f2</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">|</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-1</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span></span>
<span id="cb5-42">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">[</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-n</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$ACTUAL_PORT</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">]</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb5-43">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">break</span></span>
<span id="cb5-44">  <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span>
<span id="cb5-45"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">done</span></span>
<span id="cb5-46"></span>
<span id="cb5-47"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">[</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$JUPYTER_PORT</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"0"</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">]</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">[</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">-n</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$ACTUAL_PORT</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">]</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">;</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">then</span></span>
<span id="cb5-48">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🌐 JupyterLabは http://localhost:</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${ACTUAL_PORT}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/lab でアクセス可能です"</span></span>
<span id="cb5-49"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span></span>
<span id="cb5-50">  <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">echo</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"🌐 JupyterLabは http://localhost:</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${JUPYTER_PORT}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/lab でアクセス可能です"</span></span>
<span id="cb5-51"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">fi</span></span></code></pre></div></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="python-仮想環境更新手順" class="level2">
<h2 class="anchored" data-anchor-id="python-仮想環境更新手順">6. Python 仮想環境更新手順</h2>
<ol type="1">
<li><p>必要に応じて <code>.python-version</code> や <code>pyproject.toml</code> を更新します。</p></li>
<li><p><code>uv.lock</code> を更新します。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">uv</span> lock <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--upgrade</span></span></code></pre></div></div></li>
<li><p>.venv を更新します。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">uv</span> sync <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--frozen</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--group</span> dev</span></code></pre></div></div></li>
</ol>
<section id="パッケージ追加手順" class="level3">
<h3 class="anchored" data-anchor-id="パッケージ追加手順">6.1. パッケージ追加手順</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 新しいパッケージを追加</span></span>
<span id="cb8-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">uv</span> add pandas matplotlib</span>
<span id="cb8-3"></span>
<span id="cb8-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 開発用パッケージを追加</span></span>
<span id="cb8-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">uv</span> add <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--group</span> dev pytest</span></code></pre></div></div>
</section>
</section>
<section id="おわりに" class="level2">
<h2 class="anchored" data-anchor-id="おわりに">7. おわりに</h2>
<p>これで Python 開発環境が完成しました。</p>
<p>次回はこの環境に Databricks Connect を追加してクラウドデータウェアハウスと連携する方法を紹介します。</p>
<p><a href="../blog/2025-07-28-article3-databricks-connect.html">Databricks Connect 実践編 - ローカルから Databricks コンピュートを利用</a></p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-07-28-article2-python-env.html&amp;text=Python%20%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E6%9C%80%E9%81%A9%E5%8C%96%E7%B7%A8%20%E2%80%95%20uv%20%2B%20pre-commit%20%2B%20GitHub%20Actions%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=Python%20%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E6%9C%80%E9%81%A9%E5%8C%96%E7%B7%A8%20%E2%80%95%20uv%20%2B%20pre-commit%20%2B%20GitHub%20Actions%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-07-28-article2-python-env.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-07-28-article2-python-env.html&amp;title=Python%20%E9%96%8B%E7%99%BA%E7%92%B0%E5%A2%83%E6%9C%80%E9%81%A9%E5%8C%96%E7%B7%A8%20%E2%80%95%20uv%20%2B%20pre-commit%20%2B%20GitHub%20Actions%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>tech-others</category>
  <guid>https://i9wa4.github.io/blog/2025-07-28-article2-python-env.html</guid>
  <pubDate>Sun, 27 Jul 2025 16:53:58 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Claude Code 対応 Dev Container 環境構築編 ― VS Code でもそれ以外でも</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-07-28-article1-devcontainer.html</link>
  <description><![CDATA[ 





<p>本記事は3部構成の1本目です。</p>
<ol type="1">
<li><a href="../blog/2025-07-28-article1-devcontainer.html">Claude Code 対応 Dev Container 環境構築編 - VS Code でもそれ以外でも</a></li>
<li><a href="../blog/2025-07-28-article2-python-env.html">Python 開発環境最適化編 - uv + pre-commit + GitHub Actions</a></li>
<li><a href="../blog/2025-07-28-article3-databricks-connect.html">Databricks Connect 実践編 - ローカルから Databricks コンピュートを利用</a></li>
</ol>
<section id="はじめに" class="level2">
<h2 class="anchored" data-anchor-id="はじめに">1. はじめに</h2>
<p>Claude Codeを使いたいけれど環境構築が面倒、チーム全員に同じ開発環境を提供したい、そんな悩みをサクッと解決します。</p>
<p>この記事では Anthropic のリファレンス実装をベースに、実用的にカスタマイズしたDev Container設定を紹介します。</p>
</section>
<section id="対象読者" class="level2">
<h2 class="anchored" data-anchor-id="対象読者">2. 対象読者</h2>
<ul>
<li>Claude Code を使いたいが環境構築を簡単にしたい方</li>
<li>チーム開発で統一された開発環境を提供したい方</li>
</ul>
</section>
<section id="前提知識" class="level2">
<h2 class="anchored" data-anchor-id="前提知識">3. 前提知識</h2>
<section id="dev-container-とは" class="level3">
<h3 class="anchored" data-anchor-id="dev-container-とは">3.1. Dev Container とは</h3>
<p>Dev Container は VS Code でコンテナを開発環境として利用できる便利機能です。</p>
<p>今回の設定をチームで共有すれば全員に同じ開発環境を提供できます。</p>
<p>VS Code以外のエディタでも Dev Container CLI を利用することで恩恵を受けることができます。</p>
</section>
<section id="claude-code-in-dev-container" class="level3">
<h3 class="anchored" data-anchor-id="claude-code-in-dev-container">3.2. Claude Code in Dev Container</h3>
<p>Claude Code を Dev Container で利用する方法について2通り紹介します。</p>
<section id="devcontainer.json-の-features-を利用する" class="level4">
<h4 class="anchored" data-anchor-id="devcontainer.json-の-features-を利用する">3.2.1. devcontainer.json の features を利用する</h4>
<p>こちらが簡単な方法です。</p>
<p>以下に Anthropic が提供している Dev Container feature を利用する方法が記載されています。</p>
<p><a href="https://github.com/anthropics/devcontainer-features/blob/main/src/claude-code/README.md" class="uri">https://github.com/anthropics/devcontainer-features/blob/main/src/claude-code/README.md</a></p>
<p>抜粋すると以下の通りです。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.devcontainer/devcontainer.json</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" data-filename=".devcontainer/devcontainer.json" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb1-1"><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">"features":</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb1-2">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"ghcr.io/devcontainers/features/node:1"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{},</span></span>
<span id="cb1-3">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"ghcr.io/anthropics/devcontainer-features/claude-code:1"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{}</span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div></div>
</div>
</section>
<section id="dockerfile-を利用する" class="level4">
<h4 class="anchored" data-anchor-id="dockerfile-を利用する">3.2.2. Dockerfile を利用する</h4>
<p>本家のリファレンス実装を利用する方法です。</p>
<p>以下が Claude Code 向け Dev Container について記載されている公式ドキュメントです。</p>
<p><a href="https://docs.anthropic.com/en/docs/claude-code/devcontainer" class="uri">https://docs.anthropic.com/en/docs/claude-code/devcontainer</a></p>
<p>この中でリファレンス実装として Claude Code 自身の Dev Container 設定が紹介されています。</p>
<p><a href="https://github.com/anthropics/claude-code/tree/main/.devcontainer" class="uri">https://github.com/anthropics/claude-code/tree/main/.devcontainer</a></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">.devcontainer</span></span>
<span id="cb2-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> devcontainer.json</span>
<span id="cb2-3"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> Dockerfile</span>
<span id="cb2-4"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">└──</span> init-firewall.sh</span></code></pre></div></div>
<p>このリファレンス実装を参考にしつつ私が使いやすいようにカスタマイズしたものを以下で紹介していきます。</p>
</section>
</section>
</section>
<section id="dev-container-設定" class="level2">
<h2 class="anchored" data-anchor-id="dev-container-設定">4. Dev Container 設定</h2>
<section id="vs-code-側の準備" class="level3">
<h3 class="anchored" data-anchor-id="vs-code-側の準備">4.1. VS Code 側の準備</h3>
<p>Dev Container 拡張をインストールしておく必要があります。</p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers" class="uri">https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers</a></p>
</section>
<section id="dockerfile" class="level3">
<h3 class="anchored" data-anchor-id="dockerfile">4.2. Dockerfile</h3>
<p>Anthropic のリファレンス実装をベースにして以下のような Dockerfile を作成しました。</p>
<p>見て分かる通り hadolint で結構指摘が出る書き味ですが特に意思もないのでそのままにしています。</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>4.2.1. <code>.devcontainer/Dockerfile</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.devcontainer/Dockerfile</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" data-filename=".devcontainer/Dockerfile" style="background: #f1f3f5;"><pre class="sourceCode Dockerfile code-with-copy"><code class="sourceCode dockerfile"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">FROM</span> node:20</span>
<span id="cb3-2"></span>
<span id="cb3-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ARG</span> TZ</span>
<span id="cb3-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ENV</span> TZ=<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"$TZ"</span></span>
<span id="cb3-5"></span>
<span id="cb3-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install basic development tools and iptables/ipset</span></span>
<span id="cb3-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt</span> update <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">apt</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-y</span> less <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-8">  git <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-9">  procps <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-10">  sudo <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-11">  fzf <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-12">  zsh <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-13">  man-db <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-14">  unzip <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-15">  gnupg2 <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-16">  gh <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-17">  iptables <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-18">  ipset <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-19">  iproute2 <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-20">  dnsutils <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-21">  aggregate <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-22">  jq</span>
<span id="cb3-23"></span>
<span id="cb3-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Ensure default node user has access to /usr/local/share</span></span>
<span id="cb3-25"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-p</span> /usr/local/share/npm-global <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-26">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chown</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-R</span> node:node /usr/local/share</span>
<span id="cb3-27"></span>
<span id="cb3-28"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ARG</span> USERNAME=node</span>
<span id="cb3-29"></span>
<span id="cb3-30"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Persist bash history.</span></span>
<span id="cb3-31"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">SNIPPET</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"export PROMPT_COMMAND='history -a' &amp;&amp; export HISTFILE=/commandhistory/.bash_history"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-32">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> /commandhistory <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-33">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">touch</span> /commandhistory/.bash_history <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-34">  <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chown</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-R</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$USERNAME</span> /commandhistory</span>
<span id="cb3-35"></span>
<span id="cb3-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set `DEVCONTAINER` environment variable to help with orientation</span></span>
<span id="cb3-37"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ENV</span> DEVCONTAINER=true</span>
<span id="cb3-38"></span>
<span id="cb3-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create workspace and config directories and set permissions</span></span>
<span id="cb3-40"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mkdir</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-p</span> /workspace /home/node/.claude <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-41">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">chown</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-R</span> node:node /workspace /home/node/.claude</span>
<span id="cb3-42"></span>
<span id="cb3-43"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">WORKDIR</span> /workspace</span>
<span id="cb3-44"></span>
<span id="cb3-45"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">ARCH</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">dpkg</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--print-architecture</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-46">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">wget</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://github.com/dandavison/delta/releases/download/0.18.2/git-delta_0.18.2_</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${ARCH}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">.deb"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-47">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sudo</span> dpkg <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-i</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"git-delta_0.18.2_</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${ARCH}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">.deb"</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">&amp;&amp;</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-48">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"git-delta_0.18.2_</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${ARCH}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">.deb"</span></span>
<span id="cb3-49"></span>
<span id="cb3-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set up non-root user</span></span>
<span id="cb3-51"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">USER</span> node</span>
<span id="cb3-52"></span>
<span id="cb3-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install global packages</span></span>
<span id="cb3-54"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ENV</span> NPM_CONFIG_PREFIX=/usr/local/share/npm-global</span>
<span id="cb3-55"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ENV</span> PATH=$PATH:/usr/local/share/npm-global/bin</span>
<span id="cb3-56"></span>
<span id="cb3-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set the default shell to zsh rather than sh</span></span>
<span id="cb3-58"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">ENV</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">SHELL</span>=/bin/zsh</span>
<span id="cb3-59"></span>
<span id="cb3-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Default powerline10k theme</span></span>
<span id="cb3-61"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sh</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-c</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$(</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">wget</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-O-</span> https://github.com/deluan/zsh-in-docker/releases/download/v1.2.0/zsh-in-docker.sh<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">)</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-62">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-p</span> git <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-63">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-p</span> fzf <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-64">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-a</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"source /usr/share/doc/fzf/examples/key-bindings.zsh"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-65">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-a</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"source /usr/share/doc/fzf/examples/completion.zsh"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-66">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-a</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"export PROMPT_COMMAND='history -a' &amp;&amp; export HISTFILE=/commandhistory/.bash_history"</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">\</span></span>
<span id="cb3-67">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-x</span></span>
<span id="cb3-68"></span>
<span id="cb3-69"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Install Claude</span></span>
<span id="cb3-70"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">RUN</span> <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">npm</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-g</span> @anthropic-ai/claude-code</span>
<span id="cb3-71"></span>
<span id="cb3-72"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Python environment setup (if needed)</span></span>
<span id="cb3-73"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Copy uv binary from official image</span></span>
<span id="cb3-74"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">COPY</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--from=ghcr.io/astral-sh/uv:latest</span> /uv /usr/local/bin/uv</span>
<span id="cb3-75"></span>
<span id="cb3-76"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">USER</span> node</span></code></pre></div></div>
</div>
<p>Anthropic のリファレンス実装 (<a href="https://github.com/anthropics/claude-code/blob/55219b8b4e612b5fc6a85f7dc4eb4382ec4134eb/.devcontainer/Dockerfile">e394b39</a>) と比較すると以下のような変更を行っています。</p>
<ul>
<li>firewall スクリプト対応部分を削除</li>
<li>uv インストール部分を追加</li>
</ul>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode diff code-with-copy"><code class="sourceCode diff"><span id="cb4-1">$ diff -u ../../anthropics/claude-code/.devcontainer/Dockerfile .devcontainer/Dockerfile</span>
<span id="cb4-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">--- ../../anthropics/claude-code/.devcontainer/Dockerfile       2025-07-26 16:16:50</span></span>
<span id="cb4-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">+++ .devcontainer/Dockerfile    2025-07-26 23:24:59</span></span>
<span id="cb4-4"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">@@ -69,10 +69,8 @@</span></span>
<span id="cb4-5"> # Install Claude</span>
<span id="cb4-6"> RUN npm install -g @anthropic-ai/claude-code</span>
<span id="cb4-7"></span>
<span id="cb4-8"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">-# Copy and set up firewall script</span></span>
<span id="cb4-9"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">-COPY init-firewall.sh /usr/local/bin/</span></span>
<span id="cb4-10"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">-USER root</span></span>
<span id="cb4-11"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">-RUN chmod +x /usr/local/bin/init-firewall.sh &amp;&amp; \</span></span>
<span id="cb4-12"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">-  echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-firewall.sh" &gt; /etc/sudoers.d/node-firewall &amp;&amp; \</span></span>
<span id="cb4-13"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">-  chmod 0440 /etc/sudoers.d/node-firewall</span></span>
<span id="cb4-14"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">+# Python environment setup (if needed)</span></span>
<span id="cb4-15"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">+# Copy uv binary from official image</span></span>
<span id="cb4-16"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">+COPY --from=ghcr.io/astral-sh/uv:latest /uv /usr/local/bin/uv</span></span>
<span id="cb4-17"><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb4-18"> USER node</span></code></pre></div></div>
</div>
</div>
</div>
</section>
<section id="devcontainer.json" class="level3">
<h3 class="anchored" data-anchor-id="devcontainer.json">4.3. devcontainer.json</h3>
<p>以下のような <code>devcontainer.json</code> を作成しました。</p>
<p>こちらは Anthropic のリファレンス実装に比べると割と変更点が多いです。</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>4.3.1. <code>.devcontainer/devcontainer.json</code>
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.devcontainer/devcontainer.json</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" data-filename=".devcontainer/devcontainer.json" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-2">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"name"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Claude Code Development Environment"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-3">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"build"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-4">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"dockerfile"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dockerfile"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-5">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"args"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-6">            <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"TZ"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"${localEnv:TZ:Asia/Tokyo}"</span></span>
<span id="cb5-7">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-8">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">},</span></span>
<span id="cb5-9">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"runArgs"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb5-10">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--cap-add=NET_ADMIN"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-11">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--cap-add=NET_RAW"</span></span>
<span id="cb5-12">    <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-13">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"customizations"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-14">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"vscode"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-15">            <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"extensions"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb5-16">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"editorconfig.editorconfig"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-17">                <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"elagil.pre-commit-helper"</span></span>
<span id="cb5-18">            <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-19">            <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"settings"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-20">                <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"terminal.integrated.defaultProfile.linux"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zsh"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-21">                <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"terminal.integrated.profiles.linux"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-22">                    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"bash"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-23">                        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"path"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bash"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-24">                        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"icon"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"terminal-bash"</span></span>
<span id="cb5-25">                    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">},</span></span>
<span id="cb5-26">                    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"zsh"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-27">                        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"path"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"zsh"</span></span>
<span id="cb5-28">                    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-29">                <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-30">            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-31">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span>
<span id="cb5-32">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">},</span></span>
<span id="cb5-33">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"remoteUser"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"node"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-34">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"mounts"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb5-35">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"source=${localEnv:CLAUDE_CONFIG_DIR},target=/home/node/.claude,type=bind,consistency=cached"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-36">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"source=${localEnv:HOME}/.config/gh,target=/home/node/.config/gh,type=bind,consistency=cached"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-37">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"source=${localEnv:HOME}/.config/git,target=/home/node/.config/git,type=bind,consistency=cached"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-38">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"source=${localEnv:HOME}/.gitconfig,target=/home/node/.gitconfig,type=bind,consistency=cached"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-39">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"source=${localEnv:HOME}/.ssh,target=/home/node/.ssh,type=bind,consistency=cached"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-40">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"source=claude-code-bashhistory-${devcontainerId},target=/commandhistory,type=volume"</span></span>
<span id="cb5-41">    <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-42">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"remoteEnv"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-43">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"CLAUDE_CONFIG_DIR"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/home/node/.claude"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-44">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"NODE_OPTIONS"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--max-old-space-size=4096"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-45">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"POWERLEVEL9K_DISABLE_GITSTATUS"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"true"</span></span>
<span id="cb5-46">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">},</span></span>
<span id="cb5-47">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"workspaceMount"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"source=${localWorkspaceFolder},target=/workspace,type=bind,consistency=delegated"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-48">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"workspaceFolder"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/workspace"</span></span>
<span id="cb5-49"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div></div>
</div>
<p>Anthropic のリファレンス実装 (<a href="https://github.com/anthropics/claude-code/blob/55219b8b4e612b5fc6a85f7dc4eb4382ec4134eb/.devcontainer/devcontainer.json">33e37bd</a>) と比較すると以下のような変更を行っています。</p>
<ul>
<li>VS Code 向け拡張機能を追加
<ul>
<li><code>editorconfig.editorconfig</code>
<ul>
<li>テキストエディタ間での設定を統一する</li>
</ul></li>
<li><code>elagil.pre-commit-helper</code>
<ul>
<li>pre-commit を使いやすくする</li>
</ul></li>
</ul></li>
<li>VS Code 向け Formatter 設定を削除</li>
<li><code>mounts</code> に設定ファイル群を追加
<ul>
<li>以下のツールの設定ファイルをマウントして利用します
<ul>
<li>Claude Code</li>
<li>GitHub CLI</li>
<li>Git</li>
<li>ssh</li>
</ul></li>
</ul></li>
<li><code>mounts</code> の Claude Code 設定分離部分を削除
<ul>
<li>ユーザー設定をマウントして利用したかったので削除しました</li>
</ul></li>
<li><code>remoteEnv</code> に以下の環境変数を追加
<ul>
<li><code>CLAUDE_CONFIG_DIR</code>
<ul>
<li>Claude Code の設定参照箇所の安定化を図る</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>
</section>
</section>
<section id="利用手順" class="level2">
<h2 class="anchored" data-anchor-id="利用手順">5. 利用手順</h2>
<section id="claude-code-設定" class="level3">
<h3 class="anchored" data-anchor-id="claude-code-設定">5.1. Claude Code 設定</h3>
<p>Claude Code の設定ディレクトリを環境変数で指定しておきます。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CLAUDE_CONFIG_DIR</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">$HOME</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">/.claude"</span></span></code></pre></div></div>
</section>
<section id="dev-container-vs-code" class="level3">
<h3 class="anchored" data-anchor-id="dev-container-vs-code">5.2. Dev Container VS Code</h3>
<ol type="1">
<li>F1 -&gt; “Dev Containers: Open Folder in Container…” を選択します</li>
<li>Claude Code はインストール済みなのでターミナルから起動できます</li>
</ol>
</section>
<section id="dev-container-cli" class="level3">
<h3 class="anchored" data-anchor-id="dev-container-cli">5.3. Dev Container CLI</h3>
<p>VS Code を使わない場合は Dev Container CLI を利用できます。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Dev Container CLI のインストール</span></span>
<span id="cb7-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">npm</span> install <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-g</span> @devcontainers/cli</span>
<span id="cb7-3"></span>
<span id="cb7-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># コンテナ起動</span></span>
<span id="cb7-5"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">devcontainer</span> up <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--workspace-folder</span> .</span>
<span id="cb7-6"></span>
<span id="cb7-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># コンテナに接続</span></span>
<span id="cb7-8"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">devcontainer</span> exec <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--workspace-folder</span> . zsh</span></code></pre></div></div>
</section>
</section>
<section id="おわりに" class="level2">
<h2 class="anchored" data-anchor-id="おわりに">6. おわりに</h2>
<p>これで Claude Code が使える開発環境の完成です。</p>
<p>次回はこの環境に Python 開発環境を追加する方法を紹介します。</p>
<p><a href="../blog/2025-07-28-article2-python-env.html">Python 開発環境最適化編 - uv + pre-commit + GitHub Actions</a></p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-07-28-article1-devcontainer.html&amp;text=Claude%20Code%20%E5%AF%BE%E5%BF%9C%20Dev%20Container%20%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E7%B7%A8%20%E2%80%95%20VS%20Code%20%E3%81%A7%E3%82%82%E3%81%9D%E3%82%8C%E4%BB%A5%E5%A4%96%E3%81%A7%E3%82%82%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=Claude%20Code%20%E5%AF%BE%E5%BF%9C%20Dev%20Container%20%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E7%B7%A8%20%E2%80%95%20VS%20Code%20%E3%81%A7%E3%82%82%E3%81%9D%E3%82%8C%E4%BB%A5%E5%A4%96%E3%81%A7%E3%82%82%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-07-28-article1-devcontainer.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-07-28-article1-devcontainer.html&amp;title=Claude%20Code%20%E5%AF%BE%E5%BF%9C%20Dev%20Container%20%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E7%B7%A8%20%E2%80%95%20VS%20Code%20%E3%81%A7%E3%82%82%E3%81%9D%E3%82%8C%E4%BB%A5%E5%A4%96%E3%81%A7%E3%82%82%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>tech-ai</category>
  <guid>https://i9wa4.github.io/blog/2025-07-28-article1-devcontainer.html</guid>
  <pubDate>Sun, 27 Jul 2025 16:53:53 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>個人的ターミナル最適化 for Claude Code</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-07-14-optimize-your-teminal-for-claude-code.html</link>
  <description><![CDATA[ 





<section id="はじめに" class="level2">
<h2 class="anchored" data-anchor-id="はじめに">1. はじめに</h2>
<p>Claude Code で並行作業を行いやすくなるための工夫ポイントを全て共有します！</p>
<p>本当の私個人の趣味盛り盛りの内容なので役に立つ部分だけ読む形でお願いします。</p>
<p>なお分量が多いので参考記事やリンクを用意していない部分もあります。</p>
<p>インストール方法も各自で調べてください。</p>
</section>
<section id="対象読者" class="level2">
<h2 class="anchored" data-anchor-id="対象読者">2. 対象読者</h2>
<ul>
<li>Claude Code を使っている方</li>
<li>GitHub を使っている方</li>
<li>Vim を使っている、もしくは使いたい方</li>
</ul>
</section>
<section id="ターミナル以前" class="level2">
<h2 class="anchored" data-anchor-id="ターミナル以前">3. ターミナル以前</h2>
<section id="モニタ" class="level3">
<h3 class="anchored" data-anchor-id="モニタ">3.1. モニタ</h3>
<p>私は27インチ WQHD モニタを1枚使っていますが、やはりウルトラワイドモニタが良いらしいですね。</p>
<p>とはいえ私は出先や出社時はPC内蔵モニタを使っており、その場合も以降の内容で十分に Claude Code で並行作業はできるのでモニタが整っていない勢も安心して読み進めてください。</p>
</section>
<section id="os" class="level3">
<h3 class="anchored" data-anchor-id="os">3.2. OS</h3>
<p>最近よく使っているという理由で macOS (MacBook) を前提に話しますが、適宜読み替えても同様の環境が構築できるはずです。</p>
<p>一応 Ubuntu や Windows (WSL) も利用してはいるのである程度はクロスプラットフォームな内容にできていると思います。</p>
</section>
<section id="ウインドウマネージャー" class="level3">
<h3 class="anchored" data-anchor-id="ウインドウマネージャー">3.3. ウインドウマネージャー</h3>
<p>ターミナルと他ウインドウとの行き来を快適にできるのであればウインドウマネージャーは必須ではないです。</p>
<p>macOS では Windows でいう「Win+数字」に相当する一手で表示アプリを切り替えるショートカットが無いので AeroSpace を利用しています。</p>
<p><a href="https://github.com/nikitabobko/AeroSpace" class="uri">https://github.com/nikitabobko/AeroSpace</a></p>
<p>導入時に以下の記事がとても参考になりました。</p>
<p><a href="https://zenn.dev/mozumasu/articles/mozumasu-window-costomization">デスクトップは「清く・正しく・美しく」AeroSpace, JankyBorders, SketchyBar, alt-tab</a></p>
</section>
<section id="ブラウザ" class="level3">
<h3 class="anchored" data-anchor-id="ブラウザ">3.4. ブラウザ</h3>
<p>私は複数ウインドウや仮想デスクトップを使いこなすのが苦手なので Chrome のタブグループ機能で並行作業に対応することが多いです。</p>
</section>
<section id="dotfiles" class="level3">
<h3 class="anchored" data-anchor-id="dotfiles">3.5. dotfiles</h3>
<p>Claude Code による生産性をいかに上げるかが注目されている昨今、いつでもどんな PC でも快適に作業するために設定を記述しておく dotfiles の重要性が増していると個人的に話題です。</p>
<p>dotfiles にまだ入門できていない方は入門記事を参考にしてください。</p>
<p>今回述べている内容はほとんど以下の dotfiles に記述したものとなります。</p>
<p><a href="https://github.com/i9wa4/dotfiles" class="uri">https://github.com/i9wa4/dotfiles</a></p>
<p>私の設定で気になる内容がある場合は以下の DeepWiki で質問してみると的確な回答が得られます。</p>
<p><a href="https://deepwiki.com/i9wa4/dotfiles" class="uri">https://deepwiki.com/i9wa4/dotfiles</a></p>
</section>
</section>
<section id="シェル" class="level2">
<h2 class="anchored" data-anchor-id="シェル">4. シェル</h2>
<p>Zsh を愛用してます。</p>
<p>以下で Zsh のおすすめプラグインを紹介します。</p>
<section id="zinit" class="level3">
<h3 class="anchored" data-anchor-id="zinit">4.1. Zinit</h3>
<p>Zsh のプラグインマネージャーです。</p>
<p><a href="https://github.com/zdharma-continuum/zinit" class="uri">https://github.com/zdharma-continuum/zinit</a></p>
</section>
<section id="zeno.zsh-zshfish" class="level3">
<h3 class="anchored" data-anchor-id="zeno.zsh-zshfish">4.2. zeno.zsh (Zsh/Fish)</h3>
<p>Zsh の操作体験を全般的に向上させるプラグインの zeno.zsh です。</p>
<p><a href="https://github.com/yuki-yano/zeno.zsh" class="uri">https://github.com/yuki-yano/zeno.zsh</a></p>
<p>正直これが無いとターミナルを使う気になれないと思えるくらいに便利です。</p>
<p>最近 Fish にも対応したようなので Fish ユーザーの方もぜひ試してみてください。</p>
<p>作者の yuki-yano さんによる記事が参考になります。</p>
<p><a href="https://zenn.dev/yano/articles/zsh_plugin_from_deno">Deno + TypeScriptでzshプラグインを実装して最高になった</a></p>
<p>以下で Claude Code と共に生きる上で zeno.zsh に担ってもらっている役割を紹介します。</p>
<p>もちろんここに記述していない他の機能も便利です。</p>
<section id="ghq-管理リポジトリへの移動" class="level4">
<h4 class="anchored" data-anchor-id="ghq-管理リポジトリへの移動">4.2.1. ghq 管理リポジトリへの移動</h4>
<p>ghq については後述します。</p>
<p>zeno.zsh によって ghq + fzf の組み合わせでリポジトリへの移動がとても快適になります。</p>
</section>
<section id="tmux-セッション名へのリポジトリ名自動反映" class="level4">
<h4 class="anchored" data-anchor-id="tmux-セッション名へのリポジトリ名自動反映">4.2.2. tmux セッション名へのリポジトリ名自動反映</h4>
<p>ghq でリポジトリ移動すると tmux セッション名が自動でリポジトリ名に変更されます。</p>
<p>これにより難なく複数セッションを扱えます。</p>
</section>
</section>
</section>
<section id="ターミナル" class="level2">
<h2 class="anchored" data-anchor-id="ターミナル">5. ターミナル</h2>
<p>何でもよいのですが私は Alacritty を使っています。</p>
<p>通知音が鳴るように設定しておくとよいです。</p>
</section>
<section id="tmux" class="level2">
<h2 class="anchored" data-anchor-id="tmux">6. tmux</h2>
<p>複数ターミナルの管理について、タブ機能をもつターミナルもありますが私は tmux で複数ターミナルを管理するのが好きです。</p>
<p><a href="https://github.com/tmux/tmux/wiki/Installing" class="uri">https://github.com/tmux/tmux/wiki/Installing</a></p>
<section id="tmux-おすすめキーバインド" class="level3">
<h3 class="anchored" data-anchor-id="tmux-おすすめキーバインド">6.1. tmux おすすめキーバインド</h3>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>tmux.conf</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" data-filename="tmux.conf" style="background: #f1f3f5;"><pre class="sourceCode conf code-with-copy"><code class="sourceCode toml"><span id="cb1-1"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">bind-key</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">-n</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">M-Left</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">previous-window</span></span>
<span id="cb1-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">bind-key</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">-n</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">M-Right</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">next-window</span></span>
<span id="cb1-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">bind-key</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">-n</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">M-Up</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">switch-client</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">-p</span></span>
<span id="cb1-4"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">bind-key</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">-n</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">M-Down</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">switch-client</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">-n</span></span></code></pre></div></div>
</div>
<p>こちらは</p>
<ul>
<li>tmux のセッション間を Alt + 上下キーで切り替える</li>
<li>tmux のウインドウ間を Alt + 左右キーで切り替える</li>
</ul>
<p>を実現するキーバインドです。</p>
<p>これにより Claude Code の並行作業の様子を片手でセッションやウインドウを切り替えながら確認できます。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>tmux.conf</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" data-filename="tmux.conf" style="background: #f1f3f5;"><pre class="sourceCode conf code-with-copy"><code class="sourceCode toml"><span id="cb2-1"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">bind-key</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">%</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">split-window</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">-h</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">-c</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"#{pane_current_path}"</span></span>
<span id="cb2-2"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">bind-key</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">'"'</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">split-window</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">-v</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">-c</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"#{pane_current_path}"</span></span>
<span id="cb2-3"><span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">bind-key</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">c</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">new-window</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">-c</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"#{pane_current_path}"</span></span></code></pre></div></div>
</div>
<p>こちらは現在開いているディレクトリを継承して新しいペインやウインドウを作成するキーバインドです。</p>
<p>Claude Code と同じディレクトリに移動した状態のターミナルを即座に起動できます。</p>
</section>
<section id="tmux-おすすめプラグイン" class="level3">
<h3 class="anchored" data-anchor-id="tmux-おすすめプラグイン">6.2. tmux おすすめプラグイン</h3>
<p><a href="https://github.com/tmux-plugins/tpm" class="uri">https://github.com/tmux-plugins/tpm</a></p>
<p>tmux のプラグインマネージャーです。</p>
<p><a href="https://github.com/kristijanhusak/tmux-simple-git-status" class="uri">https://github.com/kristijanhusak/tmux-simple-git-status</a></p>
<p>tmux のステータスバーに Git の状態を表示するプラグインです。</p>
</section>
</section>
<section id="git" class="level2">
<h2 class="anchored" data-anchor-id="git">7. Git</h2>
<section id="worktree" class="level3">
<h3 class="anchored" data-anchor-id="worktree">7.1. worktree</h3>
<p>最近注目されている <code>git worktree</code> を使いましょう。</p>
<p>worktree 作成作業は定型化できると思うので worktree 作成用のスクリプトを作成しておくと便利です。</p>
</section>
<section id="gitignore" class="level3">
<h3 class="anchored" data-anchor-id="gitignore">7.2. gitignore</h3>
<p>リポジトリ内の作業ディレクトリ (<code>tmp/</code> など) を gitignore して Claude Code の作業場にしておくことをおすすめします。</p>
<p>指示用のドキュメントやログを格納して Claude Code に読ませるといった使い方ができます。</p>
</section>
<section id="ghq" class="level3">
<h3 class="anchored" data-anchor-id="ghq">7.3. ghq</h3>
<p>リポジトリの管理は ghq に任せたほうがよいです。</p>
<p><a href="https://github.com/x-motemen/ghq" class="uri">https://github.com/x-motemen/ghq</a></p>
</section>
</section>
<section id="エディタ" class="level2">
<h2 class="anchored" data-anchor-id="エディタ">8. エディタ</h2>
<p>私は Vim が好きで使っています。</p>
<p>以下で私が Claude Code のために利用している Vim プラグインを紹介します。</p>
<section id="vim-tmux-send-to-ai-cli" class="level3">
<h3 class="anchored" data-anchor-id="vim-tmux-send-to-ai-cli">8.1. vim-tmux-send-to-ai-cli</h3>
<p><a href="https://github.com/i9wa4/vim-tmux-send-to-ai-cli" class="uri">https://github.com/i9wa4/vim-tmux-send-to-ai-cli</a></p>
<p>拙作プラグインです。</p>
<p>Vim のバッファや複数行にわたる選択範囲などを自在に tmux の Claude Code ペインに送信できます。</p>
<p>現時点では Claude Code と Gemini CLI に対応しています。</p>
<p>このプラグインを使うと基本的に AI への入力にまつわる問題を Vim での文章作成における問題に帰着できます。</p>
<p>つまり何が言いたいかというと AI の入力欄の機能に依存せずに AI への入力を作成できるということです。</p>
<p>Vim に帰着させることで改行しづらい問題や Gemini CLI にカスタムスラッシュコマンドがない問題などを全て解決できます。</p>
</section>
<section id="ddc.vim" class="level3">
<h3 class="anchored" data-anchor-id="ddc.vim">8.2. ddc.vim</h3>
<p><a href="https://github.com/Shougo/ddc.vim" class="uri">https://github.com/Shougo/ddc.vim</a></p>
<p>補完機能を強化するために ddc.vim を使っています。</p>
</section>
<section id="skkeleton" class="level3">
<h3 class="anchored" data-anchor-id="skkeleton">8.3. skkeleton</h3>
<p><a href="https://github.com/vim-skk/skkeleton" class="uri">https://github.com/vim-skk/skkeleton</a></p>
<p>Vim で日本語入力をしづらいという問題を解決するために SKK を利用できる skkeleton を使っています。</p>
<p>私は ddc.vim の source として利用しています。</p>
</section>
<section id="ddc-source-file" class="level3">
<h3 class="anchored" data-anchor-id="ddc-source-file">8.4. ddc-source-file</h3>
<p><a href="https://github.com/LumaKernel/ddc-source-file" class="uri">https://github.com/LumaKernel/ddc-source-file</a></p>
<p>ddc.vim の source です。ファイル名やパスを補完してくれます。</p>
<p>一応 Vim の補完機能で</p>
<blockquote class="blockquote">
<p>CTRL-X CTRL-F</p>
</blockquote>
<p><a href="https://vim-jp.org/vimdoc-ja/usr_24.html#24.3" class="uri">https://vim-jp.org/vimdoc-ja/usr_24.html#24.3</a></p>
<p>を使用すると同等の補完ができますが、より快適な ddc.vim の補完機能がよいと思います。</p>
</section>
</section>
<section id="claude-code-設定" class="level2">
<h2 class="anchored" data-anchor-id="claude-code-設定">9. Claude Code 設定</h2>
<section id="claude_config_dir" class="level3">
<h3 class="anchored" data-anchor-id="claude_config_dir">9.1. <code>$CLAUDE_CONFIG_DIR</code></h3>
<p>必ず設定しましょう。</p>
<p>私は以下のように設定しています。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">export</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">CLAUDE_CONFIG_DIR</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">${XDG_CONFIG_HOME}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>/claude</span></code></pre></div></div>
</section>
<section id="claude.md" class="level3">
<h3 class="anchored" data-anchor-id="claude.md">9.2. CLAUDE.md</h3>
<p>私は CLAUDE.md は作成していません。</p>
<p>CLAUDE.md を作成せず Claude Code に最適化しすぎないことで Gemini CLI などの他の AI ツールに移行しやすくしようと考えています。</p>
<p>もう1つの理由としては再読み込みが必要になる場面では CLAUDE.md よりカスタムスラッシュコマンドの再実行の方が楽だと感じているからです。</p>
</section>
<section id="カスタムスラッシュコマンド" class="level3">
<h3 class="anchored" data-anchor-id="カスタムスラッシュコマンド">9.3. カスタムスラッシュコマンド</h3>
<p>ここが AI とやりとりをする上での肝になります。</p>
<p>私の dotfiles では以下のカスタムスラッシュコマンドを用意しています。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">.</span></span>
<span id="cb4-2"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">└──</span> commands</span>
<span id="cb4-3">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> commit.md</span>
<span id="cb4-4">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> CONTRIBUTING.md</span>
<span id="cb4-5">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> issue-to-pr.md</span>
<span id="cb4-6">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> learn-bigquery.md</span>
<span id="cb4-7">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> learn-databricks.md</span>
<span id="cb4-8">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">├──</span> learn-dbt.md</span>
<span id="cb4-9">    <span class="ex" style="color: null;
background-color: null;
font-style: inherit;">└──</span> review.md</span></code></pre></div></div>
<p>issue-to-pr.md については、羃等性をもたせ Anthropic のベストプラクティスに沿った形で Pull Request 作成に誘導できるコマンドに仕上げている最中で、ノウハウが蓄積されてきたら別途記事にしようと思います。</p>
</section>
<section id="settings.json" class="level3">
<h3 class="anchored" data-anchor-id="settings.json">9.4. settings.json</h3>
<p>あまり凝ったことはしていません。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>settings.json</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5" data-filename="settings.json" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb5-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-2">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"permissions"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-3">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"allow"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb5-4">        <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-5">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"deny"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb5-6">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bash(rm:*)"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-7">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"WebFetch(domain:github.com)"</span></span>
<span id="cb5-8">        <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span></span>
<span id="cb5-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">},</span></span>
<span id="cb5-10">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"env"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">{</span></span>
<span id="cb5-11">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"BASH_DEFAULT_TIMEOUT_MS"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300000</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb5-12">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"BASH_MAX_TIMEOUT_MS"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300000</span></span>
<span id="cb5-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">},</span></span>
<span id="cb5-14">    <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">"includeCoAuthoredBy"</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">:</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">false</span></span>
<span id="cb5-15"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">}</span></span></code></pre></div></div>
</div>
<p>基本的に</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">claude</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--dangerously-skip-permissions</span></span></code></pre></div></div>
<p>で起動するので permissions に関しては allow ではなく deny を充実させていく方針で設定しています。</p>
<p>Claude Code はよくファイル削除を試みるので <code>Bash(rm:*)</code> は必須だと思います。</p>
</section>
<section id="claude.json" class="level3">
<h3 class="anchored" data-anchor-id="claude.json">9.5. .claude.json</h3>
<p>通知音を鳴らすための設定を行います。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">claude</span> config set <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--global</span> preferredNotifChannel terminal_bell</span></code></pre></div></div>
<p>このコマンドを実行すると以下のような設定が <code>.claude.json</code> に追加されます。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.claude.json</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8" data-filename=".claude.json" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb8-1">  <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">"preferredNotifChannel":</span> <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">"terminal_bell",</span></span></code></pre></div></div>
</div>
<p>これで足りなければ Hooks 設定の作り込みで対応していきましょう。</p>
<p>通知音設定については勉強中です。</p>
</section>
</section>
<section id="dev-container" class="level2">
<h2 class="anchored" data-anchor-id="dev-container">10. Dev Container</h2>
<p>Dev Container で Claude Code を利用することで安全に</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">claude</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">--dangerously-skip-permissions</span></span></code></pre></div></div>
<p>ができます。</p>
<p><a href="https://docs.anthropic.com/en/docs/claude-code/devcontainer" class="uri">https://docs.anthropic.com/en/docs/claude-code/devcontainer</a></p>
<p>Anthropic 公式が示す <code>.devcontainer</code> がそのまま使えます。</p>
<p>以下のようにグローバルな Claude Code 設定をマウントするなどして利便性向上を図りつつ使っていきましょう。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>.devcontainer/devcontainer.json</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10" data-filename=".devcontainer/devcontainer.json" style="background: #f1f3f5;"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb10-1">    <span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">"mounts":</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">[</span></span>
<span id="cb10-2">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"source=claude-code-bashhistory-${devcontainerId},target=/commandhistory,type=volume"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb10-3">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"source=claude-code-config-${devcontainerId},target=/home/node/.claude,type=volume"</span><span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">,</span></span>
<span id="cb10-4">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"source=${localEnv:HOME}/ghq/github.com/i9wa4/dotfiles/dot.config/claude,target=/home/node/.claude,type=bind,consistency=cached"</span></span>
<span id="cb10-5">    <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">]</span><span class="er" style="color: #AD0000;
background-color: null;
font-style: inherit;">,</span></span></code></pre></div></div>
</div>
<p><a href="https://github.com/devcontainers/cli" class="uri">https://github.com/devcontainers/cli</a></p>
<p>Dev Container を CLI で利用する際は Dev Container CLI を利用しましょう。</p>
</section>
<section id="おわりに" class="level2">
<h2 class="anchored" data-anchor-id="おわりに">11. おわりに</h2>
<p>各項目それだけでも記事になるくらいの内容で消化が大変かもしれませんが参考になれば幸いです。</p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-07-14-optimize-your-teminal-for-claude-code.html&amp;text=%E5%80%8B%E4%BA%BA%E7%9A%84%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%8A%E3%83%AB%E6%9C%80%E9%81%A9%E5%8C%96%20for%20Claude%20Code%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=%E5%80%8B%E4%BA%BA%E7%9A%84%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%8A%E3%83%AB%E6%9C%80%E9%81%A9%E5%8C%96%20for%20Claude%20Code%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-07-14-optimize-your-teminal-for-claude-code.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-07-14-optimize-your-teminal-for-claude-code.html&amp;title=%E5%80%8B%E4%BA%BA%E7%9A%84%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%8A%E3%83%AB%E6%9C%80%E9%81%A9%E5%8C%96%20for%20Claude%20Code%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>tech-ai</category>
  <category>tech-vim</category>
  <guid>https://i9wa4.github.io/blog/2025-07-14-optimize-your-teminal-for-claude-code.html</guid>
  <pubDate>Sun, 13 Jul 2025 17:27:26 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Vimへの初コントリビューションの経緯と学び</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-07-14-my-first-vim-contribution.html</link>
  <description><![CDATA[ 





<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>この記事は <a href="https://vim-jp.org/ekiden/">Vim 駅伝</a> の 2025-07-14 の記事です。</p>
<p>前回は 2025-07-11 NI57721 さんの <a href="https://zenn.dev/vim_jp/articles/wayland-clipboard-feature-in-vim">Vim が Wayland のクリップボードをサポート</a> でした。</p>
</div>
</div>
<section id="はじめに" class="level2">
<h2 class="anchored" data-anchor-id="はじめに">1. はじめに</h2>
<p>Vim 本体に出したバグ修正の Pull Request がマージされました。</p>
<p><a href="https://github.com/vim/vim/commit/b3eaae21b9f681d23466e7caa0b9d7e32cb4b206" class="uri">https://github.com/vim/vim/commit/b3eaae21b9f681d23466e7caa0b9d7e32cb4b206</a></p>
<p>以降でバグ発見の経緯と学びを共有します。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i9wa4.github.io/assets/2025-07-14-my-first-vim-contribution/vim-contributor.png" class="img-fluid figure-img"></p>
<figcaption>私に Vim Contributor 表記が付与されている様子</figcaption>
</figure>
</div>
</section>
<section id="バグ発見の経緯" class="level2">
<h2 class="anchored" data-anchor-id="バグ発見の経緯">2. バグ発見の経緯</h2>
<p>私は Vim の HEAD (main ブランチの最新コミット) ビルドを日課にしています。</p>
<p>自分でビルドするとビルドオプションを指定できたり最新機能が使えたりして楽しいです。</p>
<p>そうしているうちにある日ビルトインのファイラープラグインである Netrw.vim のファイル一覧に空行の入るバグが入ったことに気付きました。</p>
<p>気になって Vim 本体の Issue や Pull Request を見ても同様のバグが報告されていなかったので自分で Pull Request を出すことにしました。</p>
<p>……反省点として後述しますがこの判断はちょっと考慮が足りなかったです。</p>
</section>
<section id="pull-request-作成まで" class="level2">
<h2 class="anchored" data-anchor-id="pull-request-作成まで">3. Pull Request 作成まで</h2>
<p>OSS プロジェクトに Pull Request を出したことがなかったのですが、 CONTRIBUTING.md を読めばいいであろうということは知っていたので Vim のリポジトリの CONTRIBUTING.md を読みました。</p>
<p><a href="https://github.com/vim/vim/blob/master/CONTRIBUTING.md" class="uri">https://github.com/vim/vim/blob/master/CONTRIBUTING.md</a></p>
<p>今回については Signing-off commits 推奨ということくらいで特に細かく何かを守る必要はないのかなという理解をしました。</p>
<p>とは言えそれでは不安があったので直近の Netrw.vim 関連のコミットや Pull Request をざっくり確認してみました。</p>
<p>実際の修正内容については Netrw.vim プラグインの直近1-2週間の間に入ったコミットの影響であろうことは分かっていたので Claude Code にバグ混入コミットを特定してもらって、修正案も出してもらいました。</p>
<p>自分のマシン (macOS) では1行追加するだけで修正できることが分かり、勢いで Pull Request を作成しました。</p>
</section>
<section id="pull-request-のレビュー" class="level2">
<h2 class="anchored" data-anchor-id="pull-request-のレビュー">4. Pull Request のレビュー</h2>
<p>Netrw.vim のメンテナの <span class="citation" data-cites="saccarosium">@saccarosium</span> さんにレビューしていただき Upstream と書き味を揃える Suggestion をいただきマージされました。</p>
</section>
<section id="学び" class="level2">
<h2 class="anchored" data-anchor-id="学び">5. 学び</h2>
<section id="反省点" class="level3">
<h3 class="anchored" data-anchor-id="反省点">5.1. 反省点</h3>
<p>Pull Request を出すまでは近眼的になって気付かなかったのですが今回の修正対象のファイルのトップに</p>
<p><a href="https://github.com/vim/vim/blob/68ee1cf7de36bdd6e642807c8beda751112aaab8/runtime/pack/dist/opt/netrw/autoload/netrw.vim">vim/runtime/pack/dist/opt/netrw/autoload/netrw.vim</a></p>
<blockquote class="blockquote">
<pre class="vim"><code>" Upstream: &lt;https://github.com/saccarosium/netrw.vim&gt;</code></pre>
</blockquote>
<p>と書かれている通り Netrw.vim には Upstream のリポジトリ</p>
<p><a href="https://github.com/saccarosium/netrw.vim" class="uri">https://github.com/saccarosium/netrw.vim</a></p>
<p>が存在します。</p>
<p>実際 Upstream では私が Pull Request を作成する2日前に既に本件は修正済みとなっていました。</p>
<p>というわけで本来はこの Upstream のリポジトリを最初に確認するのが正しい手順でした。</p>
<p>この状況を理解していた場合でも早めに Vim 本体側へ適用してほしい旨を相談することに変わりはなかったのですが、全てを知った上で行動するのが最善だったなあと思います。</p>
<p>だれがどのように関わって Vim という巨大なリポジトリが成り立っているのかもっと知ろうと思うようになりました。</p>
<p>もう1つの反省点は、改行回りが関係するので macOS だけでなく Windows についても考慮する必要があったという点です。</p>
<p>Vim のクロスプラットフォーム対応って大変なことなんだなあと改めて実感しました。</p>
</section>
<section id="netrw.vim-の理解度アップ" class="level3">
<h3 class="anchored" data-anchor-id="netrw.vim-の理解度アップ">5.2. Netrw.vim の理解度アップ</h3>
<p>Netrw.vim はメンテナ不在でバグも放置されていると言われていてここ数年その理解のままでした。</p>
<p>今回の Pull Request をきっかけに新しいメンテナの方が精力的にリファクタリングを行っている現状を知ることができました。</p>
<p>(今回のバグはリファクタリングの影響で発生したものでした)</p>
</section>
</section>
<section id="おわりに" class="level2">
<h2 class="anchored" data-anchor-id="おわりに">6. おわりに</h2>
<p>理解が不十分なまま勢いで Pull Request を作成したもののメンテナの <span class="citation" data-cites="saccarosium">@saccarosium</span> さんの温情によりマージに至りました。</p>
<p>なんやかんやで自分は Netrw.vim を毎日使っていて愛着があるなと自覚したのでこれ以降 Upstream の最新版を利用してます。</p>
<p>また次のコントリビュートチャンスを狙っていきたいと思います。</p>
</section>
<section id="おまけ" class="level2">
<h2 class="anchored" data-anchor-id="おまけ">7. おまけ</h2>
<p><a href="https://vim-jp.org/docs/chat.html">vim-jp Slack</a> の #dev チャンネルにて成果報告した様子</p>
<p>vim-jp における #dev チャンネルとはもちろん Vim 本体開発の話題を扱うチャンネルですよ！</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i9wa4.github.io/assets/2025-07-14-my-first-vim-contribution/vim-jp-igyo.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Vim Jp Igyo image</figcaption>
</figure>
</div>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-07-14-my-first-vim-contribution.html&amp;text=Vim%E3%81%B8%E3%81%AE%E5%88%9D%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AA%E3%83%93%E3%83%A5%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E7%B5%8C%E7%B7%AF%E3%81%A8%E5%AD%A6%E3%81%B3%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=Vim%E3%81%B8%E3%81%AE%E5%88%9D%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AA%E3%83%93%E3%83%A5%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E7%B5%8C%E7%B7%AF%E3%81%A8%E5%AD%A6%E3%81%B3%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-07-14-my-first-vim-contribution.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-07-14-my-first-vim-contribution.html&amp;title=Vim%E3%81%B8%E3%81%AE%E5%88%9D%E3%82%B3%E3%83%B3%E3%83%88%E3%83%AA%E3%83%93%E3%83%A5%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E7%B5%8C%E7%B7%AF%E3%81%A8%E5%AD%A6%E3%81%B3%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>tech-vim</category>
  <category>vim-jp</category>
  <guid>https://i9wa4.github.io/blog/2025-07-14-my-first-vim-contribution.html</guid>
  <pubDate>Sun, 13 Jul 2025 15:06:04 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>tmux で Vim から Claude Code にテキストを送信するプラグインを作った</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-06-20-vim-plugin-for-tmux-claude-code.html</link>
  <description><![CDATA[ 





<section id="はじめに" class="level2">
<h2 class="anchored" data-anchor-id="はじめに">1. はじめに</h2>
<p>昨日 Claude Code デビューしました！🙌</p>
<p>Claude Code 入力欄に Vim からテキストを送信したかったので Claude Code で Vim プラグインを作りました。</p>
</section>
<section id="プラグインの概要" class="level2">
<h2 class="anchored" data-anchor-id="プラグインの概要">2. プラグインの概要</h2>
<p>こちらが作成した Vim プラグインです。</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://github.com/i9wa4/vim-tmux-send-to-claude-code"><img src="https://i9wa4.github.io/assets/2025-06-20-vim-plugin-for-tmux-claude-code/vim-tmux-send-to-claude-code.jpeg" class="img-fluid figure-img"></a></p>
<figcaption>Vim Tmux Send To Claude Code image</figcaption>
</figure>
</div>
<p><a href="https://github.com/i9wa4/vim-tmux-send-to-claude-code" class="uri">https://github.com/i9wa4/vim-tmux-send-to-claude-code</a></p>
<p>tmux で同一ウインドウ内の特定の Claude Code ペイン (変数で指定可) に対して Vim ペインから以下のテキストを送信できます。</p>
<ul>
<li>バッファ全体</li>
<li>ヤンクしたテキスト</li>
<li>Visual モードで選択したテキスト</li>
<li>指定した行範囲のテキスト</li>
</ul>
</section>
<section id="claude-code-を使ってみた感想" class="level2">
<h2 class="anchored" data-anchor-id="claude-code-を使ってみた感想">3. Claude Code を使ってみた感想</h2>
<p>もともとヤンクしたテキストを tmux のペイン間で送信するためのプラグインを作ろうと思っていました。</p>
<p>Claude Code に任せつつ私のアイデアを共有したところ、気の効いた機能追加やドキュメント整備をサクッとやってくれました。</p>
<p>README.md で紹介されているプラグインマネージャーが古かったり、キーバインドをデフォルトで押し付けてこようとしたりと既存のプラグインのリポジトリの特徴を掴んでいて面白いかったです。</p>
<p>キーバインド押し付けは主義に反するので直してもらいましたが、プラグインマネージャーは古いままにしておきましょうかね。笑</p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-06-20-vim-plugin-for-tmux-claude-code.html&amp;text=tmux%20%E3%81%A7%20Vim%20%E3%81%8B%E3%82%89%20Claude%20Code%20%E3%81%AB%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%92%E9%80%81%E4%BF%A1%E3%81%99%E3%82%8B%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%9F%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=tmux%20%E3%81%A7%20Vim%20%E3%81%8B%E3%82%89%20Claude%20Code%20%E3%81%AB%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%92%E9%80%81%E4%BF%A1%E3%81%99%E3%82%8B%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%9F%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-06-20-vim-plugin-for-tmux-claude-code.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-06-20-vim-plugin-for-tmux-claude-code.html&amp;title=tmux%20%E3%81%A7%20Vim%20%E3%81%8B%E3%82%89%20Claude%20Code%20%E3%81%AB%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%92%E9%80%81%E4%BF%A1%E3%81%99%E3%82%8B%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%9F%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>tech-ai</category>
  <category>tech-vim</category>
  <guid>https://i9wa4.github.io/blog/2025-06-20-vim-plugin-for-tmux-claude-code.html</guid>
  <pubDate>Thu, 19 Jun 2025 18:00:02 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>ローカル dbt で BigQuery への認証を行う</title>
  <dc:creator>uma-chan </dc:creator>
  <link>https://i9wa4.github.io/blog/2025-06-15-dbt-bigquery-auth.html</link>
  <description><![CDATA[ 





<section id="はじめに" class="level2">
<h2 class="anchored" data-anchor-id="はじめに">1. はじめに</h2>
<p>dbt も BigQuery も経験それなりにあるものの dbt x BigQuery をやったことがなかったので認証方法を知ったのが今となります。</p>
</section>
<section id="dbt-のドキュメントを参照してみる" class="level2">
<h2 class="anchored" data-anchor-id="dbt-のドキュメントを参照してみる">2. dbt のドキュメントを参照してみる</h2>
<p>OAuth を使った認証方法は以下のドキュメントに記載されています。</p>
<p><a href="https://docs.getdbt.com/docs/core/connect-data-platform/bigquery-setup#local-oauth-gcloud-setup" class="uri">https://docs.getdbt.com/docs/core/connect-data-platform/bigquery-setup#local-oauth-gcloud-setup</a></p>
<p>ではあるのですが、実際のログイン方法として紹介されているコマンドは少し違うようで、代表的なものは以下のような感じです。</p>
<p><a href="https://dev.classmethod.jp/articles/dbt-core-bigquery/">dbt CoreでローカルからBigQueryを操作するためのセットアップ方法 | DevelopersIO</a></p>
<p>記事でよく見かけるものを実行していきます。</p>
</section>
<section id="認証手順" class="level2">
<h2 class="anchored" data-anchor-id="認証手順">3. 認証手順</h2>
<section id="profiles.yml-の設定" class="level3">
<h3 class="anchored" data-anchor-id="profiles.yml-の設定">3.1. profiles.yml の設定</h3>
<p>以下のような記載が含まれていれば OK</p>
<p><code>method: oauth</code> を指定していることがポイントです。</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>~/.dbt/profiles.yml</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" data-filename="~/.dbt/profiles.yml" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">my_dbt_project</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb1-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">target</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> dev</span></span>
<span id="cb1-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">outputs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb1-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dev</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb1-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">type</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> bigquery</span></span>
<span id="cb1-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">method</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> oauth</span></span>
<span id="cb1-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">project</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> my-google-cloud-project</span></span>
<span id="cb1-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">threads</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span></span>
<span id="cb1-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">schema</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> my_schema</span></span></code></pre></div></div>
</div>
</section>
<section id="アプリケーション向けのログイン" class="level3">
<h3 class="anchored" data-anchor-id="アプリケーション向けのログイン">3.2. アプリケーション向けのログイン</h3>
<p>以下のコマンドにより dbt が Google Cloud の API を呼び出せることになります。</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">$</span> gcloud auth application-default login</span></code></pre></div></div>
</section>
</section>
<section id="おわりに" class="level2">
<h2 class="anchored" data-anchor-id="おわりに">4. おわりに</h2>
<p>いま手元では1環境にしかログインしないのであまり深く理解していなくても大丈夫ですが、複数環境にログインする際にもうちょっと深く理解しておきます。</p>


<div class="social-share"><a href="https://twitter.com/share?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-06-15-dbt-bigquery-auth.html&amp;text=%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%20dbt%20%E3%81%A7%20BigQuery%20%E3%81%B8%E3%81%AE%E8%AA%8D%E8%A8%BC%E3%82%92%E8%A1%8C%E3%81%86%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="twitter"><i class="bi bi-twitter-x"></i></a><a href="https://bsky.app/intent/compose?text=%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%20dbt%20%E3%81%A7%20BigQuery%20%E3%81%B8%E3%81%AE%E8%AA%8D%E8%A8%BC%E3%82%92%E8%A1%8C%E3%81%86%20%E2%80%93%20uma-chan%E2%80%99s%20page%20https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-06-15-dbt-bigquery-auth.html" target="_blank" class="bsky"><i class="bi bi-bluesky"></i></a><a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fi9wa4.github.io%2Fblog%2F2025-06-15-dbt-bigquery-auth.html&amp;title=%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%20dbt%20%E3%81%A7%20BigQuery%20%E3%81%B8%E3%81%AE%E8%AA%8D%E8%A8%BC%E3%82%92%E8%A1%8C%E3%81%86%20%E2%80%93%20uma-chan%E2%80%99s%20page" target="_blank" class="linkedin"><i class="bi bi-linkedin"></i></a></div>
</section>

 ]]></description>
  <category>blog</category>
  <category>tech-data</category>
  <guid>https://i9wa4.github.io/blog/2025-06-15-dbt-bigquery-auth.html</guid>
  <pubDate>Sun, 15 Jun 2025 13:35:51 GMT</pubDate>
  <media:content url="https://i9wa4.github.io/assets/common/icon_hhkb3_large.jpg" medium="image" type="image/jpeg"/>
</item>
</channel>
</rss>
