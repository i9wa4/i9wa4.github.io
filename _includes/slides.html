<ul class="dir-list"></ul>
<script>
// GitHub API URL
const apiUrl = 'https://api.github.com/repos/i9wa4/slides/contents';

// GitHubユーザー名とリポジトリ名
const userName = 'i9wa4';
const repositoryName = 'slides';

// 除外するディレクトリ名
const excludedDirs = ['.github', 'assets'];

// ディレクトリ構造を取得
fetch(apiUrl + '?ref=main')
  .then(response => response.json())
  .then(data => {
    // ディレクトリのみを抽出
    const directories = extractDirectories(data);

    // 抽出したディレクトリをリストアイテムに変換
    const listItems = directories.map(dir => {
      const listItem = document.createElement('li');
      const link = document.createElement('a');
      link.href = `http://${userName}.github.io/${repositoryName}/${dir.name}`;
      // ディレクトリ名をそのまま表示
      link.textContent = `http://${userName}.github.io/${repositoryName}/${dir.name}`;
      listItem.appendChild(link);
      listItem.classList.add('dir');
      return listItem;
    });

    // リストアイテムをリストに追加
    const dirList = document.querySelector('.dir-list');
    dirList.innerHTML = '';
    dirList.append(...listItems);
  })
  .catch(error => {
    console.error('Error:', error);
  });

// ディレクトリ構造からディレクトリのみを抽出する関数
function extractDirectories(data) {
  const directories = [];
  data.forEach(item => {
    if (item.type === 'dir' && !excludedDirs.includes(item.name)) {
      directories.push(item);
      if (item.dir) {
        directories.push(...extractDirectories(item.dir));
      }
    }
  });
  return directories;
}
</script>
